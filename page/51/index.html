<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="baidu-site-verification" content="codeva-6wmKWl5hmx" />
<meta name="bytedance-verification-code" content="GcOf/MpQ8shZ5Hh/2hvr" />
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-33RJLY0818"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-33RJLY0818');
</script>

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.sovdating.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Hello dev">
<meta property="og:type" content="website">
<meta property="og:title" content="Sovdating Linux">
<meta property="og:url" content="https://www.sovdating.com/page/51/index.html">
<meta property="og:site_name" content="Sovdating Linux">
<meta property="og:description" content="Hello dev">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="DJY">
<meta property="article:tag" content="golang python linux ubuntu centos rust">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.sovdating.com/page/51/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/51/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Sovdating Linux - some code for program</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Sovdating Linux</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">some code for program</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">DJY</p>
  <div class="site-description" itemprop="description">Hello dev</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">554</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">94</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">389</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/How-to-load-dll-file-in-Java-Web-Project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/How-to-load-dll-file-in-Java-Web-Project/" class="post-title-link" itemprop="url">Java中Web Project如何加载dll/DLL文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-05-19 20:41:23" itemprop="dateCreated datePublished" datetime="2015-05-19T20:41:23+00:00">2015-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:28" itemprop="dateModified" datetime="2024-01-26T12:42:28+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>基本上常用的项目有两种，一种是Java Project，另一种是Web Project，下面就以这两种项目为例，来阐释如何在项目中加载dll文件。</p>
<h3 id="Java中调用dll的方式"><a href="#Java中调用dll的方式" class="headerlink" title="Java中调用dll的方式"></a>Java中调用dll的方式</h3><ul>
<li><p>System.load()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*Loads the native library specified by the filename argument. The filename argument must be an absolute path name.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">load</span><span class="params">(String filename)</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">Runtime.getRuntime().load(name)</span><br></pre></td></tr></table></figure>
<p>由JDK的说明文档可知，load()方法接收的是绝对路径。</p>
</li>
<li><p>System.loadLibrary() </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Loads the native library specified by the libname argument. The libname argument must not contain any platform specific prefix, file extension or path.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">loadLibrary</span><span class="params">(String libname)</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">Runtime.getRuntime().loadLibrary(name)</span><br></pre></td></tr></table></figure>
<p>由JDK的说明文档可知，loadLibrary()方法不接收任何平台相关的特定前缀、文件扩展名或者路径。该方法会自动搜索一些固定路径，我们只需要把dll文件放入<strong>Path</strong>（系统的环境变量）路径下或者<strong>System32</strong>路径下，也可以直接放在Java项目的根目录下。以上几种方法都可以成功加载。</p>
</li>
</ul>
<h3 id="Java-Project"><a href="#Java-Project" class="headerlink" title="Java Project"></a>Java Project</h3><p>如果是Java Project，只要把dll文件放在Path或者System32或者项目根目录下,基本上都可以正确的加载到dll文件。</p>
<h3 id="Web-Project"><a href="#Web-Project" class="headerlink" title="Web Project"></a>Web Project</h3><p>根据<a target="_blank" rel="noopener" href="http://www.importnew.com/12590.html">2014年最流行的应用服务器</a>的统计结果，41%的应用服务器部署的是Tomcat，其中出乎我意料的是Jetty以31%的份额占据了第二把交椅，那就以最常用的Tomcat为例吧。</p>
<p>如果使用load()方法加载dll文件，那么代码应该这么写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> DBUtils.class.getResource(<span class="string">&quot;/&quot;</span>).getPath();</span><br><span class="line">path = path.replaceAll(<span class="string">&quot;%20&quot;</span>, <span class="string">&quot; &quot;</span>);<span class="comment">//排除中文空格</span></span><br><span class="line">System.load(path + <span class="string">&quot;user.dll&quot;</span>);  </span><br></pre></td></tr></table></figure>

<p>如果使用loadLibrary()方法加载dll文件，简单的如上处理已经不能解决问题了，这是因为Web项目中，将 java.library.path 这个系统属性输出了一下，结果出来两个路径：</p>
<ul>
<li>%JAVA_HOME%&#x2F;bin</li>
<li>%TOMCAT_HOME%&#x2F;bin</li>
</ul>
<p>当然了其实还应该包括一个路径就是</p>
<ul>
<li>%JRE_HOME%&#x2F;bin</li>
</ul>
<p>所以这时候，在Windows上的Web Project系统至少有三个地方可以放置我们的dll文件，你可以任取其一即可。对于<strong>JAVA_HOME</strong>和<strong>JRE_HOME</strong>，只要放入它们对应的<strong>bin</strong>目录下即可，但是<strong>TOMCAT_HOME</strong>就稍微复杂一点，一定要记住把dll文件放在和启动Tomcat的文件同一目录中，一般来说，放入tomcat的bin目录下即可，这是因为启动tomcat的命令<strong>startup.bat</strong>就在bin目录下，但是如果启动tomcat的命令不在tomcat的bin目录下，dll文件就应该放在启动tomcat的命令所在的目录。</p>
<p>也许有人说，难道有的tomcat的启动命令不是在bin目录下，是的，maybe就真的存在，比如在Eclipse中配置tomcat（免安装的tomcat版本），然后在Eclipse中启动tomcat，这时候，仅仅简单的将dll文件放在tomcat&#x2F;bin&#x2F;目录下是行不通的，大家可以测试一下。本人测试在<strong>JAVA_HOME</strong>的bin目录中是完全没问题的，但是这样的话当项目越来越多，dll文件越来越多，就很难区分开哪些dll文件是属于哪些项目的了。</p>
<h3 id="路径测试"><a href="#路径测试" class="headerlink" title="路径测试"></a>路径测试</h3><p>环境是编译完成的本地LTP动态链接库，这些链接库可能还会加载LTP训练好的一些model-模型文件，所以作为测试不太合适，因为受model不定因素影响，但是可以借鉴一下。</p>
<ul>
<li>在Eclipse中配置的Tomcat情况下，当在类中使用System.loadLibrary(“ner_jni”);方法时</li>
</ul>
<blockquote>
<p>将dll文件放在WEB-INF&#x2F;lib&#x2F;下面找不到dll文件<br>将dll文件放在Tomcat&#x2F;bin&#x2F;目录下面找不到dll文件<br>将dll文件放在Web Project的src目录下面找不到dll文件</p>
</blockquote>
<ul>
<li>当在类中使用<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> NER.class.getResource(<span class="string">&quot;/&quot;</span>).getPath();</span><br><span class="line">str = str.replaceAll(<span class="string">&quot;%20&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">System.load(str + <span class="string">&quot;ner_jni.dll&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>方式时，并将dll文件放在Web Project的src目录下会出现</p>
<blockquote>
<p>[java.lang.UnsatisfiedLinkError: D:\devSoft\apache-tomcat-7.0.52\webapps\DaseLab\WEB-INF\classes\segmentor_jni.dll: Can’t find dependent libraries]</p>
</blockquote>
<p>这已经不是找不到dll文件的问题了，而是找不到依赖库，说明这种方式或许是可以加载到dll文件的，但是加载dll文件的顺序不正确，先加载的dll文件可能会依赖于后加载的dll文件，所以这种方式，一定要注意加载dll文件的顺序。解决办法可以参见【4】中的资料。</p>
<ul>
<li>使用loadLibrary()方法时，将dll文件放在Java安装目录的bin&#x2F;下，这种方式肯定可以加载到dll文件，但是可能会出现</li>
</ul>
<blockquote>
<p>Classloader, XXX.dll already loaded in another classloader </p>
</blockquote>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://www.cnblogs.com/zfc2201/archive/2011/09/02/2163268.html">http://www.cnblogs.com/zfc2201/archive/2011/09/02/2163268.html</a><br>[2] <a target="_blank" rel="noopener" href="http://www.programgo.com/article/4119403163/">http://www.programgo.com/article/4119403163/</a><br>[3] <a target="_blank" rel="noopener" href="http://blog.csdn.net/zhyh1986/article/details/9199063">http://blog.csdn.net/zhyh1986/article/details/9199063</a><br>[4] <a target="_blank" rel="noopener" href="http://www.111cn.net/jsp/Java/41523.htm">http://www.111cn.net/jsp/Java/41523.htm</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Git-filtering-method-of-uploaded-files/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Git-filtering-method-of-uploaded-files/" class="post-title-link" itemprop="url">Git过滤上传文件的方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-05-14 13:48:10" itemprop="dateCreated datePublished" datetime="2015-05-14T13:48:10+00:00">2015-05-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:26" itemprop="dateModified" datetime="2024-01-26T12:42:26+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git-GitHub/" itemprop="url" rel="index"><span itemprop="name">Git/GitHub</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="针对单一工程排除文件"><a href="#针对单一工程排除文件" class="headerlink" title="针对单一工程排除文件"></a>针对单一工程排除文件</h3><p>针对单一工程排除文件，这种方式会让这个工程的所有修改者在克隆代码的同时，也能克隆到过滤规则，而不用自己再写一份，这就能保证所有修改者应用的都是同一份规则。在工程根目录下建立**.gitignore<strong>文件，将要排除的文件或目录写到</strong>.gitignore**这个文件中，有两种写入方法：<br>① 使用命令行增加排除文件<br>例如排除以.class结尾的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span>  <span class="string">&quot;*.class&quot;</span> &gt; .gitignore</span><br></pre></td></tr></table></figure>
<p>例如排除bin目录下的所有文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;bin/*&quot;</span> &gt; .gitignore</span><br></pre></td></tr></table></figure>
<p><em><strong>注意</strong></em>，如果需要排除多级目录下的文件，比如bin&#x2F;classes&#x2F;A.class<br>那么**.gitignore<strong>中的内容应该写全路径，即</strong>bin&#x2F;classes&#x2F;A.class**</p>
<p>② 最方便的办法是，用记事本打开，增加需要排除的文件或目录，一行增加一个，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*.class</span><br><span class="line">*.apk</span><br><span class="line">bin/*</span><br><span class="line">.settings/*</span><br><span class="line">proguard/*</span><br></pre></td></tr></table></figure>
<h3 id="全局设置排除文件"><a href="#全局设置排除文件" class="headerlink" title="全局设置排除文件"></a>全局设置排除文件</h3><p>全局设置排除文件，这会在全局起作用，只要是Git管理的工程，在提交时都会自动排除不在控制范围内的文件或目录。这种方法对开发者来说，比较省事，只要一次全局配置，不用每次建立工程都要配置一遍过滤规则。但是这不保证其他的开发者在克隆你的代码后，他们那边的规则跟你的是一样的，这就带来了代码提交过程中的各种冲突问题。配置步骤如下：</p>
<p>① 同样需要建立一个.gitignore文件，把要排除的文件写进去。但在这里，我们不规定一定要把.gitnore文件放到某个工程下面，而是任何地方，比如我们这里放到了Git默认的Home路径下，在我的<br>__windows__上就是__C:\Users\yourusername__。使用命令方式可以配置全局排除文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.excludesfile ~/.gitignore</span><br></pre></td></tr></table></figure>
<p>你会发现在~&#x2F;.gitconfig文件中会出现excludesfile &#x3D; C:&#x2F;Users&#x2F;yourusername&#x2F;.gitignore。说明Git把文件过滤规则应用到了Global的规则中。</p>
<p>② 单个工程设置排除文件，在工程目录下找到.git&#x2F;info&#x2F;exclude，把要排除的文件写进去：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*.class</span><br><span class="line">*.apk</span><br><span class="line">bin/</span><br><span class="line">gen/</span><br></pre></td></tr></table></figure>
<p>这种方法就不提倡了，只能针对单一工程配置，而且还不能将过滤规则同步到其他开发者，优势不大。</p>
<h3 id="编写-gitignore规则文件的两种模式"><a href="#编写-gitignore规则文件的两种模式" class="headerlink" title="编写.gitignore规则文件的两种模式"></a>编写.gitignore规则文件的两种模式</h3><p>两种模式分别是开放模式和保守模式</p>
<p>① 开放模式负责设置过滤哪些文件和文件夹<br>过滤文件夹设置：<br><strong>&#x2F;mtk&#x2F;    表示过滤这个文件夹</strong><br>过滤文件设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*.zip</span><br><span class="line">*.rar</span><br><span class="line">*.err</span><br></pre></td></tr></table></figure>
<p>指定过滤某个文件：<br><strong>&#x2F;mtk&#x2F;do.doc</strong></p>
<p>② 保守模式负责设置哪些文件不被过滤，也就是哪些文件要跟踪<br>跟踪某个文件夹：<br><strong>!&#x2F;people&#x2F;master</strong><br>跟踪某类文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!*.c</span><br><span class="line">!*.h</span><br></pre></td></tr></table></figure>
<p>跟踪某个指定文件：<br><strong>!&#x2F;people&#x2F;master&#x2F;IT.h</strong><br>采用共享模式与保守模式结合配置的办法。eg：一个文件夹下有很多文件夹和文件，而我只想跟踪其中的一个文件，这样设置就可以满足这种情况，先用共享模式把整个目录 都设置为不跟踪，然后再用保守模式把这个文件夹中想要跟踪的文件设置为被跟踪，配置很简单，就可以跟踪想要跟踪的文件。</p>
<h3 id="gitignore文件失效问题"><a href="#gitignore文件失效问题" class="headerlink" title=".gitignore文件失效问题"></a>.gitignore文件失效问题</h3><p>比如在一个本地仓库中，产生了诸多的日志记录，而这些记录都是本地操作产生的，我们不必将其提交到远程仓库中，那么我们在***.gitignore<em><strong>中添加了</strong></em>logs&#x2F;20150514.log<em><strong>的过滤规则，但是在使用</strong></em>git status<em><strong>的时候，还是可以看到</strong></em>modified:logs&#x2F;20150514.log***，说明规则没有起作用。</p>
<p>为什么增加了***.gitignore<em><strong>里的规则却没有效果呢？<br>这是因为</strong></em>.gitignore<em><strong>文件只能作用于</strong></em>Untracked Files***，也就是那些从来没有被Git记录过的文件（自添加以后，从未add及commit过的文件）。</p>
<p>之所以规则不生效，是因为那些***.log<em><strong>文件曾经被Git记录过，因此</strong></em>.gitignore***对它们完全无效，解决办法如下：</p>
<ul>
<li>从Git的数据库中删除对于该文件的追踪；</li>
<li>把对应的规则写入.gitignore，让忽略真正生效；</li>
<li>提交+推送</li>
</ul>
<p>只有这样做，所有的团队成员才会保持一致而不会有后遗症，也只有这样做，其他的团队成员根本不需要做额外的工作来维持对一个文件的改变忽略。</p>
<p>最后有一点需要注意的，<em><strong>git rm –cached logs&#x2F;20150514.log</strong></em> 删除的是追踪状态，而不是物理文件；如果你真的是彻底不想要了，你也可以直接 rm＋忽略＋提交。</p>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://blog.csdn.net/hustpzb/article/details/8649545">http://blog.csdn.net/hustpzb/article/details/8649545</a><br>[2] <a target="_blank" rel="noopener" href="http://segmentfault.com/q/1010000000430426">http://segmentfault.com/q/1010000000430426</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Local-call-interface-of-LTP4J-project-for-LTML-encapsulation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Local-call-interface-of-LTP4J-project-for-LTML-encapsulation/" class="post-title-link" itemprop="url">封装LTP4J的本地LTML调用接口</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-05-13 16:53:00" itemprop="dateCreated datePublished" datetime="2015-05-13T16:53:00+00:00">2015-05-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:28" itemprop="dateModified" datetime="2024-01-26T12:42:28+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="LTP4J简介"><a href="#LTP4J简介" class="headerlink" title="LTP4J简介"></a>LTP4J简介</h3><p>LTP4J是对LTP的Java接口封装，众所周知LTP底层均是C++实现，所以对于需要Java接口的开发人员来说要通过调用LTP4J的接口实现调用LTP的目的，但是该项目仅仅封装了几个独立的方法，分别是<strong>NER&#x2F;Parser&#x2F;Postagger&#x2F;Segmentor&#x2F;SRL</strong>与之对应的实现功能是<strong>命名实体识别&#x2F;依存句法分析&#x2F;词性标注&#x2F;分词&#x2F;语义角色标注</strong>，LTP4J中封装的都是native方法，无法查看源代码。</p>
<h3 id="Java之native关键字"><a href="#Java之native关键字" class="headerlink" title="Java之native关键字"></a>Java之native关键字</h3><p>Java native Interface简称JNI，即Java本地接口，JNI是一个编程框架，可以使得运行在<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Java%E8%99%9A%E6%8B%9F%E6%9C%BA">Java虚拟机</a>上的Java程序调用与平台相关的其它语言实现的程序，比如C&#x2F;C++&#x2F;汇编等。</p>
<p>换言之，JNI允许用本地代码来解决纯粹用Java编程不能解决的平台相关的特性。对于Windows平台上的C++程序而言，在Java中将某个方法声明为native的，然后用C++程序实现该方法的具体功能，之后将C++程序编译为<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93">DLL</a>文件即可。在Java虚拟机执行到该native方法的时候，会由操作系统去寻找对应的DLL文件进而调用该方法的C++实现。</p>
<p>所以使用LTP4J的前提是需要编译LTP源码及LTP4J的源码，在Windows X64平台上编译LTP源码及LTP4J源码请参见：</p>
<p>+<br>[编译哈工大语言技术平台云LTP（C++）源码及LTP4J（Java）源码][id]<br>[id]: <a target="_blank" rel="noopener" href="http://codepub.cn/2015/05/07/Compile-the-Language-Technology-Platform(C++)-and-LTP4J(Java)source-code/">http://codepub.cn/2015/05/07/Compile-the-Language-Technology-Platform(C++)-and-LTP4J(Java)source-code/</a></p>
<p>在Windows平台上使用LTP4J需要处理BOM问题，解决办法请参见：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://codepub.cn/2015/05/12/Recommended-processing-method-of-text-with-bom-in-Java/">Java处理带BOM文本的推荐方法</a></li>
</ul>
<h3 id="LTML简介"><a href="#LTML简介" class="headerlink" title="LTML简介"></a>LTML简介</h3><p>有关LTML的详细信息参见<a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp/blob/master/doc/ltp-document-3.0.md">LTML数据表示</a><br>LTML 标准要求如下：结点标签分别为 xml4nlp, note, doc, para, sent, word, arg 共七种结点标签：</p>
<ol>
<li>xml4nlp 为根结点，无任何属性值；</li>
<li>note 为标记结点，具有的属性分别为：sent, word, pos, ne, parser, srl；分别代表分句，分词，词性标注，命名实体识别，依存句法分析，词义消歧，语义角色标注；值为”n”，表明未做，值为”y”则表示完成，如pos&#x3D;”y”，表示已经完成了词性标注；</li>
<li>doc 为篇章结点，以段落为单位包含文本内容；无任何属性值；</li>
<li>para 为段落结点，需含id 属性，其值从0 开始；</li>
<li>sent 为句子结点，需含属性为id，cont；id 为段落中句子序号，其值从0 开始；cont 为句子内容；</li>
<li>word 为分词结点，需含属性为id, cont；id 为句子中的词的序号，其值从0 开始，cont为分词内容；可选属性为 pos, ne, parent, relate；pos 的内容为词性标注内容；ne 为命名实体内容；parent 与relate 成对出现，parent 为依存句法分析的父亲结点id 号，relate 为相对应的关系；</li>
<li>arg 为语义角色信息结点，任何一个谓词都会带有若干个该结点；其属性为id, type, beg，end；id 为序号，从0 开始；type 代表角色名称；beg 为开始的词序号，end 为结束的序号；</li>
</ol>
<p>LTP的在线版提供LTML格式的返回数据(亦即XML格式)，地址在<a target="_blank" rel="noopener" href="http://www.ltp-cloud.com/demo/">这里</a>，但是本地版不提供，需要自己封装。</p>
<h3 id="封装本地版LTML的Java调用接口"><a href="#封装本地版LTML的Java调用接口" class="headerlink" title="封装本地版LTML的Java调用接口"></a>封装本地版LTML的Java调用接口</h3><p>对外提供了两个接口，其一是根据文件内容获取完整的LTML标注结果，文件编码默认UTF-8，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.ltp4j.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.shu.ltp4j.util.LTPUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGetFileLTML</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;test.txt&quot;</span>;</span><br><span class="line">        <span class="type">LTPUtil</span> <span class="variable">ltpUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LTPUtil</span>();</span><br><span class="line">        ltpUtil.setNe(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setParser(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setPos(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setSrl(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">ltml</span> <span class="operator">=</span> ltpUtil.getLTML(path);</span><br><span class="line">        System.out.println(ltml);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本地分析输出结果：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xml4nlp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">note</span> <span class="attr">ne</span>=<span class="string">&quot;y&quot;</span> <span class="attr">parser</span>=<span class="string">&quot;y&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;y&quot;</span> <span class="attr">sent</span>=<span class="string">&quot;y&quot;</span> <span class="attr">srl</span>=<span class="string">&quot;y&quot;</span> <span class="attr">word</span>=<span class="string">&quot;y&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">doc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">para</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sent</span> <span class="attr">cont</span>=<span class="string">&quot;我爱你中国！&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;我&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;r&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;SBV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;爱&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;HED&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;0&quot;</span> <span class="attr">end</span>=<span class="string">&quot;0&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A0&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;2&quot;</span> <span class="attr">end</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;你&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;r&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;中国&quot;</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;S-Ns&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;ns&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;！&quot;</span> <span class="attr">id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;wp&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;WP&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">sent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">para</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">para</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sent</span> <span class="attr">cont</span>=<span class="string">&quot;事件语料的建立对事件及其关系识别和推理有重要意义，因此针对该语料库的建立进行研究有一定的理论意义和应用价值。&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;事件&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;语料&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;建立&quot;</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;HED&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;4&quot;</span> <span class="attr">end</span>=<span class="string">&quot;13&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;对&quot;</span> <span class="attr">id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;11&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;p&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;事件&quot;</span> <span class="attr">id</span>=<span class="string">&quot;5&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;8&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;SBV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;及其&quot;</span> <span class="attr">id</span>=<span class="string">&quot;6&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;7&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;关系&quot;</span> <span class="attr">id</span>=<span class="string">&quot;7&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;5&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;识别&quot;</span> <span class="attr">id</span>=<span class="string">&quot;8&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;4&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;POB&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;5&quot;</span> <span class="attr">end</span>=<span class="string">&quot;7&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A0&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;和&quot;</span> <span class="attr">id</span>=<span class="string">&quot;9&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;10&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;推理&quot;</span> <span class="attr">id</span>=<span class="string">&quot;10&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;8&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;有&quot;</span> <span class="attr">id</span>=<span class="string">&quot;11&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;12&quot;</span> <span class="attr">end</span>=<span class="string">&quot;13&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;重要&quot;</span> <span class="attr">id</span>=<span class="string">&quot;12&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;13&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;a&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;意义&quot;</span> <span class="attr">id</span>=<span class="string">&quot;13&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;11&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;，&quot;</span> <span class="attr">id</span>=<span class="string">&quot;14&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;wp&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;WP&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;因此&quot;</span> <span class="attr">id</span>=<span class="string">&quot;15&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;针对&quot;</span> <span class="attr">id</span>=<span class="string">&quot;16&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;p&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;该&quot;</span> <span class="attr">id</span>=<span class="string">&quot;17&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;18&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;r&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;语料库&quot;</span> <span class="attr">id</span>=<span class="string">&quot;18&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;16&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;POB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;19&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;16&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;建立&quot;</span> <span class="attr">id</span>=<span class="string">&quot;20&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;15&quot;</span> <span class="attr">end</span>=<span class="string">&quot;15&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;DIS&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;21&quot;</span> <span class="attr">end</span>=<span class="string">&quot;30&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;进行&quot;</span> <span class="attr">id</span>=<span class="string">&quot;21&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;30&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;22&quot;</span> <span class="attr">end</span>=<span class="string">&quot;29&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;研究&quot;</span> <span class="attr">id</span>=<span class="string">&quot;22&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;21&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;有&quot;</span> <span class="attr">id</span>=<span class="string">&quot;23&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;22&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;24&quot;</span> <span class="attr">end</span>=<span class="string">&quot;27&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;一定&quot;</span> <span class="attr">id</span>=<span class="string">&quot;24&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;27&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;b&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;25&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;24&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;理论&quot;</span> <span class="attr">id</span>=<span class="string">&quot;26&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;27&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;意义&quot;</span> <span class="attr">id</span>=<span class="string">&quot;27&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;23&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;和&quot;</span> <span class="attr">id</span>=<span class="string">&quot;28&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;29&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;应用&quot;</span> <span class="attr">id</span>=<span class="string">&quot;29&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;23&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;价值&quot;</span> <span class="attr">id</span>=<span class="string">&quot;30&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;。&quot;</span> <span class="attr">id</span>=<span class="string">&quot;31&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;wp&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;WP&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">sent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">para</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">doc</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xml4nlp</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其二根据一个完整的句子获取到完整的LTML标注结果，完整的句子意思是使用“。|？|！|；”进行切分的结果，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.ltp4j.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.shu.ltp4j.util.LTPUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGetSentectLTML</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSentence</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">LTPUtil</span> <span class="variable">ltpUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LTPUtil</span>();</span><br><span class="line">        ltpUtil.setNe(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setParser(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setPos(<span class="literal">true</span>);</span><br><span class="line">        ltpUtil.setSrl(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;事件语料的建立对事件及其关系识别和推理有重要意义，因此针对该语料库的建立进行研究有一定的理论意义和应用价值。&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ltmlBySentence</span> <span class="operator">=</span> ltpUtil.getLTMLBySentence(s);</span><br><span class="line">        System.out.println(ltmlBySentence);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本地分析输出结果：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xml4nlp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">note</span> <span class="attr">ne</span>=<span class="string">&quot;y&quot;</span> <span class="attr">parser</span>=<span class="string">&quot;y&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;y&quot;</span> <span class="attr">sent</span>=<span class="string">&quot;y&quot;</span> <span class="attr">srl</span>=<span class="string">&quot;y&quot;</span> <span class="attr">word</span>=<span class="string">&quot;y&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">doc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">para</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sent</span> <span class="attr">cont</span>=<span class="string">&quot;事件语料的建立对事件及其关系识别和推理有重要意义，因此针对该语料库的建立进行研究有一定的理论意义和应用价值。&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;事件&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;语料&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;建立&quot;</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;HED&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;4&quot;</span> <span class="attr">end</span>=<span class="string">&quot;13&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;对&quot;</span> <span class="attr">id</span>=<span class="string">&quot;4&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;11&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;p&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;事件&quot;</span> <span class="attr">id</span>=<span class="string">&quot;5&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;8&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;SBV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;及其&quot;</span> <span class="attr">id</span>=<span class="string">&quot;6&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;7&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;关系&quot;</span> <span class="attr">id</span>=<span class="string">&quot;7&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;5&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;识别&quot;</span> <span class="attr">id</span>=<span class="string">&quot;8&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;4&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;POB&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;5&quot;</span> <span class="attr">end</span>=<span class="string">&quot;7&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A0&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;和&quot;</span> <span class="attr">id</span>=<span class="string">&quot;9&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;10&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;推理&quot;</span> <span class="attr">id</span>=<span class="string">&quot;10&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;8&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;有&quot;</span> <span class="attr">id</span>=<span class="string">&quot;11&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;12&quot;</span> <span class="attr">end</span>=<span class="string">&quot;13&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;重要&quot;</span> <span class="attr">id</span>=<span class="string">&quot;12&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;13&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;a&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;意义&quot;</span> <span class="attr">id</span>=<span class="string">&quot;13&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;11&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;，&quot;</span> <span class="attr">id</span>=<span class="string">&quot;14&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;wp&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;WP&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;因此&quot;</span> <span class="attr">id</span>=<span class="string">&quot;15&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;针对&quot;</span> <span class="attr">id</span>=<span class="string">&quot;16&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;p&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ADV&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;该&quot;</span> <span class="attr">id</span>=<span class="string">&quot;17&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;18&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;r&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;语料库&quot;</span> <span class="attr">id</span>=<span class="string">&quot;18&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;16&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;POB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;19&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;16&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;建立&quot;</span> <span class="attr">id</span>=<span class="string">&quot;20&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;15&quot;</span> <span class="attr">end</span>=<span class="string">&quot;15&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;DIS&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;21&quot;</span> <span class="attr">end</span>=<span class="string">&quot;30&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;进行&quot;</span> <span class="attr">id</span>=<span class="string">&quot;21&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;30&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;22&quot;</span> <span class="attr">end</span>=<span class="string">&quot;29&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;研究&quot;</span> <span class="attr">id</span>=<span class="string">&quot;22&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;21&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;有&quot;</span> <span class="attr">id</span>=<span class="string">&quot;23&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;22&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">beg</span>=<span class="string">&quot;24&quot;</span> <span class="attr">end</span>=<span class="string">&quot;27&quot;</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;A1&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">word</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;一定&quot;</span> <span class="attr">id</span>=<span class="string">&quot;24&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;27&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;b&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;的&quot;</span> <span class="attr">id</span>=<span class="string">&quot;25&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;24&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;u&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;RAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;理论&quot;</span> <span class="attr">id</span>=<span class="string">&quot;26&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;27&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;ATT&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;意义&quot;</span> <span class="attr">id</span>=<span class="string">&quot;27&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;23&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;和&quot;</span> <span class="attr">id</span>=<span class="string">&quot;28&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;29&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;c&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;LAD&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;应用&quot;</span> <span class="attr">id</span>=<span class="string">&quot;29&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;23&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;v&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;COO&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;价值&quot;</span> <span class="attr">id</span>=<span class="string">&quot;30&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;n&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;VOB&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">word</span> <span class="attr">cont</span>=<span class="string">&quot;。&quot;</span> <span class="attr">id</span>=<span class="string">&quot;31&quot;</span> <span class="attr">ne</span>=<span class="string">&quot;O&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;3&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;wp&quot;</span> <span class="attr">relate</span>=<span class="string">&quot;WP&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">sent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">para</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">doc</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xml4nlp</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>整个项目的源代码已经上传到Github仓库，欢迎<a target="_blank" rel="noopener" href="https://github.com/shijiebei2009/BuildLTMLForLTP">下载使用</a>！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Recommended-processing-method-of-text-with-bom-in-Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Recommended-processing-method-of-text-with-bom-in-Java/" class="post-title-link" itemprop="url">Java处理带BOM文本的推荐方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-05-12 20:49:39" itemprop="dateCreated datePublished" datetime="2015-05-12T20:49:39+00:00">2015-05-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:21" itemprop="dateModified" datetime="2024-01-26T12:42:21+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="什么是BOM？"><a href="#什么是BOM？" class="headerlink" title="什么是BOM？"></a>什么是BOM？</h3><p>参见<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/zh-cn/%E4%BD%8D%E5%85%83%E7%B5%84%E9%A0%86%E5%BA%8F%E8%A8%98%E8%99%9F">维基百科</a>，通过阅读维基百科，简单点说BOM（byte-order mark）是位于码点U+FEFF的统一码字符的名称，当以<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/UTF-16">UTF-16</a>或<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/UTF-32">UTF-32</a>来将<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/%E9%80%9A%E7%94%A8%E5%AD%97%E7%AC%A6%E9%9B%86">UCS</a>&#x2F;统一码字符所组成的字符串编码时，这个字符被用来标示其字节序。它常被用来当做标示文件是以UTF-8、UTF-16或UTF-32编码的记号。</p>
<p>从Unicode3.2开始，U+FEFF只能出现在字节流的开头，只能用于标识字节序，就如它的名称——字节序标记——所表示的一样；除此以外的用法已被舍弃。</p>
<p>在类Unix系统中，它们都聪明的舍弃了BOM标记，而在牛叉哄哄却最不适合程序员的Windows中，BOM被光荣的保留了，并且Windows上的记事本程序会自动在文本中添加字节顺序标记（BOM）到UTF-8文件中。这个保留的BOM标记会使得我们在处理文本过程中遇到诸多问题。在你不知情的情况下，处理起来比较麻烦，因为BOM是不可见的。只有使用带16进制功能的编辑器才可见。Java对文本的通用操作中是无法识别BOM的，所以需要借助其它办法解决。</p>
<h3 id="带BOM文本的解决办法——法一"><a href="#带BOM文本的解决办法——法一" class="headerlink" title="带BOM文本的解决办法——法一"></a>带BOM文本的解决办法——法一</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName TestBom</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 先按照UTF-8编码读取文本，之后跳过前三个字符，重新构建一个新的字符串，需要Apache commons IO包</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年5月12日 下午8:08:32</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBom</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// test.txt是带BOM编码的UTF-8编码</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> FileUtils.readFileToString(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:/Users/TKPad/Desktop/test.txt&quot;</span>));</span><br><span class="line">            <span class="type">byte</span>[] bytes = content.getBytes();</span><br><span class="line">            System.out.println(content);</span><br><span class="line">            System.out.println(<span class="string">&quot;有BOM字节大小-&gt;&quot;</span> + bytes.length);</span><br><span class="line">            System.out.println(<span class="string">&quot;有BOM字符串大小-&gt;&quot;</span> + content.length());</span><br><span class="line">            <span class="type">String</span> <span class="variable">contentNoBom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">3</span>, bytes.length - <span class="number">3</span>);</span><br><span class="line">            System.out.println(contentNoBom);</span><br><span class="line">            System.out.println(<span class="string">&quot;无BOM字节大小-&gt;&quot;</span> + contentNoBom.getBytes().length);</span><br><span class="line">            System.out.println(<span class="string">&quot;无BOM字符串大小-&gt;&quot;</span> + contentNoBom.length());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<blockquote>
<p>事件语料的建立对事件及其关系识别和推理有重要意义，因此针对该语料库的建立进行研究有一定的理论意义和应用价值。<br>有BOM字节大小-&gt;165<br>有BOM字符串大小-&gt;55<br>事件语料的建立对事件及其关系识别和推理有重要意义，因此针对该语料库的建立进行研究有一定的理论意义和应用价值。<br>无BOM字节大小-&gt;162<br>无BOM字符串大小-&gt;54</p>
</blockquote>
<h3 id="带BOM文本的解决办法——法二"><a href="#带BOM文本的解决办法——法二" class="headerlink" title="带BOM文本的解决办法——法二"></a>带BOM文本的解决办法——法二</h3><p>使用牛人封装的<strong>UnicodeReader</strong>和<strong>UnicodeInputStream</strong>，地址在<a target="_blank" rel="noopener" href="http://koti.mbnet.fi/akini/java/unicodereader/">这里</a>，该类可以识别带BOM标记的文本，同样可以向空文件中写入BOM标记。参见以下Demo</p>
<p>Example code using UnicodeReader class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">char</span>[] loadFile(String file) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">     <span class="comment">// read text file, auto recognize bom marker or use </span></span><br><span class="line">     <span class="comment">// system default if markers not found.</span></span><br><span class="line">     <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="type">CharArrayWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="type">UnicodeReader</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UnicodeReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file), <span class="literal">null</span>);</span><br><span class="line">       </span><br><span class="line">     <span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">16</span> * <span class="number">1024</span>];   <span class="comment">// 16k buffer</span></span><br><span class="line">     <span class="type">int</span> read;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">        reader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(r);</span><br><span class="line">        writer = <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        <span class="keyword">while</span>( (read = reader.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">           writer.write(buffer, <span class="number">0</span>, read);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.flush();</span><br><span class="line">        <span class="keyword">return</span> writer.toCharArray();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> ex;</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           writer.close(); reader.close(); r.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123; &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>Example code to write UTF-8 with bom marker</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveFile</span><span class="params">(String file, String data, <span class="type">boolean</span> append)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">     <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       </span><br><span class="line">     <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(file);</span><br><span class="line">     <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(f, append);</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// write UTF8 BOM mark if file is empty</span></span><br><span class="line">        <span class="keyword">if</span> (f.length() &lt; <span class="number">1</span>) &#123;</span><br><span class="line">           <span class="keyword">final</span> <span class="type">byte</span>[] bom = <span class="keyword">new</span> <span class="title class_">byte</span>[] &#123; (<span class="type">byte</span>)<span class="number">0xEF</span>, (<span class="type">byte</span>)<span class="number">0xBB</span>, (<span class="type">byte</span>)<span class="number">0xBF</span> &#125;;</span><br><span class="line">           fos.write(bom);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        osw = <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(fos, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        bw = <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(osw);</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="literal">null</span>) bw.write(data);</span><br><span class="line">     &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> ex;</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123; bw.close(); fos.close(); &#125; <span class="keyword">catch</span> (Exception ex) &#123; &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="带BOM文本的解决办法——法三"><a href="#带BOM文本的解决办法——法三" class="headerlink" title="带BOM文本的解决办法——法三"></a>带BOM文本的解决办法——法三</h3><p>使用Apache Commons IO包中的工具类，API参见<a target="_blank" rel="noopener" href="http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/BOMInputStream.html">这里</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.ByteOrderMark;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.input.BOMInputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName TestBom</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 先按照UTF-8编码读取文本，之后跳过前三个字符，重新构建一个新的字符串</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年5月12日 下午8:08:32</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBom</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// test.txt是带BOM编码的UTF-8编码</span></span><br><span class="line">        BOMInputStream bomWithOut;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 默认排除掉BOM，但是使用hasBOM方法仍然可以检测到BOM的存在</span></span><br><span class="line">            bomWithOut = <span class="keyword">new</span> <span class="title class_">BOMInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:/Users/TKPad/Desktop/test.txt&quot;</span>)));</span><br><span class="line">            <span class="keyword">if</span> (bomWithOut.hasBOM()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;当前流中包含BOM！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> ((length = bomWithOut.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                res += <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, length);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;无BOM读取：&quot;</span> + res.getBytes().length);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 当然你也可以包含BOM读取</span></span><br><span class="line">        BOMInputStream bomWithIn;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bomWithIn = <span class="keyword">new</span> <span class="title class_">BOMInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:/Users/TKPad/Desktop/test.txt&quot;</span>)), <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">if</span> (bomWithIn.hasBOM()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;当前流中包含BOM！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> ((length = bomWithIn.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                res += <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, length);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;有BOM读取：&quot;</span> + res.getBytes().length);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 注意，此处要注释掉哦！！</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 也可以指定检测多种编码的bom，但目前仅支持UTF-8/UTF-16LE/UTF-16BE三种，对于UTF32之类不支持。</span></span><br><span class="line">            <span class="type">BOMInputStream</span> <span class="variable">bomIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BOMInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;&quot;</span>)), ByteOrderMark.UTF_16LE,</span><br><span class="line">                    ByteOrderMark.UTF_16BE);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>当前流中包含BOM！<br>无BOM读取：166<br>当前流中包含BOM！<br>有BOM读取：169</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Compile-the-Language-Technology-Platform(C++)-and-LTP4J(Java)source-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Compile-the-Language-Technology-Platform(C++)-and-LTP4J(Java)source-code/" class="post-title-link" itemprop="url">编译哈工大语言技术平台云LTP（C++）源码及LTP4J（Java）源码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-05-07 22:13:15" itemprop="dateCreated datePublished" datetime="2015-05-07T22:13:15+00:00">2015-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:19" itemprop="dateModified" datetime="2024-01-26T12:42:19+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>JDK：java version “1.8.0_31”<br>Java(TM) SE Runtime Environment (build 1.8.0_31-b13)<br>Java HotSpot(TM) 64-Bit Server VM (build 25.31-b07, mixed mode)<br>OS：win7 64bit<br>cmake：V2.8.12&#x2F;V3.2.2<br>LTP：V3.2.0<br>LTP4J：V1.0<br>Microsoft VS C++：V2010</p>
<h3 id="编译LTP4J-jar"><a href="#编译LTP4J-jar" class="headerlink" title="编译LTP4J.jar"></a>编译LTP4J.jar</h3><h4 id="下载Ant"><a href="#下载Ant" class="headerlink" title="下载Ant"></a>下载Ant</h4><p>ltp4j的源码使用ant进行编译，首先需要下载ant，<a target="_blank" rel="noopener" href="http://ant.apache.org/bindownload.cgi">点我下载</a></p>
<h4 id="配置Ant环境变量"><a href="#配置Ant环境变量" class="headerlink" title="配置Ant环境变量"></a>配置Ant环境变量</h4><p>我的电脑–&gt;属性–&gt;高级系统设置–&gt;环境变量<br>新建ANT_HOME值为：“D:\apache-ant-1.9.4”<br>编辑PATH，在PATH变量值的末尾添加：“;%ANT_HOME%\bin”<br>验证是否配置成功，打开cmd，输入ant：</p>
<blockquote>
<p>C:\Users\TKPad&gt;ant<br>Buildfile: build.xml does not exist!<br>Build failed</p>
</blockquote>
<p>这样的话，说明配置成功，因为ant默认运行build.xml文件，该文件需要手动创建。</p>
<h4 id="编译LTP4J"><a href="#编译LTP4J" class="headerlink" title="编译LTP4J"></a>编译LTP4J</h4><p>首先需要<a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp4j">下载ltp4j源代码</a>，下载完成之后，解压，比如我的地址为：D:\ltp4j-master（推荐重命名为ltp4j），打开cmd，进入d盘ltp4j项目根目录下，运行ant命令，得到：</p>
<blockquote>
<p>D:\ltp4j&gt;ant<br>Buildfile: D:\ltp4j\build.xml<br>clean:<br>  [delete] Deleting directory D:\ltp4j\output<br>compile:<br>    [mkdir] Created dir: D:\ltp4j\output\classes<br>    [javac] D:\ltp4j\build.xml:17: warning: ‘includeantruntime’ was not set, def<br>aulting to build.sysclasspath&#x3D;last; set to false for repeatable builds<br>    [javac] Compiling 7 source files to D:\ltp4j\output\classes<br>jar:<br>    [mkdir] Created dir: D:\ltp4j\output\jar<br>      [jar] Building jar: D:\ltp4j\output\jar\ltp4j.jar<br>main:<br>BUILD SUCCESSFUL<br>Total time: 4 seconds</p>
</blockquote>
<p>说明编译成功！查看目录：D:\ltp4j\output\jar，发现存在ltp4j.jar文件，这时该Jar包就可以使用了。</p>
<h3 id="编译C-代理程序"><a href="#编译C-代理程序" class="headerlink" title="编译C++代理程序"></a>编译C++代理程序</h3><h4 id="安装CMake"><a href="#安装CMake" class="headerlink" title="安装CMake"></a>安装CMake</h4><p>ltp4j使用的C++代理程序使用编译工具CMake构建项目。 在编译代理程序之前，你需要首先安装CMake。 CMake的网站在<a target="_blank" rel="noopener" href="http://www.cmake.org/">这里</a>。如果你是Windows用户，请下载CMake的二进制安装包；如果你是Linux，Mac OS或Cygwin的用户，可以通过编译源码的方式安装CMake，当然，你也可以使用Linux的软件源来安装。</p>
<p>下载地址点<a target="_blank" rel="noopener" href="http://www.cmake.org/download/">这里</a>，我选择的是Windows ZIP    cmake-3.2.2-win32-x86.zip</p>
<h4 id="下载LTP的C-源码"><a href="#下载LTP的C-源码" class="headerlink" title="下载LTP的C++源码"></a>下载LTP的C++源码</h4><p><a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp">下载地址</a>，下载完成之后解压，我的存放路径为：D:\ltp-master（推荐重命名为ltp）。</p>
<h4 id="配置LTP的安装路径"><a href="#配置LTP的安装路径" class="headerlink" title="配置LTP的安装路径"></a>配置LTP的安装路径</h4><p>修改D:\ltp4j目录下的CMakeLists.txt文件，修改如下部分的斜体加粗部分为你自己的LTP源码路径</p>
<blockquote>
<p>find_package(JNI)<br><em><strong>set (LTP_HOME “D:&#x2F;ltp” CACHE STRING “Use to specified ltp path”)</strong></em><br>set (LIBRARY_OUTPUT_PATH    ${PROJECT_SOURCE_DIR}&#x2F;libs)<br>set (JNI_SOURCE_DIR        ${PROJECT_SOURCE_DIR}&#x2F;jni)</p>
</blockquote>
<h4 id="构建VC-Project"><a href="#构建VC-Project" class="headerlink" title="构建VC Project"></a>构建VC Project</h4><p>在项目文件夹下新建一个名为build的文件夹，使用CMake Gui，在source code中填入项目文件夹，在binaries中填入build文件夹。然后Configure –&gt; Generate。</p>
<p>在点击configure之后出现如下错误：</p>
<blockquote>
<p>The C compiler identification is unknown The CXX compiler identification is unknown<br>CMake Error at CMakeLists.txt:2 (project): No CMAKE_C_COMPILER could be found.<br>CMake Error at CMakeLists.txt:2 (project): No CMAKE_CXX_COMPILER could be found.Configuring incomplete, errors occurred!<br>See also “D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeOutput.log”.<br>See also “D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeError.log”.</p>
</blockquote>
<p>那么可能是你的电脑上还没有C++编译环境，需要安装Microsoft Visual Studio C++，VS 2010 express版下载地址为：<a href="thunder://QUFodHRwOi8vZG93bmxvYWQubWljcm9zb2Z0LmNvbS9kb3dubG9hZC81L0MvMS81QzE1NjkyMi1DQTEwLTQ5RDgtQjdFNy05QkYwOTJDM0I2RUIvVlMyMDEwRXhwcmVzc0NIUy5pc29aWg==/">点我下载VS2010</a></p>
<p>安装完成之后，再次编译，如果出现：</p>
<blockquote>
<p>The C compiler “C:&#x2F;Program Files (x86)&#x2F;Microsoft Visual Studio 10.0&#x2F;VC&#x2F;bin&#x2F;cl.exe” is not able to compile a simple test program.</p>
</blockquote>
<p>那么参考<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/14590947/cmake-configuring-fails-cl-exe-is-not-able-to-compile-a-simple-test-program">文章</a>里面的解决办法，说简单点就是以管理员权限运行c1.exe<br>解决办法如下：</p>
<ol>
<li>Right-Click-&gt;Properties on cl.exe in your VS install directory (the exact path appears in the CMake error);</li>
<li>Choose the Compatibility Tab;</li>
<li>Check “Run this program as administrator” in the “Privilege Level” box.</li>
</ol>
<p>之后再次尝试编译，出现如下错误：</p>
<blockquote>
<p>CMake Error at CMakeLists.txt:2 (project):<br>  Cannot enable 64-bit tools with Visual Studio 2010 Express.<br>  Install the Microsoft Windows SDK v7.1 to get 64-bit tools:<br>    <a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/windows/bb980924.aspx">http://msdn.microsoft.com/en-us/windows/bb980924.aspx</a><br>Configuring incomplete, errors occurred!</p>
</blockquote>
<p>主要是因为32位版本不兼容造成的，<a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/windows/bb980924.aspx">打开地址</a>，点击download下载Microsoft Windows SDK for Windows 7 and .NET Framework 4，下载完成之后运行即是在线安装的形式。如果以cmd命令行的形式运行cmake，需要将cmake的bin目录路径加入到操作系统的path变量中。</p>
<p>在configure阶段，再次出错</p>
<blockquote>
<p>The C compiler identification is MSVC 16.0.30319.1<br>The CXX compiler identification is MSVC 16.0.30319.1<br>Check for working C compiler using: Visual Studio 10<br>Check for working C compiler using: Visual Studio 10 – broken<br>CMake Error at D:&#x2F;cmake-2.8.12.1-win32-x86&#x2F;share&#x2F;cmake-2.8&#x2F;Modules&#x2F;CMakeTestCCompiler.cmake:61 (message):<br>  The C compiler “C:&#x2F;Program Files (x86)&#x2F;Microsoft Visual Studio<br>  10.0&#x2F;VC&#x2F;bin&#x2F;cl.exe” is not able to compile a simple test program.<br>  It fails with the following output:<br>  Change Dir: D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeTmp<br>  Run Build Command:C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe<br>  cmTryCompileExec1255268599.vcxproj &#x2F;p:Configuration&#x3D;Debug<br>  &#x2F;p:VisualStudioVersion&#x3D;10.0<br>  Microsoft(R) 生成引擎版本 4.0.30319.17929<br>  [Microsoft .NET Framework 版本 4.0.30319.18063]<br>  版权所有(C) Microsoft Corporation 2007。保留所有权利。<br>  生成启动时间为 2015&#x2F;5&#x2F;6 9:46:05。<br>  节点 1<br>  上的项目“D:\ltp4j\build\CMakeFiles\CMakeTmp\cmTryCompileExec1255268599.vcxproj”(默认目标)。<br>  PrepareForBuild:<br>    正在创建目录“cmTryCompileExec1255268599.dir\Debug\”。<br>    正在创建目录“D:\ltp4j\build\CMakeFiles\CMakeTmp\Debug\”。<br>  InitializeBuildStatus: 正在创建“cmTryCompileExec1255268599.dir\Debug\cmTryCompileExec1255268599.unsuccessfulbuild”，因为已指定“AlwaysCreate”。<br>  ClCompile:<br>    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe &#x2F;c &#x2F;Zi &#x2F;W3 &#x2F;WX- &#x2F;Od &#x2F;Ob0 &#x2F;Oy- &#x2F;D WIN32 &#x2F;D _WINDOWS &#x2F;D _DEBUG &#x2F;D “CMAKE_INTDIR&#x3D;&quot;Debug&quot;“ &#x2F;D _MBCS &#x2F;Gm- &#x2F;RTC1 &#x2F;MDd &#x2F;GS &#x2F;fp:precise &#x2F;Zc:wchar_t &#x2F;Zc:forScope &#x2F;Fo”cmTryCompileExec1255268599.dir\Debug\“ &#x2F;Fd”cmTryCompileExec1255268599.dir\Debug\vc100.pdb” &#x2F;Gd &#x2F;TC &#x2F;analyze- &#x2F;errorReport:queue testCCompiler.c<br>    用于 80x86 的 Microsoft (R) 32 位 C&#x2F;C++ 优化编译器 16.00.30319.01 版<br>    版权所有(C) Microsoft Corporation。保留所有权利。<br>    cl &#x2F;c &#x2F;Zi &#x2F;W3 &#x2F;WX- &#x2F;Od &#x2F;Ob0 &#x2F;Oy- &#x2F;D WIN32 &#x2F;D _WINDOWS &#x2F;D _DEBUG &#x2F;D “CMAKE_INTDIR&#x3D;&quot;Debug&quot;“ &#x2F;D _MBCS &#x2F;Gm- &#x2F;RTC1 &#x2F;MDd &#x2F;GS &#x2F;fp:precise &#x2F;Zc:wchar_t &#x2F;Zc:forScope &#x2F;Fo”cmTryCompileExec1255268599.dir\Debug\“ &#x2F;Fd”cmTryCompileExec1255268599.dir\Debug\vc100.pdb” &#x2F;Gd &#x2F;TC &#x2F;analyze- &#x2F;errorReport:queue testCCompiler.c<br>    testCCompiler.c<br>  ManifestResourceCompile:<br>    C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\rc.exe &#x2F;nologo &#x2F;fo”cmTryCompileExec1255268599.dir\Debug\cmTryCompileExec1255268599.exe.embed.manifest.res” cmTryCompileExec1255268599.dir\Debug\cmTryCompileExec1255268599_manifest.rc<br>  Link:<br>    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\link.exe &#x2F;ERRORREPORT:QUEUE &#x2F;OUT:”D:\ltp4j\build\CMakeFiles\CMakeTmp\Debug\cmTryCompileExec1255268599.exe” &#x2F;INCREMENTAL &#x2F;NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib &#x2F;MANIFEST &#x2F;ManifestFile:”cmTryCompileExec1255268599.dir\Debug\cmTryCompileExec1255268599.exe.intermediate.manifest” &#x2F;MANIFESTUAC:”level&#x3D;’asInvoker’ uiAccess&#x3D;’false’” &#x2F;DEBUG &#x2F;PDB:”D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeTmp&#x2F;Debug&#x2F;cmTryCompileExec1255268599.pdb” &#x2F;SUBSYSTEM:CONSOLE &#x2F;TLBID:1 &#x2F;DYNAMICBASE &#x2F;NXCOMPAT &#x2F;IMPLIB:”D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeTmp&#x2F;Debug&#x2F;cmTryCompileExec1255268599.lib” &#x2F;MACHINE:X86 cmTryCompileExec1255268599.dir\Debug\cmTryCompileExec1255268599.exe.embed.manifest.res<br>    cmTryCompileExec1255268599.dir\Debug\testCCompiler.obj  &#x2F;machine:X86 &#x2F;debug<br>  LINK : fatal error LNK1123: 转换到 COFF 期间失败: 文件无效或损坏<br>  [D:\ltp4j\build\CMakeFiles\CMakeTmp\cmTryCompileExec1255268599.vcxproj]<br>  已完成生成项目“D:\ltp4j\build\CMakeFiles\CMakeTmp\cmTryCompileExec1255268599.vcxproj”(默认目标)的操作<br>  失败。<br>  生成失败。<br>  “D:\ltp4j\build\CMakeFiles\CMakeTmp\cmTryCompileExec1255268599.vcxproj”(默认目标)<br>  (1) -&gt;<br>  (Link 目标) -&gt;<br>    LINK : fatal error LNK1123: 转换到 COFF 期间失败: 文件无效或损坏 [D:\ltp4j\build\CMakeFiles\CMakeTmp\cmTryCompileExec1255268599.vcxproj]<br>      0 个警告<br>      1 个错误<br>  已用时间 00:00:00.81<br>  CMake will not be able to correctly generate this project.<br>Call Stack (most recent call first):<br>  CMakeLists.txt:2 (project)<br>Configuring incomplete, errors occurred!<br>See also “D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeOutput.log”.<br>See also “D:&#x2F;ltp4j&#x2F;build&#x2F;CMakeFiles&#x2F;CMakeError.log”.</p>
</blockquote>
<p>该问题可能是由于.NET Framework 4.5导致，解决办法是：</p>
<p><em>CMake doesn’t seem to work if .net 4.5 is installed.  If you run into this issue you have to uninstall .net 4.5.  Uninstalling .net 4.5 seems to break Visual Studio so then you have to re-install VS2010.</em></p>
<p>简单点说就是，卸载.net 4.5，安装.net 4.0（如果电脑已经安装，就不必装了），在卸载.net 4.5会破坏VS2010，所以需要重新再安装一遍VS2010。<a target="_blank" rel="noopener" href="http://www.pcl-users.org/CMake-configuration-error-using-Windows-7-td4028623.html">参考文章1</a>、<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/14590947/cmake-configuring-fails-cl-exe-is-not-able-to-compile-a-simple-test-program">参考文章2</a>；安装完毕之后，重新以管理员身份的权限运行cmake-gui.exe，点击configure之后，会弹出对话框，如果是VC++2010的话，建议选择Visual Studio 10，如下图：<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/cmake_configure_ltp4j_x64.png" alt="cmake-configure"><br>点击finish-&gt;configure，此时进度条开始变为绿色滚动。</p>
<blockquote>
<p>The C compiler identification is MSVC 16.0.30319.1<br>The CXX compiler identification is MSVC 16.0.30319.1<br>Check for working C compiler using: Visual Studio 10<br>Check for working C compiler using: Visual Studio 10 – works<br>Detecting C compiler ABI info<br>Detecting C compiler ABI info - done<br>Check for working CXX compiler using: Visual Studio 10<br>Check for working CXX compiler using: Visual Studio 10 – works<br>Detecting CXX compiler ABI info<br>Detecting CXX compiler ABI info - done<br>Found JNI: D:&#x2F;Program Files&#x2F;Java&#x2F;jdk1.8.0_31&#x2F;lib&#x2F;jawt.lib<br>Configuring done</p>
</blockquote>
<p>configure结束之后点击generate。<br>如果您依然没有运行成功，那么建议使用cmake3.x之前的版本，原因是：</p>
<blockquote>
<p>Visual Studio 11 Win64 is the wrong generator for Visual Studio 2013. You need to use Visual Studio 12 2013 Win64 if you are using cmake-3.x or Visual Studio 12 Win64 for cmake-2.8.x.</p>
</blockquote>
<p>cmake3.x之前的版本下载地址：<a target="_blank" rel="noopener" href="http://www.cmake.org/files/v2.8/">http://www.cmake.org/files/v2.8/</a></p>
<h3 id="编译源码"><a href="#编译源码" class="headerlink" title="编译源码"></a>编译源码</h3><p>构建后得到ALL_BUILD、RUN_TESTS、ZERO_CHECK三个VC Project。使用VS打开ALL_BUILD项目，选择Release(*)方式构建项目。</p>
<p>(注<em>：boost::multi_array与VS2010不兼容的bug已经在3.1.0中得到修复，3.1.x及以上版本已经可以使用Debug方式构建，但出于效率考虑，仍旧建议使用Release方式构建。</em>)</p>
<p><em><strong>注意事项</strong></em></p>
<ul>
<li>该处编译需要设置Java环境变量JAVA_HOME。</li>
<li>需要保持c++编译器与JDK同是32位或者64位，否则JVM不能加载生成的动态库</li>
</ul>
<p>编译源码出现</p>
<blockquote>
<p>LINK : fatal error LNK1104: cannot open file ‘kernel32.lib’</p>
</blockquote>
<p>原因是</p>
<blockquote>
<p>Check the VC++ directories, in VS 2010 these can be found in your project properties. Check whether “$(WindowsSdkDir)\lib” is included in the directories list, if not, manually add it. If you’re building for X64 platform, you should select X64 from the “Platform” ComboBox, and make sure that “$(WindowsSdkDir)\lib\x64” is included in the directories list.</p>
</blockquote>
<p>如果X64目录不包含在库目录中，需要手动添加到库目录中。如下图所示<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/add_x64_library_directory.png" alt="添加x64库"></p>
<h4 id="编译LTP"><a href="#编译LTP" class="headerlink" title="编译LTP"></a>编译LTP</h4><p>再次编译LTP4J出现如下错误：</p>
<blockquote>
<p>LINK : fatal error LNK1181: cannot open input file ‘postagger.lib’<br>LINK : fatal error LNK1181: cannot open input file ‘ner.lib’</p>
</blockquote>
<p>这是因为在编译LTP4J之前需要编译LTP，使用cmake构建LTP，如下图<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/cmake_configure_ltp_x64.png" alt="LTP-x64"><br>之后在LTP的build目录下会生成VS Project，用VS打开D:\ltp\build\ALL_BUILD.vcxproj，使用Release X64方式进行编译，如果顺利的话，编译结果见下图<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/ltp_success.png" alt="ltp编译成功"></p>
<h4 id="再次编译LTP4J"><a href="#再次编译LTP4J" class="headerlink" title="再次编译LTP4J"></a>再次编译LTP4J</h4><p>在LTP编译成功之后，将D:\ltp\lib\Release下的所有文件拷贝到D:\ltp4j\build目录下，然后在VS中打开D:\ltp4j\build\ALL_BUILD.vcxproj，选择Release X64进行编译，编译结果如下：</p>
<blockquote>
<p>1&gt;—— 已启动生成: 项目: ZERO_CHECK, 配置: Release x64 ——<br>2&gt;—— 已启动生成: 项目: split_sentence_jni, 配置: Release x64 ——<br>3&gt;—— 已启动生成: 项目: segmentor_jni, 配置: Release x64 ——<br>4&gt;—— 已启动生成: 项目: srl_jni, 配置: Release x64 ——<br>5&gt;—— 已启动生成: 项目: parser_jni, 配置: Release x64 ——<br>2&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;split_sentence_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;split_sentence_jni.exp<br>3&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;segmentor_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;segmentor_jni.exp<br>3&gt;  segmentor_jni.vcxproj -&gt; D:\ltp4j\libs\Release\segmentor_jni.dll<br>4&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;srl_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;srl_jni.exp<br>5&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;parser_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;parser_jni.exp<br>2&gt;  split_sentence_jni.vcxproj -&gt; D:\ltp4j\libs\Release\split_sentence_jni.dll<br>5&gt;  parser_jni.vcxproj -&gt; D:\ltp4j\libs\Release\parser_jni.dll<br>4&gt;  srl_jni.vcxproj -&gt; D:\ltp4j\libs\Release\srl_jni.dll<br>6&gt;—— 已启动生成: 项目: ner_jni, 配置: Release x64 ——<br>7&gt;—— 已启动生成: 项目: postagger_jni, 配置: Release x64 ——<br>6&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;ner_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;ner_jni.exp<br>7&gt;    Creating library D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;postagger_jni.lib and object D:&#x2F;ltp4j&#x2F;libs&#x2F;Release&#x2F;postagger_jni.exp<br>6&gt;  ner_jni.vcxproj -&gt; D:\ltp4j\libs\Release\ner_jni.dll<br>7&gt;  postagger_jni.vcxproj -&gt; D:\ltp4j\libs\Release\postagger_jni.dll<br>8&gt;—— 已跳过生成: 项目: ALL_BUILD, 配置: Release x64 ——<br>8&gt;没有为此解决方案配置选中要生成的项目<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 生成: 成功 7 个，失败 0 个，最新 0 个，跳过 1 个 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
</blockquote>
<h3 id="在Eclipse中使用离线版LTP"><a href="#在Eclipse中使用离线版LTP" class="headerlink" title="在Eclipse中使用离线版LTP"></a>在Eclipse中使用离线版LTP</h3><h4 id="配置Eclipse中项目所需资源"><a href="#配置Eclipse中项目所需资源" class="headerlink" title="配置Eclipse中项目所需资源"></a>配置Eclipse中项目所需资源</h4><p>在Eclipse中新建Java Project</p>
<ul>
<li><em>导入ltp4j.jar</em></li>
<li><em>windows下将ltp4j的libs文件夹中生成的所有动态库、以及原ltp lib文件夹下的splitsnt、segmentor、postagger、ner、parser、srl 6个动态库拷贝到项目根目录</em></li>
<li><em>linux下export LD_LIBRARY_PATH&#x3D;#jni动态库路径#</em><br>配置完成之后，项目视图如下所示：<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/ltp4j_eclipse.png" alt="项目结构图"></li>
</ul>
<h4 id="本地接口使用示例"><a href="#本地接口使用示例" class="headerlink" title="本地接口使用示例"></a>本地接口使用示例</h4><p>分词接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.Segmentor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* ClassName TestSegment</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* Description 分词接口</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment">*        &lt;p&gt;</span></span><br><span class="line"><span class="comment">*        Date 2015年5月7日 下午10:09:23</span></span><br><span class="line"><span class="comment">*        &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSegment</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// /MyTest/</span></span><br><span class="line">        <span class="keyword">if</span> (Segmentor.create(<span class="string">&quot;ltp_data/cws.model&quot;</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;load failed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sent</span> <span class="operator">=</span> <span class="string">&quot;我是中国人&quot;</span>;</span><br><span class="line">        List&lt;String&gt; words = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Segmentor.segment(sent, words);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            System.out.print(words.get(i));</span><br><span class="line">            <span class="keyword">if</span> (i == size - <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Segmentor.release();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>词性标注接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.Postagger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* ClassName TestPostag</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* Description 词性标注接口</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment">*        &lt;p&gt;</span></span><br><span class="line"><span class="comment">*        Date 2015年5月7日 下午10:09:55</span></span><br><span class="line"><span class="comment">*        &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPostag</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Postagger.create(<span class="string">&quot;ltp_data/pos.model&quot;</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;load failed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; words = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        words.add(<span class="string">&quot;我&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;是&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;人&quot;</span>);</span><br><span class="line">        List&lt;String&gt; postags = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Postagger.postag(words, postags);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            System.out.print(words.get(i) + <span class="string">&quot;_&quot;</span> + postags.get(i));</span><br><span class="line">            <span class="keyword">if</span> (i == size - <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;|&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Postagger.release();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>命名实体识别接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.NER;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* ClassName TestNer</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* Description 命名实体识别接口</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment">*        &lt;p&gt;</span></span><br><span class="line"><span class="comment">*        Date 2015年5月7日 下午10:08:26</span></span><br><span class="line"><span class="comment">*        &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestNer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (NER.create(<span class="string">&quot;ltp_data/ner.model&quot;</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;load failed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; words = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        List&lt;String&gt; tags = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        List&lt;String&gt; ners = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        words.add(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;ns&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;国际&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;n&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;广播&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;n&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;电台&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;n&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;创办&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;v&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;于&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;1941年&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;12月&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;3日&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;。&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;wp&quot;</span>);</span><br><span class="line"></span><br><span class="line">        NER.recognize(words, tags, ners);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; words.size(); i++) &#123;</span><br><span class="line">            System.out.println(ners.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        NER.release();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>依存句法分析接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.Parser;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* ClassName TestParser</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* Description 依存句法分析接口</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment">*        &lt;p&gt;</span></span><br><span class="line"><span class="comment">*        Date 2015年5月7日 下午10:11:09</span></span><br><span class="line"><span class="comment">*        &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestParser</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Parser.create(<span class="string">&quot;ltp_data/parser.model&quot;</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;load failed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; words = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        List&lt;String&gt; tags = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        words.add(<span class="string">&quot;一把手&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;n&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;亲自&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;过问&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;v&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;。&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;wp&quot;</span>);</span><br><span class="line">        List&lt;Integer&gt; heads = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        List&lt;String&gt; deprels = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Parser.parse(words, tags, heads, deprels);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            System.out.print(heads.get(i) + <span class="string">&quot;:&quot;</span> + deprels.get(i));</span><br><span class="line">            <span class="keyword">if</span> (i == size - <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;        &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Parser.release();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语义角色标注接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.Pair;</span><br><span class="line"><span class="keyword">import</span> edu.hit.ir.ltp4j.SRL;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* ClassName TestSrl</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* &lt;p&gt;</span></span><br><span class="line"><span class="comment">* Description 语义角色标注接口</span></span><br><span class="line"><span class="comment">* &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment">*        &lt;p&gt;</span></span><br><span class="line"><span class="comment">*        Date 2015年5月7日 下午10:11:46</span></span><br><span class="line"><span class="comment">*        &lt;/p&gt;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSrl</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SRL.create(<span class="string">&quot;ltp_data/srl&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; words = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        words.add(<span class="string">&quot;一把手&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;亲自&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;过问&quot;</span>);</span><br><span class="line">        words.add(<span class="string">&quot;。&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; tags = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        tags.add(<span class="string">&quot;n&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;v&quot;</span>);</span><br><span class="line">        tags.add(<span class="string">&quot;wp&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; ners = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        ners.add(<span class="string">&quot;O&quot;</span>);</span><br><span class="line">        ners.add(<span class="string">&quot;O&quot;</span>);</span><br><span class="line">        ners.add(<span class="string">&quot;O&quot;</span>);</span><br><span class="line">        ners.add(<span class="string">&quot;O&quot;</span>);</span><br><span class="line">        ArrayList&lt;Integer&gt; heads = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        heads.add(<span class="number">2</span>);</span><br><span class="line">        heads.add(<span class="number">2</span>);</span><br><span class="line">        heads.add(-<span class="number">1</span>);</span><br><span class="line">        heads.add(<span class="number">2</span>);</span><br><span class="line">        ArrayList&lt;String&gt; deprels = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        deprels.add(<span class="string">&quot;SBV&quot;</span>);</span><br><span class="line">        deprels.add(<span class="string">&quot;ADV&quot;</span>);</span><br><span class="line">        deprels.add(<span class="string">&quot;HED&quot;</span>);</span><br><span class="line">        deprels.add(<span class="string">&quot;WP&quot;</span>);</span><br><span class="line">        List&lt;Pair&lt;Integer, List&lt;Pair&lt;String, Pair&lt;Integer, Integer&gt;&gt;&gt;&gt;&gt; srls = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Pair&lt;Integer, List&lt;Pair&lt;String, Pair&lt;Integer, Integer&gt;&gt;&gt;&gt;&gt;();</span><br><span class="line">        SRL.srl(words, tags, ners, heads, deprels, srls);</span><br><span class="line">        System.out.println(srls.size());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; srls.size(); ++i) &#123;</span><br><span class="line">            System.out.println(srls.get(i).first + <span class="string">&quot;:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; srls.get(i).second.size(); ++j) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;  tpye = &quot;</span> + srls.get(i).second.get(j).first + <span class="string">&quot; beg = &quot;</span></span><br><span class="line">                        + srls.get(i).second.get(j).second.first + <span class="string">&quot; end = &quot;</span> + srls.get(i).second.get(j).second.second);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        SRL.release();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="等等，最后一步"><a href="#等等，最后一步" class="headerlink" title="等等，最后一步"></a>等等，最后一步</h4><p><em><strong>注意点</strong></em><br>在ltp4j中提供的ltp_data中的model仅仅是作为你测试代码的正确性，其并非完整的model，如果需要在生产环境中使用，需要到<a target="_blank" rel="noopener" href="http://pan.baidu.com/share/link?shareid=1988562907&uk=2738088569#path=%252Fltp-models">这里</a>下载完整版的model，将下载的完整版ltp_data拷贝到项目中即可。</p>
<h4 id="其他错误"><a href="#其他错误" class="headerlink" title="其他错误"></a>其他错误</h4><blockquote>
<p>Cannot open include file: ‘ammintrin.h’: No such file or directory</p>
</blockquote>
<p>参考如下文章<br><a target="_blank" rel="noopener" href="http://wishmesh.com/2011/04/fatal-error-c1083-cannot-open-include-file-ammintrin-h-no-such-file-or-directory/">http://wishmesh.com/2011/04/fatal-error-c1083-cannot-open-include-file-ammintrin-h-no-such-file-or-directory/</a></p>
<p><a target="_blank" rel="noopener" href="https://connect.microsoft.com/VisualStudio/feedback/details/660584/">https://connect.microsoft.com/VisualStudio/feedback/details/660584/</a></p>
<p><strong>参考文献</strong><br>【1】 <a target="_blank" rel="noopener" href="http://www.ltp-cloud.com/">哈工大LTP官网</a><br>【2】 <a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp4j">LTP4J的github地址</a><br>【3】 <a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp">LTP的github地址</a><br>【4】 <a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp/blob/master/doc/ltp-document-3.0.md">LTP3.0参考文档</a><br>【5】 <a target="_blank" rel="noopener" href="https://github.com/HIT-SCIR/ltp4j/blob/master/doc/ltp4j-document-1.0.md">LTP4J1.0参考文档</a><br>【6】 <a target="_blank" rel="noopener" href="http://blog.csdn.net/yapingxin/article/details/7414084">VS2010与64位系统</a><br>【7】 <a target="_blank" rel="noopener" href="http://cn.mathworks.com/matlabcentral/answers/116701-microsoft-visual-c-2010-microsoft-windows-sdk-7-1">安装 Microsoft Visual C++ 2010 和 Microsoft Windows SDK 7.1</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Segmentation-of-natural-paragraph-in-Java-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Segmentation-of-natural-paragraph-in-Java-code/" class="post-title-link" itemprop="url">Java代码实现按照文本的自然段落进行切分</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-04-25 14:58:43" itemprop="dateCreated datePublished" datetime="2015-04-25T14:58:43+00:00">2015-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:28" itemprop="dateModified" datetime="2024-01-26T12:42:28+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文给出了五种自然段落的组合方式，具体形式参见底部给出的链接，无积分下载，不管各个段落形式如何，只要段落之间存在换行分隔，该程序即可正确运行。在此提供两种切分段落的方法，分别见下面的法一和法二。<br>法一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName SplitParagraph</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 对文本按照自然段落进行切分</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年4月25日 下午3:37:42</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SplitParagraph</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Title: getParagraph</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Description: 根据给出的文本路径，读取文本内容，并按照段落切分，以段落为单位，存储在List集合中</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filePath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> List&lt;String&gt; 段落集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; <span class="title function_">getParagraph</span><span class="params">(String filePath, String charset)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();<span class="comment">// 拼接读取的内容</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath), charset);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">        String temp;</span><br><span class="line">        <span class="keyword">while</span> ((temp = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            sb.append(temp.trim() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// \s A whitespace character: [ \t\n\x0B\f\r]</span></span><br><span class="line">        String p[] = sb.toString().split(<span class="string">&quot;\\s*\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String string : p) &#123;</span><br><span class="line">            res.add(string.replaceAll(<span class="string">&quot;\\s*&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (br != <span class="literal">null</span>)</span><br><span class="line">            br.close();</span><br><span class="line">        <span class="keyword">if</span> (isr != <span class="literal">null</span>)</span><br><span class="line">            isr.close();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>法二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName GetParagraph</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 使用Java完成对一篇文本的自然段落的切分，在此给出了五种文本格式作为示例，对任一种格式，该程序均可以正确切分。</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年2月11日 下午1:33:03</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetParagraph</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        ArrayList&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();<span class="comment">// 段落切分结果</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();<span class="comment">// 拼接读取的内容</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">// 临时变量，存储sb去除空格的内容</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\TKPad\\Desktop\\test/a.txt&quot;</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="keyword">new</span> <span class="title class_">File</span>(filePath)));</span><br><span class="line">        <span class="type">int</span> <span class="variable">ch</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((ch = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            temp = sb.toString().trim().replaceAll(<span class="string">&quot;\\s*&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">// 取出前后空格，之后去除中间空格</span></span><br><span class="line">            <span class="keyword">if</span> ((<span class="type">char</span>) ch == <span class="string">&#x27;\r&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// 判断是否是空行</span></span><br><span class="line">                <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(temp)) &#123;</span><br><span class="line">                    <span class="comment">// 说明到了段落结尾，将其加入链表，并清空sb</span></span><br><span class="line">                    res.add(temp);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.delete(<span class="number">0</span>, sb.length());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 说明没到段落结尾，将结果暂存</span></span><br><span class="line">                sb.append((<span class="type">char</span>) ch);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (reader.read() == -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;哈哈，你读到了末尾嘞！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 最后一段如果非空， 将最后一段加入，否则不处理</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(temp)) &#123;</span><br><span class="line">            res.add(temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; iterator = res.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;段落开始：&quot;</span>);</span><br><span class="line">            System.out.println(next);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;段落的个数是：&quot;</span> + res.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试用例点我：<a target="_blank" rel="noopener" href="http://download.csdn.net/download/shijiebei2009/8440133">http://download.csdn.net/download/shijiebei2009/8440133</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/How-to-load-resource-file-in-a-Jar-package-correctly/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/How-to-load-resource-file-in-a-Jar-package-correctly/" class="post-title-link" itemprop="url">Jar包中如何正确地加载资源文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-04-22 21:07:22" itemprop="dateCreated datePublished" datetime="2015-04-22T21:07:22+00:00">2015-04-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:20" itemprop="dateModified" datetime="2024-01-26T12:42:20+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>JDK：java version “1.8.0_31”<br>Java(TM) SE Runtime Environment (build 1.8.0_31-b13)<br>Java HotSpot(TM) 64-Bit Server VM (build 25.31-b07, mixed mode)</p>
<p>OS：win7 64bit</p>
<p>在日常开发中，经常需要在项目中加载各种资源，包括图片、文本、声音等资源，在本地项目中运行代码可以正确地加载资源，但是当把本地项目打包成<code>Jar</code>包并发布到<code>web</code>项目中之后，即便将各种资源文件一并打包，依然会出现无法正确加载资源的问题。这说明，在你希望打包的项目中加载资源的方式是错误的。那么你或许会问，为什么在单独的项目中可以正确加载资源，而打包之后就无法加载了呢？这是因为，打包之后，<code>jar</code>包中的所加载的文件路径发生了变化，例如<code>res.txt</code>打包到<code>C盘</code>之后，其路径变为<code>file:/C:/ResourceJar.jar!/resource/res.txt</code>，如果你在原项目中使用<code>new File(filePath)</code>之类的方法来加载的话，肯定会找不到资源文件。主要是因为<code>Jar</code>包是一个单独的文件而非文件夹，绝对不可能通过<code>file:/C:/.../ResourceJar.jar/resource /res.txt</code>这种形式的文件<code>URL</code>来定位<code>res.txt</code>。所以即使是相对路径，也无法定位到<code>Jar</code>包内的资源文件。</p>
<p>以将要打包的项目<code>jarProj</code>为例，介绍如何在将要打包的项目中正确的加载资源，<code>jarProj</code>项目目录结构如下<br> (conf是Source Folder，创建方法是在项目上右击-&gt;New-&gt;Other-&gt;Java-&gt;Source Folder，使用该方式所创建的目录效果和src目录相同，在编译之后，其下的文件和src下的文件都会发布到bin目录下)。</p>
<blockquote>
<p>jarProj-</p>
<blockquote>
<p>src–</p>
<blockquote>
<p>edu&#x2F;shu&#x2F;reference&#x2F;jar&#x2F;LoadFile.java</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>conf–</p>
<blockquote>
<p>reource&#x2F;text.txt</p>
</blockquote>
</blockquote>
</blockquote>
<p>如果需要在<code>jarProj</code>项目中加载一些资源文件，之后将其打包，发布到其他项目之下，该<code>jarProj</code>项目依然可以正确的加载到资源文件，需要使用到<code>getResource()</code>和<code>getResourceAsStream()</code>两个方法，而这两个方法大多数人都是无法区分的，需要做一个简单介绍</p>
<p><code>Class.getResource(String path)</code><br>path 不以’&#x2F;‘开头时，默认是从此类所在的包下取资源；<br>path 以’&#x2F;‘开头时，则是从加载该类的<code>class loader</code>下获取；如果该类是由<code>bootstrap class loader</code>加载，那么该方法等效于<code>ClassLoader.getSystemResource(java.lang.String)</code></p>
<ol>
<li><p>如果使用<code>this.getClass().getResource(&quot;myFile.ext&quot;)</code><br><code>getResource</code>方法会尽力从相对于该类所在包的路径下去寻找资源</p>
</li>
<li><p>如果使用<code>this.getClass().getResource(&quot;/myFile.ext&quot;)</code><br><code>getResource</code>方法会把它看成绝对路径，并且会简单的从<code>class loader</code>根下去加载资源</p>
</li>
<li><p>如果使用<code>this.getClass().getClassLoader().getResource(&quot;myFile.ext&quot;)</code><br>这时候，传递的参数不能够以&#x2F;作为路径的开始，因为所有的<code>ClassLoader</code>路径都是绝对路径，不需要参数以<code>/</code>作为合法的路径开始符号</p>
</li>
</ol>
<p>在上述三项中，<code>2和3</code>是等效的。</p>
<p>当项目被打包之后，其中的资源文件的路径其实已经发生变化，所以用简单的方法去加载肯定是找不到资源的，一般jar包中资源路径如下：<code>file:\D:\jarProj.jar!\resource\test.txt</code>，这时有两种解决办法，第一：用URL根据Jar包规范构造输入流（jar包中的资源有其专门的URL形式：<code>jar:&lt;url&gt;!/&#123;entry&#125;）</code>，然后进行读取；第二种是使用<code>getResourceAsStream()</code>进行加载，获取输入流，之后从输入流中读取，但是这样就无法使用诸如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="keyword">new</span> <span class="title class_">File</span>(filepath)))</span><br></pre></td></tr></table></figure>
<p>一类的方法了。</p>
<p>测试代码如下：<br>第一种在加载资源类中使用<code>getResourceAsStream()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.reference.jar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.JarURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName LoadFile</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 将Java项目打包，发布到Web项目下，依然可以正确的加载资源</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年4月22日 下午9:06:07</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        getResource();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getResource</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getResourceAsStream(<span class="string">&quot;/resource/test.txt&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> IOUtils.toString(is);</span><br><span class="line">        System.out.println(fileContent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将该项目打包，发布到其他项目下，在其他项目下编写测试类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.shu.reference.jar.LoadFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">LoadFile</span> <span class="variable">lf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoadFile</span>();</span><br><span class="line">        lf.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以看到正确的输出结果，加载资源没问题！</p>
<p>第二种使用URL加载Jar资源的方式加载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.reference.jar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.JarURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ClassName LoadFile</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Description 将Java项目打包，发布到Web项目下，依然可以正确的加载资源</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> TKPad wangx89@126.com</span></span><br><span class="line"><span class="comment"> *         &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *         Date 2015年4月22日 下午9:06:07</span></span><br><span class="line"><span class="comment"> *         &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> V1.0.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">f</span> <span class="operator">=</span> <span class="string">&quot;/resource/test.txt&quot;</span>;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getResource(f);</span><br><span class="line">        loadJar(resource.getFile());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Title: loadJar</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Description: ③ 封装了一个加载Jar包的方法，使用URL根据jar包加载规范获取输入流，并据此输入流做进一步的操作</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filePath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loadJar</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 注意在WINDOWS环境一定要使用正斜杠</span></span><br><span class="line">        filePath = <span class="string">&quot;jar:&quot;</span> + filePath;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(filePath);</span><br><span class="line">        <span class="type">JarURLConnection</span> <span class="variable">openStream</span> <span class="operator">=</span> (JarURLConnection) url.openConnection();</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> openStream.getInputStream();</span><br><span class="line">        <span class="comment">// 使用IO工具类将输入流输出到控制台</span></span><br><span class="line">        IOUtils.copy(inputStream, System.out);</span><br><span class="line">        <span class="comment">// 使用IO工具类从输入流中按行读取并存入List集合</span></span><br><span class="line">        List&lt;String&gt; contents = IOUtils.readLines(inputStream);</span><br><span class="line">        System.out.println(contents);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>将该项目打包，发布到其他项目下，在其他项目下编写测试类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.shu.reference.jar.LoadFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">LoadFile</span> <span class="variable">lf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoadFile</span>();</span><br><span class="line">        lf.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以看到正确的输出结果，加载资源没问题！</p>
<p>如果你经常使用Apache的<code>commons-io</code>包的话，那么在Jar包中就不适合使用<code>FileUtils</code>去加载资源文件了，例如下面的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FileUtils.readFileToString(<span class="keyword">new</span> <span class="title class_">File</span>(ClassName.class.getClassLoader().getResource(<span class="string">&quot;config.properties&quot;</span>).toURI().toString()), Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">FileUtils.readFileToString(<span class="keyword">new</span> <span class="title class_">File</span>(ClassName.class.getClassLoader().getResource(<span class="string">&quot;config.properties&quot;</span>).toURI()), Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>这两种方式都无法正确的加载到资源文件，但是<code>commons-io</code>包的另一个类仍然非常有用，就是<code>org.apache.commons.io.IOUtils</code>类，一行代码就可以帮助我们读取资源文件中的所有内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; contents = IOUtils.readLines(ClassName.class.getClassLoader().getResourceAsStream(<span class="string">&quot;config.properties&quot;</span>), Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>即使该资源文件被打包到Jar文件中，这种方式依然没有任何问题，推荐使用。</p>
<p><strong>说明</strong></p>
<ul>
<li><p>另外还有一种比较常见的形式<code>ClassName.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)</code>，在这个时候使用<code>Class.getClassLoader().getResource()</code>和<code>Class.getClassLoader().getResourceAsStream()</code>在路径选择上是一样的，只不过两个方法返回的对象不同，前者返回<code>URL</code>对象，后者返回<code>InputStream</code>对象。</p>
</li>
<li><p>在使用<code>ClassName.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)</code>的时候千万不要写成<code>ClassName.class.getClass().getClassLoader().getResourceAsStream(&quot;config.properties&quot;)</code>，后者会始终抛<code>NullPointerException</code>，因为<code>class.getClass().getClassLoader().getResourceAsStream(...)</code>使用的是系统类加载器，而你的Jar对系统类加载器是不可见的。</p>
</li>
</ul>
<p>整个项目的下载地址在：<a target="_blank" rel="noopener" href="http://download.csdn.net/detail/shijiebei2009/8631005">http://download.csdn.net/detail/shijiebei2009/8631005</a></p>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://hxraid.iteye.com/blog/483115">http://hxraid.iteye.com/blog/483115</a><br>[2] <a target="_blank" rel="noopener" href="http://www.cnblogs.com/yejg1212/p/3270152.html">http://www.cnblogs.com/yejg1212/p/3270152.html</a><br>[3] <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/16570523/getresourceasstream-returns-null">http://stackoverflow.com/questions/16570523/getresourceasstream-returns-null</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Introduction-to-Apache-Commons/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Introduction-to-Apache-Commons/" class="post-title-link" itemprop="url">Apache Commons入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-04-19 20:29:21" itemprop="dateCreated datePublished" datetime="2015-04-19T20:29:21+00:00">2015-04-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:18" itemprop="dateModified" datetime="2024-01-26T12:42:18+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Apache Commons是Apache软件基金会的项目，曾隶属于Jakarta项目。Commons的目的是提供可重用的、开源的Java代码。Commons由三部分组成：Proper（是一些已发布的项目）、Sandbox（是一些正在开发的项目）和Dormant（是一些刚启动或者已经停止维护的项目）。</p>
<p>目前Commons-IO包稳定版本是Version 2.4，可惜的是，对于我目前很需要的copyInputStreamToFile（final InputStream source, final File destination, boolean closeSource）方法，只能等到Version 2.5了，关于详情参见：<a target="_blank" rel="noopener" href="https://issues.apache.org/jira/browse/IO-381">https://issues.apache.org/jira/browse/IO-381</a></p>
<p>Apache Commons提供了全方位可重用的Java组件，在我们日常开发中，诸多问题的解决方法均可在Commons包中找到实现，使用Commons包提供的组件可以极大的提高开发效率，减少重复劳动，下表是Commons提供的组件的详细信息，鉴于英文水平一般，不予翻译，采用官网提供的标准信息。</p>
<p><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/commons_a.png"><br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/commons_b.png" alt="Apache commons"></p>
<p>以最常用的Commons包封装的方法为例，介绍一些简单的使用示例</p>
<ul>
<li>将输入流转换成文本</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.commons.io.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCommonsIO</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">openStream</span> <span class="operator">=</span> url.openStream();</span><br><span class="line"><span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> IOUtils.toString(openStream, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">System.out.println(string);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>读文件与写文件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.commons.io.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCommonsIO</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> FileUtils.readFileToString(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>));</span><br><span class="line">System.out.println(content);</span><br><span class="line">FileUtils.writeStringToFile(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;destination.txt&quot;</span>), content);</span><br><span class="line"><span class="comment">// 指定编码的读</span></span><br><span class="line">content = FileUtils.readFileToString(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// 指定编码的写</span></span><br><span class="line">FileUtils.writeStringToFile(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;destination.txt&quot;</span>), content, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>输出结果为HTML</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.commons.io.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringEscapeUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCommonsIO</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">escapeHtml4</span> <span class="operator">=</span> StringEscapeUtils.escapeHtml4(content);</span><br><span class="line">System.out.println(escapeHtml4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>将文本按行读取并以行为元素存入List列表</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.commons.io.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCommonsIO</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">List contents= FileUtils.readLines(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>));</span><br><span class="line">System.out.println(contents);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>从ClassLoader加载器加载资源，并且读出文本内容、</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.shu.commons.io.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCommonsIO</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> TestCommonsIO.class.getClass().getResourceAsStream(<span class="string">&quot;/resource/d.txt&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> IOUtils.toString(is);</span><br><span class="line">System.out.println(content);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>commons mail包主要是对java mail的封装，可以方便快速的发送邮件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.mail.DefaultAuthenticator;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.Email;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.EmailException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.SimpleEmail;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEmail</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> EmailException &#123;</span><br><span class="line"><span class="type">Email</span> <span class="variable">email</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleEmail</span>();</span><br><span class="line">email.setHostName(<span class="string">&quot;smtp.qq.com&quot;</span>);</span><br><span class="line">email.setSmtpPort(<span class="number">465</span>);</span><br><span class="line">email.setAuthenticator(<span class="keyword">new</span> <span class="title class_">DefaultAuthenticator</span>(<span class="string">&quot;发送者账号&quot;</span>, <span class="string">&quot;发送者账号密码&quot;</span>));</span><br><span class="line">email.setSSLOnConnect(<span class="literal">true</span>);</span><br><span class="line">email.setFrom(<span class="string">&quot;sender mail@qq.com&quot;</span>);</span><br><span class="line">email.setSubject(<span class="string">&quot;TestMail&quot;</span>);</span><br><span class="line">email.setMsg(<span class="string">&quot;This is a test mail ... :-)&quot;</span>);</span><br><span class="line">email.addTo(<span class="string">&quot;receiver mail@qq.com&quot;</span>);</span><br><span class="line">email.send();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>参考文献</strong><br><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/commons_a.png">1</a> <a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/Apache_Commons">http://zh.wikipedia.org/wiki/Apache_Commons</a><br><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/commons_b.png">2</a> <a target="_blank" rel="noopener" href="http://zhoualine.iteye.com/blog/1770014">http://zhoualine.iteye.com/blog/1770014</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/java-volatile-boolean-atomic-boolean-analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java-volatile-boolean-atomic-boolean-analysis/" class="post-title-link" itemprop="url">Java之volatile boolean，AtomicBoolean分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-04-10 17:42:13" itemprop="dateCreated datePublished" datetime="2015-04-10T17:42:13+00:00">2015-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:22" itemprop="dateModified" datetime="2024-01-26T12:42:22+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="volatile概述"><a href="#volatile概述" class="headerlink" title="volatile概述"></a>volatile概述</h3><p>volatile关键字是一个类型修饰符，被设计用来修饰被不同线程访问和修改的变量，在JVM1.2之前，Java的内存模型实现总是从主存读取变量，是不需要进行特别的注意的。而随着JVM的成熟和优化，现在在多线程环境下volatile关键字的使用变得非常重要。</p>
<p>在当前的Java内存模型下，线程可以把变量保存在本地内存（比如机器的寄存器）中，而不是直接在主存中进行读写。这就可能造成一个线程在主存中修改了一个变量的值，而另外一个线程还继续使用它在寄存器中的变量值的拷贝，造成数据的不一致。</p>
<p>要解决这个问题，需要把变量声明为volatile（不稳定的），以后用到该变量都会到主存中进行存取，一般多任务环境下各任务间共享的标志都应该加volatile修饰。volatile修饰的成员变量在每次被线程访问时，都强迫从共享内存中重读该成员变量的值，而且当成员变量发生变化时，强迫线程将变化值回写到共享内存。</p>
<p>Java语言中的volatile变量可以被看作是一种“程度较轻的synchronized”；与synchronized块相比，volatile变量所需的编码较少，并且运行时开销也较少，但是它所能实现的功能也仅是synchronized的一部分。Volatile变量具有synchronized的可见性特性，但是不具备原子特性。volatile仅仅用来保证该变量对所有线程的可见性，但不保证原子性。</p>
<h3 id="volatile是线程不安全的"><a href="#volatile是线程不安全的" class="headerlink" title="volatile是线程不安全的"></a>volatile是线程不安全的</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">20</span>; j++) &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Test</span>());</span><br><span class="line">            t.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;我成功了！&quot;</span>);</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<blockquote>
<p>我成功了！<br>我成功了！<br>我成功了！<br>我成功了！</p>
</blockquote>
<p>注意：不要将volatile用在getAndOperate场合，仅仅set或者get的场景是适合volatile的。</p>
<p>由以上测试用例可以看出，volatile boolean是无法保证线程安全的，在一个线程占用flag变量的时候，<br>其他线程也可以占用flag变量，所以多个线程均可以打印出消息。</p>
<h3 id="Atomic概述"><a href="#Atomic概述" class="headerlink" title="Atomic概述"></a>Atomic概述</h3><p>java.util.concurrent.atomic是在JDK1.5之后引入的包，在JDK中的说明如下</p>
<blockquote>
<p>A small toolkit of classes that support lock-free thread-safe programming on single variables. In essence, the classes in this package extend the notion of volatile values, fields, and array elements to those that also provide an atomic conditional update operation of the form:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">compareAndSet</span><span class="params">(expectedValue, updateValue)</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>This method (which varies in argument types across different classes) atomically sets a variable to the updateValue if it currently holds the expectedValue, reporting true on success. The classes in this package also contain methods to get and unconditionally set values, as well as a weaker conditional atomic update operation weakCompareAndSet described below.</p>
</blockquote>
<p>该包提供了一组原子类，在多线程环境下，当有多个线程同时执行这些类的实例包含的方法时，具有排他性，即当某个线程进入方法，执行其中的指令时，不会被其他线程打断，而别的线程就像自旋锁一样，一直等到该方法执行完成，才由JVM从等待队列中选择另一个线程进入。</p>
<h3 id="Atomic是线程安全的"><a href="#Atomic是线程安全的" class="headerlink" title="Atomic是线程安全的"></a>Atomic是线程安全的</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicBoolean;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">AtomicBoolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicBoolean</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">20</span>; j++) &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Test</span>());</span><br><span class="line">            t.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag.compareAndSet(<span class="literal">true</span>, <span class="literal">false</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;我成功了！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<blockquote>
<p>我成功了！</p>
</blockquote>
<p>Atomic类不仅仅提供了对数据操作的线程安全保证，而且提供了一系列的语义清晰的方法，如incrementAndGet() 、getAndIncrement() 等，使用方便，Atomic的内部实现使用的是更加高效的CAS（compareand swap）+volatile，从而避免了synchronized的高开销，执行效率大幅提升，出于性能考虑强烈建议使用Atomic，而不是synchronized关键字。</p>
<hr>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://www.blogjava.net/aoxj/archive/2012/06/16/380926.html">http://www.blogjava.net/aoxj/archive/2012/06/16/380926.html</a><br>[2] <a target="_blank" rel="noopener" href="http://blog.csdn.net/xieyuooo/article/details/8594713">http://blog.csdn.net/xieyuooo/article/details/8594713</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Github-Pages-personal-blog-from-Octopress-to-Hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Github-Pages-personal-blog-from-Octopress-to-Hexo/" class="post-title-link" itemprop="url">Github Pages个人博客，从Octopress转向Hexo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2015-04-06 16:03:13" itemprop="dateCreated datePublished" datetime="2015-04-06T16:03:13+00:00">2015-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:21" itemprop="dateModified" datetime="2024-01-26T12:42:21+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git-GitHub/" itemprop="url" rel="index"><span itemprop="name">Git/GitHub</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>环境&amp;版本<br>OS：win7 X64<br>Hexo：V3.0.0<br>Node.js：V0.12.2<br>Git：Version 1.9.5.msysgit.1</p>
</blockquote>
<p>关于为什么要开博客？请参见<a target="_blank" rel="noopener" href="http://zhuanlan.zhihu.com/cnfeat/19743861">《为什么你要写博客？》</a><a target="_blank" rel="noopener" href="http://zhuanlan.zhihu.com/cnfeat/19743255">《我的博客时代》</a></p>
<p>下面就让我们一起开启使用Hexo的全新旅程吧！</p>
<h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p><a target="_blank" rel="noopener" href="https://nodejs.org/download/">下载Node.js</a><br>参考地址：<a target="_blank" rel="noopener" href="http://www.w3cschool.cc/nodejs/nodejs-install-setup.html">安装Node.js</a></p>
<h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p>下载地址：<a target="_blank" rel="noopener" href="http://git-scm.com/download/">http://git-scm.com/download/</a></p>
<h3 id="注册GitHub"><a href="#注册GitHub" class="headerlink" title="注册GitHub"></a>注册GitHub</h3><p>访问：<a target="_blank" rel="noopener" href="http://www.github.com/">http://www.github.com/</a><br>注册过程参见：<a target="_blank" rel="noopener" href="http://pchou.info/web-build/2013/01/03/build-github-blog-page-01.html">一步步在GitHub上创建博客主页 全系列</a></p>
<h3 id="配置和使用Github"><a href="#配置和使用Github" class="headerlink" title="配置和使用Github"></a>配置和使用Github</h3><p>参见：<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/05289a4bc8b2">如何搭建一个独立博客——简明Github Pages与Hexo教程</a></p>
<h3 id="安装Hexo及主题设置"><a href="#安装Hexo及主题设置" class="headerlink" title="安装Hexo及主题设置"></a>安装Hexo及主题设置</h3><h4 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /d/</span><br><span class="line">$ <span class="built_in">mkdir</span> hexo</span><br><span class="line">$ <span class="built_in">cd</span> hexo</span><br><span class="line">$ npm install -g hexo</span><br><span class="line">$ hexo init</span><br><span class="line">$ hexo g <span class="comment"># 或者hexo generate</span></span><br><span class="line">$ hexo s <span class="comment"># 或者hexo server，可以在http://localhost:4000/查看</span></span><br></pre></td></tr></table></figure>
<p>注意在使用npm安装hexo的时候，如果在Git Bash中出现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh.exe<span class="string">&quot;: npm: command not found</span></span><br></pre></td></tr></table></figure>
<p>那么需要右击Git Bash以管理员身份运行，再次在Git Bash中输入<strong>npm install -g hexo</strong>即可。</p>
<h4 id="复制主题"><a href="#复制主题" class="headerlink" title="复制主题"></a>复制主题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/wuchong/jacman.git themes/jacman</span><br></pre></td></tr></table></figure>
<h4 id="启用主题"><a href="#启用主题" class="headerlink" title="启用主题"></a>启用主题</h4><p>修改Hexo目录下的_config.yml配置文件中的theme属性，将其设置为jacman。</p>
<h4 id="更新主题"><a href="#更新主题" class="headerlink" title="更新主题"></a>更新主题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/jacman</span><br><span class="line">$ git pull</span><br><span class="line">$ hexo g <span class="comment"># 生成</span></span><br><span class="line">$ hexo s <span class="comment"># 启动本地服务，进行文章预览调试 </span></span><br></pre></td></tr></table></figure>
<p>在浏览器中输入<a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/</a><br>如果显示的是繁体中文，那么修改<code>_config.xml</code>中的<code>language: zh-CN</code>。</p>
<h4 id="绑定独立域名"><a href="#绑定独立域名" class="headerlink" title="绑定独立域名"></a>绑定独立域名</h4><p><a target="_blank" rel="noopener" href="http://www.net.cn/">购买域名</a><br>在你的域名注册提供商那里配置DNS解析，获取GitHub的IP地址<a target="_blank" rel="noopener" href="https://help.github.com/articles/tips-for-configuring-an-a-record-with-your-dns-provider/">点击</a>，进入source目录下，添加CNAME文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> <span class="built_in">source</span>/</span><br><span class="line">$ <span class="built_in">touch</span> CNAME</span><br><span class="line">$ vim CNAME <span class="comment"># 输入你的域名，例如codepub.cn</span></span><br><span class="line">$ git add CNAME</span><br><span class="line">$ git commit -m <span class="string">&quot;add CNAME&quot;</span></span><br></pre></td></tr></table></figure>
<p>修改<code>_config.xml</code>文件，添加你的Github中仓库地址，该仓库名称必须是<code>yourusername.github.io</code>，添加如下内容到<code>_config.xml</code>中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:shijiebei2009/shijiebei2009.github.io.git <span class="comment"># 注意换成自己的username</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>不会建仓库的童鞋参见<a target="_blank" rel="noopener" href="http://zipperary.com/2013/05/28/hexo-guide-2/">hexo系列教程：（二）搭建hexo博客</a></p>
<h4 id="推送到远程仓库"><a href="#推送到远程仓库" class="headerlink" title="推送到远程仓库"></a>推送到远程仓库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">$ git remote add origin git@github.com:shijiebei2009/shijiebei2009.github.io.git</span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<p>如果出现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Username <span class="keyword">for</span> <span class="string">&#x27;https://github.com&#x27;</span>: shijiebei2009</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">&#x27;https://shijiebei2009@github.com&#x27;</span>:</span><br><span class="line">remote: Repository not found.</span><br><span class="line">fatal: repository <span class="string">&#x27;git://github.com/shijiebei2009/shijiebei2009.github.io.git/</span></span><br><span class="line"><span class="string">&#x27;</span> not found</span><br></pre></td></tr></table></figure>
<p>那是因为你在github网站上还没有建立该仓库导致。<br>部署</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy <span class="comment">#或者组合命令 hexo d -g</span></span><br></pre></td></tr></table></figure>
<p>如果出现：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR Deployer not found: git</span><br></pre></td></tr></table></figure>
<p>需要运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h3 id="进阶篇-高级定制"><a href="#进阶篇-高级定制" class="headerlink" title="进阶篇-高级定制"></a>进阶篇-高级定制</h3><h4 id="添加插件"><a href="#添加插件" class="headerlink" title="添加插件"></a>添加插件</h4><p>添加sitemap和feed插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed</span><br><span class="line">$ npm install hexo-generator-sitemap</span><br></pre></td></tr></table></figure>
<p>修改<code>_config.yml</code>，增加以下内容</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="attr">Plugins:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo-generator-feed</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo-generator-sitemap</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#sitemap</span></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure>
<p>配完之后，就可以访问<code>http://codepub.cn/atom.xml</code>和<code>http://codepub.cn/sitemap.xml</code>，发现这两个文件已经成功生成了。</p>
<h4 id="添加404公益页面"><a href="#添加404公益页面" class="headerlink" title="添加404公益页面"></a>添加404公益页面</h4><p>GitHub Pages有提供制作404页面的指引：<a target="_blank" rel="noopener" href="https://help.github.com/articles/custom-404-pages">Custom 404 Pages</a>。</p>
<p>直接在根目录下创建自己的404.html或者404.md就可以。但是自定义404页面仅对绑定顶级域名的项目才起作用，GitHub默认分配的二级域名是不起作用的，使用hexo server在本机调试也是不起作用的。</p>
<p>推荐使用<a target="_blank" rel="noopener" href="http://www.qq.com/404/">腾讯公益404</a>。</p>
<h4 id="添加about页面"><a href="#添加about页面" class="headerlink" title="添加about页面"></a>添加about页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page <span class="string">&quot;about&quot;</span></span><br></pre></td></tr></table></figure>
<p>之后在\source\about\index.md目录下会生成一个index.md文件，打开输入个人信息即可，如果想要添加版权信息，可以在文件末尾添加：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:12px;border-bottom: #bbbbbb 1px solid; BORDER-LEFT: #bbbbbb 1px solid; BACKGROUND: #f6f6f6; HEIGHT: 120px; BORDER-TOP: #bbbbbb 1px solid; BORDER-RIGHT: #bbbbbb 1px solid&quot;</span> <span class="attr">class</span>=<span class="string">shijiebei2009right</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;MARGIN-TOP: 10px; FLOAT: left; MARGIN-LEFT: 5px; MARGIN-RIGHT: 10px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IMG</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://avatars3.githubusercontent.com/u/4994697?v=3&amp;u=70a4ca810fb1908f2deeed95f3b962eec64e1787&amp;s=140&quot;</span> <span class="attr">width</span>=<span class="string">90</span> <span class="attr">height</span>=<span class="string">100</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;LINE-HEIGHT: 200%; MARGIN-TOP: 10px; COLOR: #000000&quot;</span>&gt;</span>作者： </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://shijiebei2009.github.io/&quot;</span>&gt;</span>王旭<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span>出处： </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://shijiebei2009.github.io/&quot;</span>&gt;</span>http://shijiebei2009.github.io/<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span>本文基于<span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot;</span>&gt;</span> 知识共享署名-相同方式共享 4.0 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">国际许可协议发布，欢迎转载，演绎或用于商业目的，但是必须保留本文的署名 </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://shijiebei2009.github.io/&quot;</span>&gt;</span>王旭<span class="tag">&lt;/<span class="name">a</span>&gt;</span>及链接。</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="发表文章的markdown语法"><a href="#发表文章的markdown语法" class="headerlink" title="发表文章的markdown语法"></a>发表文章的markdown语法</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">postName</span> <span class="comment">#文章页面上的显示名称，可以任意修改，不会出现在URL中</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2013-12-02 15:30:16</span> <span class="comment">#文章生成时间，一般不改，当然也可以任意修改</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">example</span> <span class="comment">#分类</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">tag1</span>,<span class="string">tag2</span>,<span class="string">tag3</span>] <span class="comment">#文章标签，可空，多标签请用格式，注意:后面有个空格</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">附加一段文章摘要，字数最好在140字以内。</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="string">设置摘要有两种方法</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span><span class="string">、使用&lt;!--more--&gt;标签</span></span><br><span class="line"><span class="number">2</span><span class="string">、不使用&lt;!--more--&gt;标签，仅显示部分摘要。在`D:/hexo/themes/jacman/_config.xml`文件中修改为</span></span><br><span class="line"><span class="attr">index:</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span> <span class="comment">## default is unexpanding,so you can only see the short description of each post.</span></span><br><span class="line">  <span class="attr">excerpt_link:</span> <span class="string">Read</span> <span class="string">More</span></span><br><span class="line"></span><br><span class="line"><span class="string">以下正文</span></span><br></pre></td></tr></table></figure>

<h4 id="使用图床"><a href="#使用图床" class="headerlink" title="使用图床"></a>使用图床</h4><p>千万不要使用国内公司的图床，极其不靠谱，说关就关，说挂就挂，推荐使用GitHub作为原生的图床。</p>
<h4 id="markdown工具"><a href="#markdown工具" class="headerlink" title="markdown工具"></a>markdown工具</h4><p>Windows在线markdown工具：<a target="_blank" rel="noopener" href="https://www.zybuluo.com/mdeditor">https://www.zybuluo.com/mdeditor</a><br>Windows本地markdown工具：<a target="_blank" rel="noopener" href="http://markdownpad.com/">markdownpad</a></p>
<h4 id="添加Fork-me-on-Github"><a href="#添加Fork-me-on-Github" class="headerlink" title="添加Fork me on Github"></a>添加Fork me on Github</h4><p><a target="_blank" rel="noopener" href="https://github.com/blog/273-github-ribbons">获取代码</a>，选择你喜欢的代码添加到hexo&#x2F;themes&#x2F;jacman&#x2F;layout&#x2F;layout.ejs的末尾即可，注意要将代码里的you改成你的Github账号名。</p>
<h4 id="添加支付宝捐赠按钮及二维码支付"><a href="#添加支付宝捐赠按钮及二维码支付" class="headerlink" title="添加支付宝捐赠按钮及二维码支付"></a>添加支付宝捐赠按钮及二维码支付</h4><h5 id="支付宝捐赠按钮"><a href="#支付宝捐赠按钮" class="headerlink" title="支付宝捐赠按钮"></a>支付宝捐赠按钮</h5><p>在D:\hexo\themes\jacman\layout_widget目录下新建一个zhifubao.ejs文件，内容如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;asidetitle&quot;</span>&gt;</span>打赏他<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;https://shenghuo.alipay.com/send/payment/fill.htm&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">accept-charset</span>=<span class="string">&quot;GBK&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;optEmail&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;your 支付宝账号&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;payAmount&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;默认捐赠金额(元)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;博主，打赏你的！&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;memo&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;你Y加油，继续写博客！&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;pay&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image&quot;</span> <span class="attr">value</span>=<span class="string">&quot;转账&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://raw.githubusercontent.com/shijiebei2009/img/master/blog/alipay_donate.png&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加完该文件之后，要在<code>D:/hexo/themes/jacman/_config.yml</code>文件中启用，如下所示，添加<code>zhifubao</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">widgets:</span><br><span class="line">- category</span><br><span class="line">- tag</span><br><span class="line">- links</span><br><span class="line">- tagcloud</span><br><span class="line">- zhifubao</span><br><span class="line">- rss</span><br></pre></td></tr></table></figure>

<h5 id="二维码捐赠"><a href="#二维码捐赠" class="headerlink" title="二维码捐赠"></a>二维码捐赠</h5><p>首先需要到<a target="_blank" rel="noopener" href="https://qr.alipay.com/paipai/open.htm">这里</a>获取你的支付宝账户的二维码图片，支付宝提供了自定义功能，可以添加自定义文字。</p>
<p>我的二维码扫描捐赠添加在about页面，当然你也可以添加到其它页面，在D:\hexo\source\about下有index.md，打开，在适当位置添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">欢迎您捐赠本站，您的支持是我最大的动力！</span><br><span class="line">![][1]</span><br><span class="line">[1]: https://raw.githubusercontent.com/shijiebei2009/img/master/blog/alipay_donate.png</span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;center&gt;</code>可以让图片居中显示，注意将图片链接地址换成你的即可。</p>
<h3 id="其它实用功能"><a href="#其它实用功能" class="headerlink" title="其它实用功能"></a>其它实用功能</h3><h4 id="插件推荐"><a href="#插件推荐" class="headerlink" title="插件推荐"></a>插件推荐</h4><p><a target="_blank" rel="noopener" href="http://hexo.io/docs/">hexo官方文档</a><br><a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/wiki/Plugins">hexo插件大全</a><br><a target="_blank" rel="noopener" href="http://www.faviconer.com/">自定义网站logo</a><br><a target="_blank" rel="noopener" href="http://www.markdown.cn/">MarkDown中文网</a><br><a target="_blank" rel="noopener" href="http://wowubuntu.com/markdown/">MarkDown语法说明</a><br><a target="_blank" rel="noopener" href="http://www.jiathis.com/">社交分享推荐使用jiathis</a><br><a target="_blank" rel="noopener" href="http://duoshuo.com/">评论插件推荐使用duoshuo</a><br><a target="_blank" rel="noopener" href="http://zhanzhang.cnzz.com/">网站流量统计推荐cnzz</a><br><a target="_blank" rel="noopener" href="http://tongji.baidu.com/web/welcome/login">网站流量统计推荐百度统计</a></p>
<h4 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h4><p>需要修改与作者有关的一系列信息，修改<code>D:/hexo/themes/jacman/_config.xml</code>中的<code>author/imglogo/favicon/author_img/apple_icon</code>一系列属性即可。</p>
<h4 id="删除warning-LF-will-be-replaced-by-CRLF警告信息"><a href="#删除warning-LF-will-be-replaced-by-CRLF警告信息" class="headerlink" title="删除warning: LF will be replaced by CRLF警告信息"></a>删除warning: LF will be replaced by CRLF警告信息</h4><p>在hexo deploy时，有时会出现这个提示信息<code>warning: LF will be replaced by CRLF</code>，虽然看起来挺乱糟糟的，但不影响使用，可以忽略不计。若想不提示，可以使用如下方法：<br>切换到博客的根目录，执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf <span class="literal">false</span> </span><br><span class="line">$ <span class="built_in">rm</span> -rf .git <span class="comment">#删除掉该目录下的.git文件夹</span></span><br><span class="line">$ git init <span class="comment">#重新初始化</span></span><br></pre></td></tr></table></figure>
<p>再deploy试试吧，清新脱俗了。</p>
<h4 id="写博客或添加页面"><a href="#写博客或添加页面" class="headerlink" title="写博客或添加页面"></a>写博客或添加页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;postName&quot;</span> <span class="comment">#新建文章</span></span><br><span class="line">$ hexo new page <span class="string">&quot;pageName&quot;</span> <span class="comment">#新建页面</span></span><br><span class="line">$ hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">$ hexo server <span class="comment">#开启预览访问端口（默认端口4000，&#x27;ctrl + c&#x27;关闭server）</span></span><br><span class="line">$ hexo deploy <span class="comment">#将.deploy目录部署到GitHub</span></span><br></pre></td></tr></table></figure>
<p>常用简写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo n == hexo new</span><br><span class="line">$ hexo g == hexo generate</span><br><span class="line">$ hexo s == hexo server</span><br><span class="line">$ hexo d == hexo deploy</span><br></pre></td></tr></table></figure>
<p>常用组合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g <span class="comment">#生成部署</span></span><br><span class="line">$ hexo s -g <span class="comment">#生成预览</span></span><br></pre></td></tr></table></figure>
<h4 id="安装hexo-generator-baidu-sitemap插件，专为百度量身打造"><a href="#安装hexo-generator-baidu-sitemap插件，专为百度量身打造" class="headerlink" title="安装hexo-generator-baidu-sitemap插件，专为百度量身打造"></a>安装hexo-generator-baidu-sitemap插件，专为百度量身打造</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>
<p>然后在 Hexo 根目录下的 <code>_config.yml</code> 里配置一下</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line"> <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>
<h4 id="推广博客与提交Sitemap"><a href="#推广博客与提交Sitemap" class="headerlink" title="推广博客与提交Sitemap"></a>推广博客与提交Sitemap</h4><p><a target="_blank" rel="noopener" href="http://zhanzhang.baidu.com/sitesubmit/index">百度网址提交入口</a><br><a target="_blank" rel="noopener" href="http://info.so.360.cn/site_submit.html">360网址提交入口</a></p>
<h4 id="添加百度站内搜索"><a href="#添加百度站内搜索" class="headerlink" title="添加百度站内搜索"></a>添加百度站内搜索</h4><p><a target="_blank" rel="noopener" href="http://zhanzhang.baidu.com/guide/index">点击进入</a>，点击其它工具-&gt;站内检索-&gt;现在使用-&gt;新建搜索引擎-&gt;查看代码，将代码里的id值复制，打开<code>/d/hexo/themes/jacman/_config.xml</code>，配置成如下即可。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_search:</span>     <span class="comment">## http://zn.baidu.com/</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">&quot;1433674487421172828&quot;</span> <span class="comment">## e.g. &quot;783281470518440642&quot;  for your baidu search id</span></span><br><span class="line">  <span class="attr">site:</span> <span class="string">http://zhannei.baidu.com/cse/search</span> <span class="comment">## your can change to your site instead of the default site</span></span><br></pre></td></tr></table></figure>
<h4 id="使用不蒜子添加访客统计"><a href="#使用不蒜子添加访客统计" class="headerlink" title="使用不蒜子添加访客统计"></a>使用不蒜子添加访客统计</h4><p>详情参考<a target="_blank" rel="noopener" href="http://ibruce.info/2015/04/04/busuanzi/">搞定你的网站计数</a>，具体做法很简单，就是在你的<code>themes/your themes/layout/_partial/footer.ejs</code>底部加入这段脚本</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>然后在<code>&lt;p class=&quot;copyright&quot;&gt;&lt;/p&gt;</code>中间添加如下统计信息即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本站总访问量 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> 次, 访客数 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_uv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> 人次, 本文总阅读量 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_page_pv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> 次</span><br></pre></td></tr></table></figure>
<p>不蒜子的官方服务网站是<a target="_blank" rel="noopener" href="http://service.ibruce.info/">不蒜子</a>，目前最大的弊端就是不开放注册，所以对于运行了一段时间的网站，不蒜子的数据都是从1开始，没办法设置，只有等后期开放注册之后，登入网站才能对统计计数进行设置。</p>
<h3 id="Jacman主题相关"><a href="#Jacman主题相关" class="headerlink" title="Jacman主题相关"></a>Jacman主题相关</h3><h4 id="为jacman主题添加最新评论"><a href="#为jacman主题添加最新评论" class="headerlink" title="为jacman主题添加最新评论"></a>为jacman主题添加最新评论</h4><p>本方法针对使用hexo搭建Github Pages静态博客，并且使用jacman主题的童鞋们。</p>
<p>首先在<code>\themes\jacman\layout\_widget</code>目录下新建<code>latest_comment.ejs</code>，放入“多说”最新评论代码，其中“多说”的最新评论代码<a target="_blank" rel="noopener" href="http://dev.duoshuo.com/docs/4ff28d95552860f21f000010">点我获取</a>，注意修改<code>var duoshuoQuery = &#123;short_name:&quot;您的多说二级域名&quot;&#125;;</code>将其中的“short_name”设置为在多说配置的二级域名即可。在<code>latest_comment.ejs</code>的首行注意添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;asidetitle&quot;</span>&gt;</span>最新评论<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后进入<code>\themes\jacman\_config.yml</code>：在<code>widgets</code>下添加<code>latest_comment</code>即可，注意Windows下编码一定要采用UTF-8无BOM编码。</p>
<h4 id="为jacman主题添加热评文章"><a href="#为jacman主题添加热评文章" class="headerlink" title="为jacman主题添加热评文章"></a>为jacman主题添加热评文章</h4><p>与上一条类似，首先在<code>\themes\jacman\layout\_widget</code>目录下新建<code>hot_comments.ejs</code>，然后去你在多说网站的后台管理界面<code>http://codepub.duoshuo.com/admin/tools/</code>中点击工具-&gt;热评文章获取代码，将代码复制到<code>hot_comments.ejs</code>文件中。同样在行首添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;asidetitle&quot;</span>&gt;</span>热评文章<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在<code>_config.yml</code>中启用该widgets即可。</p>
<h4 id="Jacman主题问题解答"><a href="#Jacman主题问题解答" class="headerlink" title="Jacman主题问题解答"></a>Jacman主题问题解答</h4><p>Q：如何添加数学公式<code>mathjax</code>？<br>A：主题支持写<code>LaTex</code>数学公式。只需要在文章文件开头的<code>front-matter</code>中，加上一行<code>mathjax: true</code>，即可在文中写<code>LaTex</code>公式。</p>
<p>Q：自定义字体 ShowCustomFont<br>A：是否启用自定义字体，默认开启，主要用于显示网站底部的字体。如果你有一定前端基础可以修改 <strong>font.styl</strong> 替换为你喜欢的字体。</p>
<p>Q：图片默认都是居左的，我怎么设置能让图片居中呢？<br>A：使用 <code>&lt;img src=&quot;&quot; style=&quot;display:block;margin:auto&quot;/&gt;</code>的HTML标签或者是使用<code>&lt;center&gt;</code>包裹图片。</p>
<p>Q：如何建立一篇图片类文章（Gallery Post）？<br>A：使用<strong>hexo new photo “your titile”<strong>建立图片类文章，或者直接新建一个 Markdown 文件，将其</strong>front-matter</strong>修改为如下，即可看到主题为图片类文章提供的样式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: photo</span><br><span class="line">title: Gallery Post</span><br><span class="line">photos:</span><br><span class="line">- http://i.minus.com/ibobbTlfxZgITW.jpg</span><br><span class="line">- http://i.minus.com/iedpg90Y0exFS.jpg</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>Q：我在配置文件中给某一项设置了值，但为什么总是看不到效果啊？<br>A：<code>_config.yml</code>文件中的每个属性值前面必须留一个空格，建议在<code>Sublime/Notepad++</code>中开启显示所有空格模式。另每篇文章的<code>front-matter</code>也要注意这个问题。</p>
<p>Q：如何建立自我介绍页面（About页面）？<br>A：首先在主目录找到<code>_config.yml</code>，找到url添加<code>about_dir: about</code>到这个板块。然后在&#x2F;source里面建立about文件夹。在about文件夹里建立index.md。编辑index.md就和发布其他的文章一样，格式都一样。</p>
<p>Q：楼主我不喜欢你的配色，怎么换主题的颜色呢？<br>A：包括颜色在内的很多变量都在<code>jacman/source/css/_base/variable.styl</code>文件中，可以修改成你喜欢的。</p>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://wuchong.me/blog/2014/11/20/how-to-use-jacman/#">http://wuchong.me/blog/2014/11/20/how-to-use-jacman/#</a><br>[2] <a target="_blank" rel="noopener" href="https://pages.github.com/">https://pages.github.com/</a><br>[3] <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/05289a4bc8b2">http://www.jianshu.com/p/05289a4bc8b2</a><br>[4] <a target="_blank" rel="noopener" href="http://www.pchou.info/web-build/2014/07/04/build-github-blog-page-08.html">http://www.pchou.info/web-build/2014/07/04/build-github-blog-page-08.html</a><br>[5] <a target="_blank" rel="noopener" href="http://wuchong.me/blog/2014/11/20/how-to-use-jacman/">http://wuchong.me/blog/2014/11/20/how-to-use-jacman/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/50/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><span class="page-number current">51</span><a class="page-number" href="/page/52/">52</a><span class="space">&hellip;</span><a class="page-number" href="/page/56/">56</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/52/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">DJY</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
