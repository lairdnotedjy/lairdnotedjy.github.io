<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="baidu-site-verification" content="codeva-6wmKWl5hmx" />
<meta name="bytedance-verification-code" content="GcOf/MpQ8shZ5Hh/2hvr" />
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-33RJLY0818"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-33RJLY0818');
</script>

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.sovdating.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Hello dev">
<meta property="og:type" content="website">
<meta property="og:title" content="Sovdating Linux">
<meta property="og:url" content="https://www.sovdating.com/page/37/index.html">
<meta property="og:site_name" content="Sovdating Linux">
<meta property="og:description" content="Hello dev">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="DJY">
<meta property="article:tag" content="golang python linux ubuntu centos rust">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.sovdating.com/page/37/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/37/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Sovdating Linux - some code for program</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Sovdating Linux</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">some code for program</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">DJY</p>
  <div class="site-description" itemprop="description">Hello dev</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">554</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">94</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">389</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Maven-project-integrating-Lucene-Chinese-Segmentation-tools-Jcseg-and-Ansj/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Maven-project-integrating-Lucene-Chinese-Segmentation-tools-Jcseg-and-Ansj/" class="post-title-link" itemprop="url">Maven项目中Lucene集成中文分词工具Jcseg和Ansj</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-23 22:11:04" itemprop="dateCreated datePublished" datetime="2016-03-23T22:11:04+00:00">2016-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:20" itemprop="dateModified" datetime="2024-01-26T12:42:20+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h4><p><strong>Windows</strong>：Win7 64 bit<br><strong>Java</strong>：java version “1.8.0_45”；Java HotSpot(TM) 64-Bit Server VM<br><strong>Lucene</strong>：5.5<br><strong>Jcseg</strong>：1.9.7<br><strong>Ansj_seg</strong>：3.7.1<br><strong>Ansj_lucene5_plug</strong>：3.0<br><strong>Maven</strong>：3.3.3</p>
<h4 id="Lucene集成Jcseg"><a href="#Lucene集成Jcseg" class="headerlink" title="Lucene集成Jcseg"></a>Lucene集成Jcseg</h4><h5 id="Jcseg简介"><a href="#Jcseg简介" class="headerlink" title="Jcseg简介"></a>Jcseg简介</h5><p><strong>Jcseg</strong>是使用<strong>Java</strong>开发的一个开源中文分词器，使用流行的<strong>mmseg</strong>算法实现，有兴趣的可以参考<a target="_blank" rel="noopener" href="http://technology.chtsai.org/mmseg/">算法原文</a>，并且提供了最高版本的<strong>lucene</strong>、<strong>solr</strong>、<strong>elasticsearch</strong>的分词接口。</p>
<p><strong>Google Code</strong>最新版<strong>V1.9.6</strong>：<a target="_blank" rel="noopener" href="https://code.google.com/archive/p/jcseg/">https://code.google.com/archive/p/jcseg/</a><br><strong>Git OSChina</strong>最新版<strong>V1.9.7</strong>：<a target="_blank" rel="noopener" href="http://git.oschina.net/lionsoul/jcseg">http://git.oschina.net/lionsoul/jcseg</a><br><strong>GitHub</strong>地址：<a target="_blank" rel="noopener" href="https://github.com/lionsoul2014/jcseg">https://github.com/lionsoul2014/jcseg</a></p>
<h5 id="Maven编译Jcseg项目源码"><a href="#Maven编译Jcseg项目源码" class="headerlink" title="Maven编译Jcseg项目源码"></a>Maven编译Jcseg项目源码</h5><p>从<strong>OSChina</strong>上下载<strong>ZIP</strong>压缩包之后，解压即可，文件夹重命名为<strong>jcseg</strong>，进入<strong>jcseg</strong>根目录，使用<strong>mvn clean package</strong>命令打包，前提是已经配置过<strong>maven</strong>环境变量，否则<strong>mvn</strong>无法识别。成功打包之后如下所示</p>
<blockquote>
<p>[INFO] Reactor Summary:<br>[INFO]<br>[INFO] jcseg-core ………………………………….. SUCCESS [ 13.469 s]<br>[INFO] jcseg-analyzer ………………………………. SUCCESS [  4.601 s]<br>[INFO] jcseg-elasticsearch ………………………….. SUCCESS [  4.355 s]<br>[INFO] jcseg-server ………………………………… SUCCESS [  7.346 s]<br>[INFO] jcseg ………………………………………. SUCCESS [  0.113 s]<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 30.134 s<br>[INFO] Finished at: 2016-03-22T16:47:59+08:00<br>[INFO] Final Memory: 31M&#x2F;282M<br>[INFO] ————————————————————————</p>
</blockquote>
<h5 id="Maven将Jar包安装到本地仓库"><a href="#Maven将Jar包安装到本地仓库" class="headerlink" title="Maven将Jar包安装到本地仓库"></a>Maven将Jar包安装到本地仓库</h5><p>打开<strong>maven</strong>的<strong>settings.xml</strong>文件，配置本地仓库路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:/apache-maven-3.3.3/repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用<strong>maven</strong>命令<strong>mvn clean install</strong>将之前打包的<strong>jar</strong>文件安装到本地<strong>maven</strong>仓库中，成功安装如下所示</p>
<blockquote>
<p>[INFO] — maven-install-plugin:2.4:install (default-install) @ jcseg-server —<br>[INFO] Installing D:\jcseg\jcseg-server\target\jcseg-server-1.9.7.jar to D:\apache-maven-3.3.3\repo\org\lionsoul\jcseg\jcseg-server\1.9.7\jcseg-server-1.9.7.jar<br>[INFO] Installing D:\jcseg\jcseg-server\dependency-reduced-pom.xml to D:\apache-maven-3.3.3\repo\org\lionsoul\jcseg\jcseg-server\1.9.7\jcseg-server-1.9.7.pom<br>[INFO] Installing D:\jcseg\jcseg-server\target\jcseg-server-1.9.7-sources.jar to D:\apache-maven-3.3.3\repo\org\lionsoul\jcseg\jcseg-server\1.9.7\jcseg-server-1.9.7-sources.jar<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building jcseg 1.9.7<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] — maven-clean-plugin:2.5:clean (default-clean) @ jcseg —<br>[INFO]<br>[INFO] — maven-enforcer-plugin:1.0:enforce (enforce-maven) @ jcseg —<br>[INFO]<br>[INFO] — maven-install-plugin:2.4:install (default-install) @ jcseg —<br>[INFO] Installing D:\jcseg\pom.xml to D:\apache-maven-3.3.3\repo\org\lionsoul\jcseg\jcseg\1.9.7\jcseg-1.9.7.pom<br>[INFO] ————————————————————————<br>[INFO] Reactor Summary:<br>[INFO]<br>[INFO] jcseg-core ………………………………….. SUCCESS [ 10.195 s]<br>[INFO] jcseg-analyzer ………………………………. SUCCESS [  6.793 s]<br>[INFO] jcseg-elasticsearch ………………………….. SUCCESS [  3.815 s]<br>[INFO] jcseg-server ………………………………… SUCCESS [  5.745 s]<br>[INFO] jcseg ………………………………………. SUCCESS [  0.016 s]<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 26.687 s<br>[INFO] Finished at: 2016-03-22T16:53:28+08:00<br>[INFO] Final Memory: 31M&#x2F;253M<br>[INFO] ————————————————————————</p>
</blockquote>
<h5 id="Maven项目配置Jcseg"><a href="#Maven项目配置Jcseg" class="headerlink" title="Maven项目配置Jcseg"></a>Maven项目配置Jcseg</h5><p>如果按照默认添加依赖方式如下所示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.lionsoul.jcseg<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcseg-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>是无法成功引用到本地仓库中的<strong>jcseg</strong>的，这是因为，如果依赖的版本是<strong>RELEASE</strong>或者<strong>LATEST</strong>，则<strong>Maven</strong>基于更新策略读取所有远程仓库的元数据<strong>groupId&#x2F;artifactId&#x2F;maven-metadata.xml</strong>，将其与本地仓库的对应元数据合并，如果不指定依赖版本，也就是说当依赖版本不明晰的时候，如<strong>RELEASE</strong>、<strong>LATEST</strong>、<strong>SNAPSHOT</strong>，<strong>Maven</strong>就需要基于更新远程仓库的更新策略来检查更新。而我们知道<strong>jcseg</strong>是我们自己安装到本地仓库中的，远程仓库必然不存在对应的元数据文件，所以这时<strong>maven</strong>会报错，那么如何解决呢？</p>
<p>这时候就需要指定<strong>scope</strong>属性，<strong>scope</strong>用来指定依赖的范围，当<strong>scope</strong>指定的值是<strong>system</strong>的时候，<strong>Maven</strong>直接从本地文件系统解析构建，而不会去远程仓库查询。</p>
<p><strong>scope</strong>还有其它几种取值，说明如下</p>
<ul>
<li><strong>compile</strong>：编译依赖范围，如果没有指定，就会默认使用该依赖范围</li>
<li><strong>test</strong>：测试依赖范围，使用此依赖范围的<strong>Maven</strong>依赖，只对于测试<strong>classpath</strong>有效，典型的例子是<strong>JUnit</strong>，它只在编译测试代码及运行测试的时候才需要</li>
<li><strong>provided</strong>：已提供依赖范围，使用此依赖范围的<strong>Maven</strong>依赖，对于编译和测试<strong>classpath</strong>有效，但在运行时无效，典型的例子是<strong>servlet-api</strong>，编译和测试项目的时候需要该依赖，但在运行项目的时候，由于容器已经提供，就不需要<strong>Maven</strong>重复地引入一遍</li>
<li><strong>runtime</strong>：运行时依赖范围，使用此依赖范围的<strong>Maven</strong>依赖，对于测试和运行<strong>classpath</strong>有效，但在编译主代码时无效。典型的例子是<strong>JDBC</strong>驱动实现，项目主代码的编译只需要<strong>JDK</strong>提供的<strong>JDBC</strong>接口，只有在执行测试或者运行项目的时候才需要实现上述接口的具体<strong>JDBC</strong>驱动</li>
<li><strong>system</strong>：系统依赖范围，该依赖与三种<strong>classpath</strong>的关系，和<strong>provided</strong>依赖范围完全一致。但是，在使用<strong>system</strong>范围的依赖时必须通过<strong>systemPath</strong>元素显式地指定依赖文件路径。通常此依赖与本机系统绑定，造成构建的不可移植，应该谨慎使用。</li>
<li><strong>import</strong>：导入依赖范围，该依赖范围不会对三种<strong>classpath</strong>产生实际的影响，三种<strong>classpath</strong>指的是，编译<strong>classpath</strong>、测试<strong>classpath</strong>、运行时<strong>classpath</strong></li>
</ul>
<p>所以解决方案已经有了，如下所示，其它依赖本地仓库中的<strong>jar</strong>包配置类似：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在systemPath中亦可指定其它位置，包括相对路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.lionsoul.jcseg<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcseg-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>D:/apache-maven-3.3.3/repo/org/lionsoul/jcseg/jcseg-core/1.9.7/jcseg-core-1.9.7.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.lionsoul.jcseg<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcseg-analyzer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>D:/apache-maven-3.3.3/repo/org/lionsoul/jcseg/jcseg-analyzer/1.9.7/jcseg-analyzer-1.9.7.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="Lucene集成Jcseg的测试代码"><a href="#Lucene集成Jcseg的测试代码" class="headerlink" title="Lucene集成Jcseg的测试代码"></a>Lucene集成Jcseg的测试代码</h5><p>将<strong>jcseg</strong>源码包中的<strong>lexicon</strong>和<strong>jcseg.properties</strong>两个文件复制到<strong>src&#x2F;main&#x2F;resources</strong>下，并修改<strong>jcseg.properties</strong>中的<code>lexicon.path = src/main/resources/lexicon</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ParseException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;jcseg是使用Java开发的一款开源的中文分词器, 基于流行的mmseg算法实现，分词准确率高达98.4%, 支持中文人名识别, 同义词匹配, 停止词过滤等。并且提供了最新版本的lucene,solr,elasticsearch分词接口。&quot;</span>;</span><br><span class="line">    <span class="comment">//如果不知道选择哪个Directory的子类，那么推荐使用FSDirectory.open()方法来打开目录</span></span><br><span class="line">    <span class="type">Analyzer</span> <span class="variable">analyzer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JcsegAnalyzer5X</span>(JcsegTaskConfig.COMPLEX_MODE);</span><br><span class="line">    <span class="comment">//非必须(用于修改默认配置): 获取分词任务配置实例</span></span><br><span class="line">    <span class="type">JcsegAnalyzer5X</span> <span class="variable">jcseg</span> <span class="operator">=</span> (JcsegAnalyzer5X) analyzer;</span><br><span class="line">    <span class="type">JcsegTaskConfig</span> <span class="variable">config</span> <span class="operator">=</span> jcseg.getTaskConfig();</span><br><span class="line">    <span class="comment">//追加同义词, 需要在 jcseg.properties中配置jcseg.loadsyn=1</span></span><br><span class="line">    config.setAppendCJKSyn(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//追加拼音, 需要在jcseg.properties中配置jcseg.loadpinyin=1</span></span><br><span class="line">    config.setAppendCJKPinyin(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//更多配置, 请查看 org.lionsoul.jcseg.tokenizer.core.JcsegTaskConfig</span></span><br><span class="line">    <span class="type">Directory</span> <span class="variable">directory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RAMDirectory</span>();</span><br><span class="line">    indexWriterConfig = <span class="keyword">new</span> <span class="title class_">IndexWriterConfig</span>(analyzer);</span><br><span class="line">    indexWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);</span><br><span class="line">    indexWriter = <span class="keyword">new</span> <span class="title class_">IndexWriter</span>(directory, indexWriterConfig);</span><br><span class="line">    <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Document</span>();</span><br><span class="line">    document.add(<span class="keyword">new</span> <span class="title class_">StringField</span>(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;1000&quot;</span>, Field.Store.YES));</span><br><span class="line">    document.add(<span class="keyword">new</span> <span class="title class_">TextField</span>(<span class="string">&quot;text&quot;</span>, text, Field.Store.YES));</span><br><span class="line">    indexWriter.addDocument(document);</span><br><span class="line">    indexWriter.commit();</span><br><span class="line">    <span class="type">IndexReader</span> <span class="variable">indexReader</span> <span class="operator">=</span> DirectoryReader.open(directory);</span><br><span class="line">    <span class="type">IndexSearcher</span> <span class="variable">indexSearcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexSearcher</span>(indexReader);</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;中文分词器&quot;</span>;</span><br><span class="line">    <span class="type">QueryParser</span> <span class="variable">queryParser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryParser</span>(<span class="string">&quot;text&quot;</span>, analyzer);</span><br><span class="line">    queryParser.setDefaultOperator(QueryParser.Operator.AND);</span><br><span class="line">    <span class="type">Query</span> <span class="variable">parse</span> <span class="operator">=</span> queryParser.parse(key);</span><br><span class="line">    System.out.println(parse);</span><br><span class="line">    <span class="type">TopDocs</span> <span class="variable">search</span> <span class="operator">=</span> indexSearcher.search(parse, <span class="number">10</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;命中数：&quot;</span> + search.totalHits);</span><br><span class="line">    ScoreDoc[] scoreDocs = search.scoreDocs;</span><br><span class="line">    <span class="keyword">for</span> (ScoreDoc sd : scoreDocs) &#123;</span><br><span class="line">        <span class="type">Document</span> <span class="variable">doc</span> <span class="operator">=</span> indexSearcher.doc(sd.doc);</span><br><span class="line">        System.out.println(<span class="string">&quot;得分：&quot;</span> + sd.score);</span><br><span class="line">        System.out.println(doc.get(<span class="string">&quot;text&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果输出</p>
<blockquote>
<p>+text:中文 +text:zhong wen +text:国语 +text:分词器 +text:fen ci qi<br>命中数：1<br>得分：0.080312796<br>jcseg是使用Java开发的一款开源的中文分词器, 基于流行的mmseg算法实现，分词准确率高达98.4%, 支持中文人名识别, 同义词匹配, 停止词过滤等。并且提供了最新版本的lucene,solr,elasticsearch分词接口。</p>
</blockquote>
<h4 id="Lucene集成Ansj"><a href="#Lucene集成Ansj" class="headerlink" title="Lucene集成Ansj"></a>Lucene集成Ansj</h4><h5 id="Ansj简介"><a href="#Ansj简介" class="headerlink" title="Ansj简介"></a>Ansj简介</h5><p><strong>Ansj</strong>是一个<strong>ICTCLAS</strong>的<strong>Java</strong>实现。基本上重写了所有的数据结构和算法。词典是用的开源版的<strong>ICTCLAS</strong>所提供的。并且进行了部分的人工优化。</p>
<p>还是一个基于<strong>n-Gram+<strong>条件随机场模型的中文分词的</strong>Java</strong>实现。分词速度达到每秒钟大约200万字左右（Mac Air下测试），准确率能达到96%以上。目前实现了中文分词、中文姓名识别、用户自定义词典。可以应用到自然语言处理等方面，适用于对分词效果要求高的各种项目。</p>
<p><strong>GitHub</strong>项目地址：<a target="_blank" rel="noopener" href="https://github.com/NLPchina/ansj_seg">https://github.com/NLPchina/ansj_seg</a><br><strong>Ansj</strong>的仓库地址，包括针对<strong>Lucene</strong>的插件：<a target="_blank" rel="noopener" href="http://maven.nlpcn.org/org/ansj/">http://maven.nlpcn.org/org/ansj/</a></p>
<h5 id="Maven项目配置Ansj"><a href="#Maven项目配置Ansj" class="headerlink" title="Maven项目配置Ansj"></a>Maven项目配置Ansj</h5><p>根据官方手册，在<strong>pom.xml</strong>文件中加入依赖，如下所示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.ansj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ansj_seg<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.ansj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ansj_lucene5_plug<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但是你应该能想到，中央仓库或者镜像仓库中并没有<strong>Ansj</strong>啊，那上述依赖必然报错。对的，所以还需要在<strong>settings.xml</strong>加入<strong>Ansj</strong>的仓库地址</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>mvn-repo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>ansj maven repo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.nlpcn.org/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你使用了中央仓库的镜像请注意如下内容，如果你没使用镜像请忽略之。</p>
<p>一般在天朝，访问<strong>maven</strong>中央仓库速度是很慢的，所以国内一般会用某个中央仓库的镜像，而我用的是<strong>OSChina</strong>的镜像，在镜像的配置中，如果你使用了通配符，那么需要注意该通配符同样会屏蔽掉<strong>Ansj</strong>仓库的地址，所以需要在通配符之后排除掉<strong>Ansj</strong>的仓库地址</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-osc<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*,!mvn-repo<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;如果使用这种方式会屏蔽Ansj仓库--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus osc<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-osc-thirdparty<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>thirdparty<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus osc thirdparty<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/repositories/thirdparty/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当然如果你没使用通配符，而是指定对<strong>Maven</strong>中央仓库做镜像的话，就无需使用<code>!mvn-repo</code>进行排除了，其中<strong>mvn-repo</strong>是<strong>Ansj</strong>仓库的<strong>ID</strong>。指定对<strong>Maven</strong>中央仓库做镜像配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-osc<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus osc<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-osc-thirdparty<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>thirdparty<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus osc thirdparty<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.oschina.net/content/repositories/thirdparty/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="Maven之镜像"><a href="#Maven之镜像" class="headerlink" title="Maven之镜像"></a>Maven之镜像</h5><p>如果仓库<strong>X</strong>可以提供仓库<strong>Y</strong>存储的所有内容，那么就可以认为<strong>X</strong>是<strong>Y</strong>的一个镜像。换句话说，任何一个可以从仓库<strong>Y</strong>获得的构建，都能够从它的镜像中获取。</p>
<p>关于镜像的一个更为常见的用法是结合私服。由于私服可以代理任何外部的公共仓库，因此，对于组织内部的<strong>Maven</strong>用户来说，使用一个私服地址就等于使用了所有需要的外部仓库，这可以将配置集中到私服，从而简化<strong>Maven</strong>本身的配置。</p>
<p>有关镜像的一些配置说明如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>：匹配所有远程仓库</span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>external:*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>：匹配所有远程仓库，使用localhost的除外，使用file://协议的除外。也就是说，匹配所有不在本机上的远程仓库</span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>repo1,repo2<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>：匹配仓库repo1和repo2，使用逗号分隔多个远程仓库</span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*,!repo1<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>：匹配所有远程仓库，repo1除外，使用感叹号将仓库从匹配中排除</span><br></pre></td></tr></table></figure>
<p>需要注意的是，由于镜像仓库完全屏蔽了被镜像仓库，当镜像仓库不稳定或者停止服务的时候，<strong>Maven</strong>仍将无法访问被镜像仓库，因而将无法下载构建。</p>
<h5 id="Maven中自定义变量"><a href="#Maven中自定义变量" class="headerlink" title="Maven中自定义变量"></a>Maven中自定义变量</h5><p>通常在依赖一个项目多个组件的时候，为每一个组件单独指定版本号是可以的，但是当升级版本号的时候，就需要对每个组件都做升级，很麻烦，这时就需要自定义变量了。在<strong>pom.xml</strong>中定义如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用时，直接在<strong>version</strong>中引用标签名即可，例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h5 id="Maven内置变量"><a href="#Maven内置变量" class="headerlink" title="Maven内置变量"></a>Maven内置变量</h5><p><strong>Maven</strong>本身就内置了很多预定义变量，可以直接引用，选取一些举例如下</p>
<ul>
<li>内置属性<ul>
<li><strong>${basedir}</strong> represents the directory containing pom.xml</li>
<li><strong>${version}</strong> equivalent to <strong>${project.version}</strong> or <strong>${pom.version}</strong></li>
<li><strong>${project.basedir}</strong> 同 <strong>${basedir}</strong></li>
<li><strong>${project.baseUri}</strong> 表示项目文件地址</li>
<li><strong>${maven.build.timestamp}</strong> 表示项目构件开始时间;</li>
<li><strong>${maven.build.timestamp.format}</strong> 表示属性 <strong>${maven.build.timestamp}</strong> 的展示格式，默认值为yyyyMMdd-HHmm</li>
</ul>
</li>
<li>POM属性<ul>
<li><strong>${project.build.directory}</strong> results in the path to your “target” dir, this is the same as <strong>${pom.project.build.directory}</strong></li>
<li><strong>${project.build.outputDirectory}</strong> results in the path to your “target&#x2F;classes” dir</li>
<li><strong>${project.name}</strong> refers to the name of the project</li>
<li><strong>${project.version}</strong> refers to the version of the project</li>
<li><strong>${project.build.finalName}</strong> refers to the final name of the file created when the built project is packaged</li>
</ul>
</li>
<li>Settings文件属性<ul>
<li><strong>${settings.localRepository}</strong> refers to the path of the user’s local repository</li>
</ul>
</li>
<li>Java系统属性<ul>
<li>使用<code>mvn help:system</code>命令可以查看所有的<strong>Java</strong>系统属性</li>
<li><code>System.getProperties()</code>可以得到所有的<strong>Java</strong>属性</li>
<li><strong>${user.home}</strong> 表示用户目录</li>
<li><strong>${java.home}</strong> specifies the path to the current JRE_HOME environment use with relative paths to get for example:<code>&lt;jvm&gt;$&#123;java.home&#125;../bin/java.exe&lt;/jvm&gt;</code></li>
</ul>
</li>
<li>环境变量属性<ul>
<li><strong>${env.M2_HOME}</strong> returns the Maven2 installation path.</li>
<li><strong>${env.JAVA_HOME}</strong> 表示JAVA_HOME环境变量的值;</li>
</ul>
</li>
<li>自定义属性<ul>
<li><code>&lt;properties&gt;&lt;my.version&gt;hello&lt;/my.version&gt;&lt;/properties&gt;</code>则引用 **${my.version}**就会得到值hello</li>
</ul>
</li>
</ul>
<h5 id="Lucene集成Ansj的测试代码"><a href="#Lucene集成Ansj的测试代码" class="headerlink" title="Lucene集成Ansj的测试代码"></a>Lucene集成Ansj的测试代码</h5><p><strong>Ansj In Lucene</strong>的官方参考文档：<a target="_blank" rel="noopener" href="http://nlpchina.github.io/ansj_seg/">http://nlpchina.github.io/ansj_seg/</a></p>
<p>到<a target="_blank" rel="noopener" href="https://github.com/NLPchina/ansj_seg">https://github.com/NLPchina/ansj_seg</a> 下载<strong>ZIP</strong>压缩文件，解压，将其中的<strong>library</strong>文件夹和<code>library.properties</code>文件拷贝到<strong>maven</strong>项目下的<code>src/main/resources</code>中，修改<code>library.properties</code>内容如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#redress dic file path</span></span><br><span class="line">ambiguityLibrary=src/main/resources/library/ambiguity.dic</span><br><span class="line"><span class="comment">#path of userLibrary this is default library</span></span><br><span class="line">userLibrary=src/main/resources/library/default.dic</span><br><span class="line"><span class="comment">#path of crfModel</span></span><br><span class="line">crfModel=src/main/resources/library/crf.model</span><br><span class="line"><span class="comment">#set real name</span></span><br><span class="line">isRealName=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>Lucene</strong>集成<strong>Ansj</strong>测试代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.ansj.library.UserDefineLibrary;</span><br><span class="line"><span class="keyword">import</span> org.ansj.lucene5.AnsjAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.TokenStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.tokenattributes.CharTermAttribute;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.CorruptIndexException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.DirectoryReader;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriterConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.queryparser.classic.ParseException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.queryparser.classic.QueryParser;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.IndexSearcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.Query;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TopDocs;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.Highlighter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.InvalidTokenOffsetsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.QueryScorer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.SimpleHTMLFormatter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.Directory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.RAMDirectory;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.tartarus.snowball.ext.PorterStemmer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.io.StringReader;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Analyzer</span> <span class="variable">ca</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnsjAnalyzer</span>();</span><br><span class="line">        <span class="type">Reader</span> <span class="variable">sentence</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringReader</span>(</span><br><span class="line">                <span class="string">&quot;\n\n\n\n\n\n\n我从小就不由自主地认为自己长大以后一定得成为一个象我父亲一样的画家, 可能是父母潜移默化的影响。其实我根本不知道作为画家意味着什么，我是否喜欢，最重要的是否适合我，我是否有这个才华。其实人到中年的我还是不确定我最喜欢什么，最想做的是什么？我相信很多人和我一样有同样的烦恼。毕竟不是每个人都能成为作文里的宇航员，科学家和大教授。知道自己适合做什么，喜欢做什么，能做好什么其实是个非常困难的问题。&quot;</span>);</span><br><span class="line">        <span class="type">TokenStream</span> <span class="variable">ts</span> <span class="operator">=</span> ca.tokenStream(<span class="string">&quot;sentence&quot;</span>, sentence);</span><br><span class="line">        System.out.println(<span class="string">&quot;start: &quot;</span> + (<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        <span class="type">long</span> <span class="variable">before</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (ts.incrementToken()) &#123;</span><br><span class="line">            System.out.println(ts.getAttribute(CharTermAttribute.class));</span><br><span class="line">        &#125;</span><br><span class="line">        ts.close();</span><br><span class="line">        <span class="type">long</span> <span class="variable">now</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;time: &quot;</span> + (now - before) / <span class="number">1000.0</span> + <span class="string">&quot; s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">indexTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ParseException &#123;</span><br><span class="line">        <span class="type">Analyzer</span> <span class="variable">analyzer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnsjAnalyzer</span>();</span><br><span class="line">        Directory directory;</span><br><span class="line">        IndexWriter iwriter;</span><br><span class="line">        <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;季德胜蛇药片 10片*6板 &quot;</span>;</span><br><span class="line">        UserDefineLibrary.insertWord(<span class="string">&quot;蛇药片&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">        <span class="type">IndexWriterConfig</span> <span class="variable">ic</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexWriterConfig</span>(analyzer);</span><br><span class="line">        <span class="comment">// 建立内存索引对象</span></span><br><span class="line">        directory = <span class="keyword">new</span> <span class="title class_">RAMDirectory</span>();</span><br><span class="line">        iwriter = <span class="keyword">new</span> <span class="title class_">IndexWriter</span>(directory, ic);</span><br><span class="line">        addContent(iwriter, text);</span><br><span class="line">        iwriter.commit();</span><br><span class="line">        iwriter.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;索引建立完毕&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;index ok to search!&quot;</span>);</span><br><span class="line">        search(analyzer, directory, <span class="string">&quot;\&quot;季德胜蛇药片\&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(Analyzer queryAnalyzer, Directory directory, String queryStr)</span> <span class="keyword">throws</span> IOException, ParseException &#123;</span><br><span class="line">        IndexSearcher isearcher;</span><br><span class="line">        <span class="type">DirectoryReader</span> <span class="variable">directoryReader</span> <span class="operator">=</span> DirectoryReader.open(directory);</span><br><span class="line">        <span class="comment">// 查询索引</span></span><br><span class="line">        isearcher = <span class="keyword">new</span> <span class="title class_">IndexSearcher</span>(directoryReader);</span><br><span class="line">        <span class="type">QueryParser</span> <span class="variable">tq</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryParser</span>(<span class="string">&quot;text&quot;</span>, queryAnalyzer);</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> tq.parse(queryStr);</span><br><span class="line">        System.out.println(query);</span><br><span class="line">        <span class="type">TopDocs</span> <span class="variable">hits</span> <span class="operator">=</span> isearcher.search(query, <span class="number">5</span>);</span><br><span class="line">        System.out.println(queryStr + <span class="string">&quot;:共找到&quot;</span> + hits.totalHits + <span class="string">&quot;条记录!&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; hits.scoreDocs.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">docId</span> <span class="operator">=</span> hits.scoreDocs[i].doc;</span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> isearcher.doc(docId);</span><br><span class="line">            System.out.println(toHighlighter(queryAnalyzer, query, document));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">toHighlighter</span><span class="params">(Analyzer analyzer, Query query, Document doc)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> <span class="string">&quot;text&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SimpleHTMLFormatter</span> <span class="variable">simpleHtmlFormatter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleHTMLFormatter</span>(<span class="string">&quot;&lt;font color=\&quot;red\&quot;&gt;&quot;</span>, <span class="string">&quot;&lt;/font&gt;&quot;</span>);</span><br><span class="line">            <span class="type">Highlighter</span> <span class="variable">highlighter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Highlighter</span>(simpleHtmlFormatter, <span class="keyword">new</span> <span class="title class_">QueryScorer</span>(query));</span><br><span class="line">            <span class="type">TokenStream</span> <span class="variable">tokenStream1</span> <span class="operator">=</span> analyzer.tokenStream(<span class="string">&quot;text&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringReader</span>(doc.get(field)));</span><br><span class="line">            <span class="type">String</span> <span class="variable">highlighterStr</span> <span class="operator">=</span> highlighter.getBestFragment(tokenStream1, doc.get(field));</span><br><span class="line">            <span class="keyword">return</span> highlighterStr == <span class="literal">null</span> ? doc.get(field) : highlighterStr;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | InvalidTokenOffsetsException e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addContent</span><span class="params">(IndexWriter iwriter, String text)</span> <span class="keyword">throws</span> CorruptIndexException, IOException &#123;</span><br><span class="line">        <span class="type">Document</span> <span class="variable">doc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Document</span>();</span><br><span class="line">        doc.add(<span class="keyword">new</span> <span class="title class_">Field</span>(<span class="string">&quot;text&quot;</span>, text, Field.Store.YES, Field.Index.ANALYZED));</span><br><span class="line">        iwriter.addDocument(doc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">poreterTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PorterStemmer</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PorterStemmer</span>();</span><br><span class="line">        System.out.println(ps.stem());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本以为大功告成，怀着激动的心情运行<strong>Junit</strong>单元测试，但是天雷滚滚啊，报错啊，想想这可是官方给的测试<strong>Demo</strong>啊，居然报错！！！</p>
<p>废话不说，上结果：</p>
<blockquote>
<p><strong>java.lang.AssertionError: TokenStream implementation classes or at least their incrementToken() implementation must be final</strong></p>
</blockquote>
<p><strong>Notes 2016&#x2F;3&#x2F;27</strong>：经反馈，作者已<strong>fix</strong>此<strong>Bug</strong>，但本文不再做更新。<strong>Issue</strong>编号：<a target="_blank" rel="noopener" href="https://github.com/NLPchina/ansj_seg/issues/249">#249</a>，反馈地址：<a target="_blank" rel="noopener" href="https://github.com/NLPchina/ansj_seg/issues/249#event-604309598">https://github.com/NLPchina/ansj_seg/issues/249#event-604309598</a></p>
<p>说的很清楚啊，<strong>Ansj</strong>作者自己测试通过否？要么将类修饰为<strong>final</strong>，要么将<strong>incrementToken()<strong>方法修饰为</strong>final</strong>，这是为啥哩？</p>
<p>查源码，从<strong>AnsjAnalyzer</strong>追踪到<strong>AnsjTokenizer</strong>，再追踪到<strong>Tokenizer</strong>，别停，继续追踪<strong>TokenStream</strong>，该类位于<code>org.apache.lucene.analysis</code>包下，在该类的<strong>Doc</strong>注释中，终于发现如下说明</p>
<blockquote>
<p>The {@code TokenStream}-API in Lucene is based on the decorator pattern. Therefore all non-abstract subclasses must be final or have at least a final implementation of {@link #incrementToken}! This is checked when Java assertions are enabled.</p>
</blockquote>
<p>意思是说所有的非抽象子类必须是<strong>final</strong>的或者至少有一个<strong>final</strong>修饰的<strong>incrementToken()<strong>覆写方法。但是</strong>Ansj</strong>针对<strong>Lucene</strong>的插件中，这两者都没有做！！！</p>
<h5 id="Lucene集成Ansj报错解决方案"><a href="#Lucene集成Ansj报错解决方案" class="headerlink" title="Lucene集成Ansj报错解决方案"></a>Lucene集成Ansj报错解决方案</h5><ol>
<li>既然<strong>Ansj</strong>两者都没做，那么一种方法就是修改<strong>Ansj</strong>的源码，但是我们使用的是<strong>Ansj</strong>仓库中提供的<strong>Jar</strong>包，修改源码之后，只能本地引用修改后的<strong>Jar</strong>包，不方便项目的迁移，所以不采用</li>
<li>提供一个<strong>final</strong>修饰的覆写方法<strong>incrementToken()<strong>，通过实现两个内部类，分别继承自</strong>AnsjAnalyzer</strong>和<strong>AnsjTokenizer</strong>，在使用的时候调用自己实现的内部类</li>
</ol>
<p>修复<strong>BUG</strong>后的代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.ansj.library.UserDefineLibrary;</span><br><span class="line"><span class="keyword">import</span> org.ansj.lucene.util.AnsjTokenizer;</span><br><span class="line"><span class="keyword">import</span> org.ansj.lucene5.AnsjAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.ansj.splitWord.Analysis;</span><br><span class="line"><span class="keyword">import</span> org.ansj.splitWord.analysis.IndexAnalysis;</span><br><span class="line"><span class="keyword">import</span> org.ansj.splitWord.analysis.ToAnalysis;</span><br><span class="line"><span class="keyword">import</span> org.ansj.splitWord.analysis.UserDefineAnalysis;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.TokenStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Tokenizer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.tokenattributes.CharTermAttribute;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.CorruptIndexException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.DirectoryReader;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriterConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.queryparser.classic.ParseException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.queryparser.classic.QueryParser;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.IndexSearcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.Query;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TopDocs;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.Highlighter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.InvalidTokenOffsetsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.QueryScorer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.highlight.SimpleHTMLFormatter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.Directory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.RAMDirectory;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.nlpcn.commons.lang.tire.domain.Forest;</span><br><span class="line"><span class="keyword">import</span> org.tartarus.snowball.ext.PorterStemmer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.io.StringReader;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Analyzer</span> <span class="variable">ca</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAnsjAnalyzer</span>();</span><br><span class="line">        <span class="type">Reader</span> <span class="variable">sentence</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringReader</span>(</span><br><span class="line">                <span class="string">&quot;\n\n\n\n\n\n\n我从小就不由自主地认为自己长大以后一定得成为一个象我父亲一样的画家, 可能是父母潜移默化的影响。其实我根本不知道作为画家意味着什么，我是否喜欢，最重要的是否适合我，我是否有这个才华。其实人到中年的我还是不确定我最喜欢什么，最想做的是什么？我相信很多人和我一样有同样的烦恼。毕竟不是每个人都能成为作文里的宇航员，科学家和大教授。知道自己适合做什么，喜欢做什么，能做好什么其实是个非常困难的问题。&quot;</span>);</span><br><span class="line">        <span class="type">TokenStream</span> <span class="variable">ts</span> <span class="operator">=</span> ca.tokenStream(<span class="string">&quot;sentence&quot;</span>, sentence);</span><br><span class="line">        System.out.println(<span class="string">&quot;start: &quot;</span> + (<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        <span class="type">long</span> <span class="variable">before</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (ts.incrementToken()) &#123;</span><br><span class="line">            System.out.println(ts.getAttribute(CharTermAttribute.class));</span><br><span class="line">        &#125;</span><br><span class="line">        ts.close();</span><br><span class="line">        <span class="type">long</span> <span class="variable">now</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;time: &quot;</span> + (now - before) / <span class="number">1000.0</span> + <span class="string">&quot; s&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyAnsjTokenizer</span> <span class="keyword">extends</span> <span class="title class_">AnsjTokenizer</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyAnsjTokenizer</span><span class="params">(Analysis ta, Set&lt;String&gt; filter)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(ta, filter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">incrementToken</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">super</span>.incrementToken();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyAnsjAnalyzer</span> <span class="keyword">extends</span> <span class="title class_">AnsjAnalyzer</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> Set&lt;String&gt; filter;</span><br><span class="line">        <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyAnsjAnalyzer</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyAnsjAnalyzer</span><span class="params">(String type, Set&lt;String&gt; filter)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(type, filter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> TokenStreamComponents <span class="title function_">createComponents</span><span class="params">(String text)</span> &#123;</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">StringReader</span>(text));</span><br><span class="line">            <span class="type">Tokenizer</span> <span class="variable">tokenizer</span> <span class="operator">=</span> getTokenizer(reader, <span class="built_in">this</span>.type, <span class="built_in">this</span>.filter);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TokenStreamComponents</span>(tokenizer);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Tokenizer <span class="title function_">getTokenizer</span><span class="params">(BufferedReader reader, String type, Set&lt;String&gt; filter)</span> &#123;</span><br><span class="line">            AnsjTokenizer tokenizer;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;user&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">                tokenizer = <span class="keyword">new</span> <span class="title class_">MyAnsjTokenizer</span>(<span class="keyword">new</span> <span class="title class_">UserDefineAnalysis</span>(reader, <span class="keyword">new</span> <span class="title class_">Forest</span>[<span class="number">0</span>]), filter);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;index&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">                tokenizer = <span class="keyword">new</span> <span class="title class_">MyAnsjTokenizer</span>(<span class="keyword">new</span> <span class="title class_">IndexAnalysis</span>(reader, <span class="keyword">new</span> <span class="title class_">Forest</span>[<span class="number">0</span>]), filter);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tokenizer = <span class="keyword">new</span> <span class="title class_">MyAnsjTokenizer</span>(<span class="keyword">new</span> <span class="title class_">ToAnalysis</span>(reader, <span class="keyword">new</span> <span class="title class_">Forest</span>[<span class="number">0</span>]), filter);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> tokenizer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">indexTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ParseException &#123;</span><br><span class="line">        <span class="type">Analyzer</span> <span class="variable">analyzer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAnsjAnalyzer</span>();</span><br><span class="line">        Directory directory;</span><br><span class="line">        IndexWriter iwriter;</span><br><span class="line">        <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;季德胜蛇药片 10片*6板 &quot;</span>;</span><br><span class="line">        UserDefineLibrary.insertWord(<span class="string">&quot;蛇药片&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">        <span class="type">IndexWriterConfig</span> <span class="variable">ic</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexWriterConfig</span>(analyzer);</span><br><span class="line">        <span class="comment">// 建立内存索引对象</span></span><br><span class="line">        directory = <span class="keyword">new</span> <span class="title class_">RAMDirectory</span>();</span><br><span class="line">        iwriter = <span class="keyword">new</span> <span class="title class_">IndexWriter</span>(directory, ic);</span><br><span class="line">        addContent(iwriter, text);</span><br><span class="line">        iwriter.commit();</span><br><span class="line">        iwriter.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;索引建立完毕&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;index ok to search!&quot;</span>);</span><br><span class="line">        search(analyzer, directory, <span class="string">&quot;\&quot;季德胜蛇药片\&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(Analyzer queryAnalyzer, Directory directory, String queryStr)</span> <span class="keyword">throws</span> IOException, ParseException &#123;</span><br><span class="line">        IndexSearcher isearcher;</span><br><span class="line">        <span class="type">DirectoryReader</span> <span class="variable">directoryReader</span> <span class="operator">=</span> DirectoryReader.open(directory);</span><br><span class="line">        <span class="comment">// 查询索引</span></span><br><span class="line">        isearcher = <span class="keyword">new</span> <span class="title class_">IndexSearcher</span>(directoryReader);</span><br><span class="line">        <span class="type">QueryParser</span> <span class="variable">tq</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryParser</span>(<span class="string">&quot;text&quot;</span>, queryAnalyzer);</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> tq.parse(queryStr);</span><br><span class="line">        System.out.println(query);</span><br><span class="line">        <span class="type">TopDocs</span> <span class="variable">hits</span> <span class="operator">=</span> isearcher.search(query, <span class="number">5</span>);</span><br><span class="line">        System.out.println(queryStr + <span class="string">&quot;:共找到&quot;</span> + hits.totalHits + <span class="string">&quot;条记录!&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; hits.scoreDocs.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">docId</span> <span class="operator">=</span> hits.scoreDocs[i].doc;</span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> isearcher.doc(docId);</span><br><span class="line">            System.out.println(toHighlighter(queryAnalyzer, query, document));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">toHighlighter</span><span class="params">(Analyzer analyzer, Query query, Document doc)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> <span class="string">&quot;text&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SimpleHTMLFormatter</span> <span class="variable">simpleHtmlFormatter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleHTMLFormatter</span>(<span class="string">&quot;&lt;font color=\&quot;red\&quot;&gt;&quot;</span>, <span class="string">&quot;&lt;/font&gt;&quot;</span>);</span><br><span class="line">            <span class="type">Highlighter</span> <span class="variable">highlighter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Highlighter</span>(simpleHtmlFormatter, <span class="keyword">new</span> <span class="title class_">QueryScorer</span>(query));</span><br><span class="line">            <span class="type">TokenStream</span> <span class="variable">tokenStream1</span> <span class="operator">=</span> analyzer.tokenStream(<span class="string">&quot;text&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringReader</span>(doc.get(field)));</span><br><span class="line">            <span class="type">String</span> <span class="variable">highlighterStr</span> <span class="operator">=</span> highlighter.getBestFragment(tokenStream1, doc.get(field));</span><br><span class="line">            <span class="keyword">return</span> highlighterStr == <span class="literal">null</span> ? doc.get(field) : highlighterStr;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | InvalidTokenOffsetsException e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addContent</span><span class="params">(IndexWriter iwriter, String text)</span> <span class="keyword">throws</span> CorruptIndexException, IOException &#123;</span><br><span class="line">        <span class="type">Document</span> <span class="variable">doc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Document</span>();</span><br><span class="line">        doc.add(<span class="keyword">new</span> <span class="title class_">Field</span>(<span class="string">&quot;text&quot;</span>, text, Field.Store.YES, Field.Index.ANALYZED));</span><br><span class="line">        iwriter.addDocument(doc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">poreterTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PorterStemmer</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PorterStemmer</span>();</span><br><span class="line">        System.out.println(ps.stem());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行部分结果如下：</p>
<blockquote>
<p>信息: init user userLibrary ok path is : D:\Multi-module-project\Lucene\src\main\resources\library\default.dic<br>信息: init ambiguityLibrary ok!<br>信息: init core library ok use time :281<br>信息: init ngram ok use time :668<br>索引建立完毕<br>index ok to search!<br>text:”季德胜 蛇药片”<br>“季德胜蛇药片”:共找到1条记录!<br><font color="red">季德胜</font><font color="red">蛇药片</font> 10片*6板</p>
</blockquote>
<h5 id="Ansj设置词典路径"><a href="#Ansj设置词典路径" class="headerlink" title="Ansj设置词典路径"></a>Ansj设置词典路径</h5><ol>
<li><p>正规方式<br>创建<strong>library.properties</strong>中增加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#path of userLibrary 自定义词典路径</span></span><br><span class="line">userLibrary=library/userLibrary/userLibrary.dic</span><br><span class="line">ambiguityLibrary=library/ambiguity.dic</span><br></pre></td></tr></table></figure>
</li>
<li><p>在用词典未加载前可以通过，代码方式方式来加载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyStaticValue.userLibrary=[你的路径]</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用api加载。在程序运行的任何时间都可以。动态加载。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadLibrary.loadLibrary(String path)方式加载</span><br></pre></td></tr></table></figure>
<p>路径可以是具体文件也可以是一个目录，如果是一个目录，那么会扫描目录下的<strong>dic</strong>文件自动加入词典。</p>
</li>
</ol>
<h5 id="Lucene集成Ansj添加自定义词典"><a href="#Lucene集成Ansj添加自定义词典" class="headerlink" title="Lucene集成Ansj添加自定义词典"></a>Lucene集成Ansj添加自定义词典</h5><p>如果需要添加自己的自定义词典，参考<strong>default.dic</strong>格式即可。用户自定义词典的格式是<code>word[tab]nature[tab]freq</code>，<strong>example</strong>: 小李子 nr 100</p>
<h4 id="分布式分词组件Word"><a href="#分布式分词组件Word" class="headerlink" title="分布式分词组件Word"></a>分布式分词组件Word</h4><p><em><strong>Notes</strong></em>：另外发现了一个分布式中文分词组件，希望以后有机会可以深入研究，地址：<a target="_blank" rel="noopener" href="https://github.com/ysc/word">https://github.com/ysc/word</a></p>
<p><strong>Word</strong>分词是一个<strong>Java</strong>实现的分布式的中文分词组件，提供了多种基于词典的分词算法，并利用<strong>ngram</strong>模型来消除歧义。能准确识别英文、数字，以及日期、时间等数量词，能识别人名、地名、组织机构名等未登录词。能通过自定义配置文件来改变组件行为，能自定义用户词库、自动检测词库变化、支持大规模分布式环境，能灵活指定多种分词算法，能使用<strong>refine</strong>功能灵活控制分词结果，还能使用词频统计、词性标注、同义标注、反义标注、拼音标注等功能。提供了10种分词算法，还提供了10种文本相似度算法，同时还无缝和<strong>Lucene</strong>、<strong>Solr</strong>、<strong>ElasticSearch</strong>、<strong>Luke</strong>集成。注意：<strong>word1.3</strong>需要<strong>JDK1.8</strong>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B9%A6%E7%AD%BE%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%85%E7%90%86%E5%BD%93%E5%89%8D%E9%A1%B5(%E7%BD%91%E7%AB%99)%E8%A1%A8%E5%8D%95%E5%AD%98%E5%82%A8&%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B9%A6%E7%AD%BE%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%85%E7%90%86%E5%BD%93%E5%89%8D%E9%A1%B5(%E7%BD%91%E7%AB%99)%E8%A1%A8%E5%8D%95%E5%AD%98%E5%82%A8&%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">自定义书签——浏览器清理当前页(网站)表单存储&缓存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-22 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-22T00:00:00+00:00">2016-03-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:26" itemprop="dateModified" datetime="2024-01-26T12:42:26+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B9%A6%E7%AD%BE/" itemprop="url" rel="index"><span itemprop="name">自定义书签</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>而不是清理所有缓存,可以避免全局缓存清理.因为部分网站缓存的内容还是有意义的</p>
</blockquote>
<ul>
<li><p>1.新建浏览器标签</p>
</li>
<li><p>2.内容</p>
</li>
</ul>
<p><strong>清理表单存储</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">名字: pageClear</span><br><span class="line"></span><br><span class="line">网站: </span><br><span class="line">javascript:(localStorage.clear()&amp;alert(&#x27;单页缓存清理完成,请刷新浏览器&#x27;)&amp;( location.href=location.origin+location.pathname ));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">javascript:(localStorage.clear()&amp;( location.href=location.origin+location.pathname ));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">javascript:(localStorage.clear()&amp;alert(&#x27;单页缓存清理完成,请刷新浏览器&#x27;)&amp;location.reload());</span><br><span class="line"></span><br><span class="line">javascript:(localStorage.clear()&amp;location.reload());</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><strong>清理页面缓存</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javascript:( location.href = location.href + &quot;?_=&quot; + new Date().valueOf());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>3.需求时,点击即可</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B9%A6%E7%AD%BE%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%85%E7%90%86%E5%BD%93%E5%89%8D%E9%A1%B5(%E7%BD%91%E7%AB%99)%E8%A1%A8%E5%8D%95%E5%AD%98%E5%82%A8&%E7%BC%93%E5%AD%98/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Windows-build-Solr5-5-search-services/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Windows-build-Solr5-5-search-services/" class="post-title-link" itemprop="url">Windows下搭建Solr5.5搜索服务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-21 22:29:04" itemprop="dateCreated datePublished" datetime="2016-03-21T22:29:04+00:00">2016-03-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:24" itemprop="dateModified" datetime="2024-01-26T12:42:24+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming-Notes/" itemprop="url" rel="index"><span itemprop="name">Programming Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="机器环境"><a href="#机器环境" class="headerlink" title="机器环境"></a>机器环境</h4><p><strong>Windows</strong>：Win7 64 bit<br><strong>Java</strong>：java version “1.8.0_45”；Java HotSpot(TM) 64-Bit Server VM<br><strong>Solr</strong>：5.5<br><strong>Lucene</strong>：5.5<br><strong>Tomcat</strong>：8.0.32</p>
<p>Lucene和Solr下载地址：<a target="_blank" rel="noopener" href="http://lucene.apache.org/">http://lucene.apache.org/</a><br>Windows选择下载zip压缩包，Linux选择下载tgz压缩包<br>Tomcat下载地址：<a target="_blank" rel="noopener" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a> ，选择Binary Distributions下的Core中的64-bit Windows zip (pgp, md5, sha1)下载之后文件名称是：apache-tomcat-8.0.32-windows-x64</p>
<h4 id="Windows下启动Tomcat并添加服务"><a href="#Windows下启动Tomcat并添加服务" class="headerlink" title="Windows下启动Tomcat并添加服务"></a>Windows下启动Tomcat并添加服务</h4><h5 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h5><p>注意<strong>JDK</strong>和<strong>Tomcat</strong>的目录中最好别有中文，首先在系统环境变量中配置<strong>JAVA_HOME</strong>，值是<code>C:/Program Files/Java/jdk1.8.0_45</code>，然后在<strong>Path</strong>中添加<code>;%JAVA_HOME%/bin</code>。</p>
<p>添加环境变量<strong>CATALINA_HOME</strong>值是<code>D:/apache-tomcat-8.0.32</code>，然后点击 <strong>tomcat</strong>的<strong>bin</strong>下的<strong>startup.bat</strong>就应该可以启动<strong>tomcat</strong>了。</p>
<h5 id="添加Tomcat到Windows服务"><a href="#添加Tomcat到Windows服务" class="headerlink" title="添加Tomcat到Windows服务"></a>添加Tomcat到Windows服务</h5><p>如果想把<strong>tomcat</strong>添加到<strong>Windows</strong>服务中，需要打开<strong>cmd</strong>运行<strong>Tomcat</strong>的<strong>bin</strong>目录下的<code>service.bat</code>脚本，安装命令如下，其中<strong>tomcat8</strong>是自己起的服务名称，当然也可以使用其它名称</p>
<blockquote>
<p>D:\apache-tomcat-8.0.32&gt;cd bin<br>D:\apache-tomcat-8.0.32\bin&gt;service.bat install tomcat8<br>Installing the service ‘tomcat8’ …<br>Using CATALINA_HOME:    “D:\apache-tomcat-8.0.32”<br>Using CATALINA_BASE:    “D:\apache-tomcat-8.0.32”<br>Using JAVA_HOME:        “C:\Program Files\Java\jdk1.8.0_45”<br>Using JRE_HOME:         “C:\Program Files\Java\jdk1.8.0_45\jre”<br>Using JVM:              “C:\Program Files\Java\jdk1.8.0_45\jre\bin\server\jvm.dl<br>l”<br>The service ‘tomcat8’ has been installed.</p>
</blockquote>
<p>卸载服务命令如下</p>
<blockquote>
<p>D:\apache-tomcat-8.0.32\bin&gt;service.bat remove tomcat8<br>Removing the service ‘tomcat8’ …<br>Using CATALINA_BASE:    “D:\apache-tomcat-8.0.32”<br>The service ‘tomcat8’ has been removed</p>
</blockquote>
<h5 id="配置Tomcat管理员"><a href="#配置Tomcat管理员" class="headerlink" title="配置Tomcat管理员"></a>配置Tomcat管理员</h5><p>在<strong>Tomcat</strong>启动之后，可以在浏览器中输入<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a> 查看是否配置成功，如果出现<strong>Tomcat</strong>主界面，点击<strong>Manager App</strong>，提示权限不足，此时需要在<code>D:/apache-tomcat-8.0.32/conf/tomcat-users.xml</code>文件中添加如下内容</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">&quot;manager-gui&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">roles</span>=<span class="string">&quot;manager-gui&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>重启<strong>Tomcat</strong>，打开浏览器点击<strong>Manager App</strong>会弹出登录框，使用配置的用户名和密码登录即可。</p>
<h4 id="Tomcat启动Solr"><a href="#Tomcat启动Solr" class="headerlink" title="Tomcat启动Solr"></a>Tomcat启动Solr</h4><ol>
<li>解压从官网下载的<strong>solr-5.5.0.zip</strong>压缩包，解压到<strong>D:&#x2F;solr-5.5.0</strong></li>
<li>复制<strong>solr-5.5.0&#x2F;server&#x2F;solr-webapp&#x2F;webapp</strong>到<strong>tomcat</strong>下的<strong>webapps</strong>目录下，改名为<strong>solr</strong></li>
<li>将<strong>solr-5.5.0&#x2F;server&#x2F;lib&#x2F;ext&#x2F;<strong>目录下的所有</strong>jar</strong>包复制到**tomcat&#x2F;webapps&#x2F;solr&#x2F;WEB-INF&#x2F;lib&#x2F;**下</li>
<li>将<strong>solr-5.5.0&#x2F;server&#x2F;solr</strong>目录复制到<strong>D:&#x2F;apache-tomcat-8.0.32&#x2F;bin</strong>目录下，这个就是传说中的<strong>solr&#x2F;home</strong>(存放检索数据)</li>
<li>设置<strong>solr&#x2F;home</strong>：编辑<strong>D:&#x2F;apache-tomcat-8.0.32&#x2F;webapps&#x2F;solr&#x2F;WEB-INF&#x2F;web.xml</strong>文件，以下部分是注释的，打开该注释，并修改<strong>env-entry-value</strong>。<strong>solr</strong>在启动的时候会去这个根目录下加载配置信息。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">env-entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">env-entry-name</span>&gt;</span>solr/home<span class="tag">&lt;/<span class="name">env-entry-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">env-entry-value</span>&gt;</span>D:/apache-tomcat-8.0.32/bin/solr<span class="tag">&lt;/<span class="name">env-entry-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">env-entry-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">env-entry-type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">env-entry</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>将<strong>solr-5.5.0&#x2F;server&#x2F;resources</strong>下的<strong>log4j.properties</strong>文件复制到<strong>tomcat&#x2F;webapps&#x2F;solr&#x2F;WEB-INF&#x2F;classes</strong>目录下，如果该目录不存在则新建。</li>
<li>将<strong>solr-5.5.0&#x2F;dist</strong>目录下的<code>solr-dataimporthandler-5.5.0.jar</code>和<code>solr-dataimporthandler-extras-5.5.0.jar</code>复制到<strong>tomcat&#x2F;webapps&#x2F;solr&#x2F;WEB-INF&#x2F;lib&#x2F;<strong>下，这个是为了以后导入数据库表数据。<br>配置完成之后，</strong>Solr</strong>环境搭建完毕，重启<strong>Tomcat</strong>，在浏览器中输入<a target="_blank" rel="noopener" href="http://localhost:8080/solr/index.html#/">http://localhost:8080/solr/index.html#/</a> 就可以看到<strong>Solr</strong>的控制台了</li>
<li>在<strong>tomcat&#x2F;solrhome&#x2F;<strong>目录下创建</strong>core</strong>(自定义)，在其目录下创建<strong>data</strong>文件夹，并将<strong>D:&#x2F;apache-tomcat-8.0.32&#x2F;bin&#x2F;solr&#x2F;configsets&#x2F;basic_configs&#x2F;<strong>目录下的</strong>conf</strong>文件夹复制到<strong>core</strong>下。然后在<strong>solr</strong>控制台点击<strong>Add Core</strong>即可完成创建。<br><img src="https://raw.githubusercontent.com/shijiebei2009/img/master/blog/solr_add_core_config.png"></li>
</ol>
<h4 id="Jetty启动Solr"><a href="#Jetty启动Solr" class="headerlink" title="Jetty启动Solr"></a>Jetty启动Solr</h4><p><strong>Solr</strong>自带<strong>Jetty</strong>服务器，并且提供了可运行的<strong>jar</strong>包，该<strong>jar</strong>包存在于<code>D:/solr-5.5.0/server</code>目录中，但是不能直接双击该<strong>jar</strong>包运行，需要在命令行中进行启动。打开<strong>cmd</strong>命令行，按照网上提示，输入启动命令</p>
<blockquote>
<p>d:\solr-5.5.0\server&gt;java -jar start.jar<br>WARNING: Nothing to start, exiting …<br>Usage: java -jar start.jar [options] [properties] [configs]<br>       java -jar start.jar –help  # for more information</p>
</blockquote>
<p>根据提示信息，该命令并不能启动<strong>jar</strong>包，原因是在新版的<strong>Solr</strong>中并不能以这种方式启动，具体细节可以参见<a target="_blank" rel="noopener" href="http://lucene.apache.org/solr/quickstart.html">Solr Quick Start</a>以及StackOverflow上面的问答<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/30983349/nothing-to-start-when-trying-to-start-apache-solr">“Nothing to start” when trying to start Apache Solr</a>，根据以上信息，我们采用如下方式启动</p>
<blockquote>
<p>d:\solr-5.5.0\bin&gt;solr start -e cloud -noprompt<br>Welcome to the SolrCloud example!<br>Starting up 2 Solr nodes for your example SolrCloud cluster.<br>Creating Solr home directory d:\solr-5.5.0\example\cloud\node1\solr<br>Cloning d:\solr-5.5.0\example\cloud\node1 into<br>   d:\solr-5.5.0\example\cloud\node2<br>Starting up Solr on port 8983 using command:<br>d:\solr-5.5.0\bin\solr.cmd start -cloud -p 8983 -s “d:\solr-5.5.0\example\cloud<br>node1\solr”<br>Waiting up to 30 to see Solr running on port 8983<br>Starting up Solr on port 7574 using command:<br>d:\solr-5.5.0\bin\solr.cmd start -cloud -p 7574 -s “d:\solr-5.5.0\example\cloud<br>node2\solr” -z localhost:9983<br>Started Solr server on port 8983. Happy searching!<br>Waiting up to 30 to see Solr running on port 7574<br>Started Solr server on port 7574. Happy searching!<br>Connecting to ZooKeeper at localhost:9983 …<br>Uploading d:\solr-5.5.0\server\solr\configsets\data_driven_schema_configs\conf f<br>or config gettingstarted to ZooKeeper at localhost:9983<br>Creating new collection ‘gettingstarted’ using command:<br><a target="_blank" rel="noopener" href="http://localhost:8983/solr/admin/collections?action=CREATE&name=gettingstarted&n">http://localhost:8983/solr/admin/collections?action=CREATE&amp;name=gettingstarted&amp;n</a><br>umShards&#x3D;2&amp;replicationFactor&#x3D;2&amp;maxShardsPerNode&#x3D;2&amp;collection.configName&#x3D;gettings<br>tarted<br>{<br>  “responseHeader”:{<br>    “status”:0,<br>    “QTime”:6080},<br>  “success”:{“”:{<br>      “responseHeader”:{<br>        “status”:0,<br>        “QTime”:5576},<br>      “core”:”gettingstarted_shard2_replica2”}}}<br>Enabling auto soft-commits with maxTime 3 secs using the Config API<br>POSTing request to Config API: <a target="_blank" rel="noopener" href="http://localhost:8983/solr/gettingstarted/config">http://localhost:8983/solr/gettingstarted/config</a><br>{“set-property”:{“updateHandler.autoSoftCommit.maxTime”:”3000”}}<br>Successfully set-property updateHandler.autoSoftCommit.maxTime to 3000<br>SolrCloud example running, please visit: <a target="_blank" rel="noopener" href="http://localhost:8983/solr">http://localhost:8983/solr</a></p>
</blockquote>
<p>成功启动之后，打开浏览器，访问<a target="_blank" rel="noopener" href="http://localhost:8983/solr">http://localhost:8983/solr</a> 即可看到Solr的控制台界面。</p>
<p>如果不想使用默认的端口<strong>8983</strong>，那么使用如下命令通过<code>-p</code>参数指定端口号同样可以启动<strong>Solr Server</strong>，访问<a target="_blank" rel="noopener" href="http://localhost:8080/solr/index.html#/">http://localhost:8080/solr/index.html#/</a> 就可以看到主控界面了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">D:\solr-5.5.0\bin&gt;solr.cmd start -cloud -p 8080 -s &quot;D:\solr-5.5.0\example\cloud\</span><br><span class="line">node1\solr&quot;</span><br><span class="line">Backing up D:\solr-5.5.0\example\cloud\node1\solr\..\logs\solr.log</span><br><span class="line">移动了         1 个文件。</span><br><span class="line">Backing up D:\solr-5.5.0\example\cloud\node1\solr\..\logs\solr_gc.log</span><br><span class="line">移动了         1 个文件。</span><br><span class="line">Waiting up to 30 to see Solr running on port 8080</span><br><span class="line">Started Solr server on port 8080. Happy searching!</span><br></pre></td></tr></table></figure>
<p>或者直接修改<strong>jetty</strong>的配置文件，修改<code>D:/solr-5.5.0/server/etc</code>目录下<code>jetty-http.xml</code>中的<strong>8983</strong>改为自己希望的端口号即可。</p>
<p><strong>参考文献</strong><br>[1] <a target="_blank" rel="noopener" href="http://blog.csdn.net/luenxin/article/details/50838895">http://blog.csdn.net/luenxin/article/details/50838895</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Hexo-blog-theme-switching-from-Jacman-to-NexT-Mist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Hexo-blog-theme-switching-from-Jacman-to-NexT-Mist/" class="post-title-link" itemprop="url">Hexo博客主题从Jacman切换到NexT.Mist</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-20 23:53:34" itemprop="dateCreated datePublished" datetime="2016-03-20T23:53:34+00:00">2016-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:19" itemprop="dateModified" datetime="2024-01-26T12:42:19+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git-GitHub/" itemprop="url" rel="index"><span itemprop="name">Git/GitHub</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h4><p>难得一个周末，经过五天的工作之后，本来是打算周六周日在睡觉中度过，因为最近工作确实挺累，倒不是工作有多繁忙，而是路途遥远，每天上下班路上花费三个小时，特别是早高峰挤地铁，那真是个体力活啊，每天都是七号线静安寺转二号线，换乘之前，并不能太深入地铁车厢内部，否则到了换乘站你可能根本就挤不下车去了。</p>
<p>最近博客流量有渐增趋势，可能是之前未被百度收录，而近期被百度收录的缘故吧，可见我天朝还是百度的天下，哎，万恶的墙啊（<strong>Great Firewall of China</strong>）！流量渐增，访客自然增加，所以也会有猎头加我微信，我也在考虑要不要把我的个人信息撤掉，貌似泄露的有点多了。同时也会有一些人因为博客的内容加我，请教谈不上，可能是一些同学在做相同的事情的过程中遇到了一些问题，而我可能刚好做过这方面的事情而已，希望有事的同学或朋友直接电联我即可，因为这是我认为最节约我们双方时间的沟通方式，确实没有太多时间去和你在微信上慢慢切磋。</p>
<p>貌似也有段时间没有发文了，主要是希望以后可以进一步提高博文质量，尽量发表一些互联网上还不存在或者没有解决方案类的文章，这样不至于人云亦云，还可以给别人提供比较多的参考价值，至于互联网上已经泛滥成灾的一些信息，以后在博文中尽量不再予以提供，不做重复发明轮子的工作。</p>
<p>扯远了，本来是打算睡觉度周末来着，但是博客的<strong>Jacman</strong>主题越看越觉得不顺眼，始终觉得有一种<strong>too young</strong>、<strong>too simple</strong>、<strong>sometimes naive</strong>的感觉。而我素来想要一个简洁的主题，终于发现<strong>NexT.Mist</strong>主题足够优雅、足够简洁、是我喜爱的风格，于是果断手贱，开始折腾起来，还好在有以前折腾的基础之上，再次折腾就比较简单了，好多东西已经驾熟就轻了，本着能省力就省力的原则，很快更改完毕，主要还有一些细节在调整中。</p>
<p>说一点最近有待提高的地方就是对时间的把控，每天都有大把的时间花费在了各种软文之中，越来越觉得实在是一种浪费。自从微信火了之后，相信大家越来越觉得时间不够用了，到处都是软文，到处都是鸡汤，到处都是某人生活中的苦难，我不是说苦难不好，也不是说你的苦难不应该公之于众，而是在这个社会，苦难太多，我们不能靠着每天去消费苦难而存活，你有时间把你的苦难公之于众供大家消费，倒不如去干点活来的实在，这就是我的观点，也是我本人行动的格言，所以在这个大家即将毕业的季节，同学们旅游的旅游，回家的回家，玩的玩，泡妞的泡妞，憋在宿舍整天打游戏的也大有人在，而我还是整天苦逼哈哈，一天不拉的跑去公司上班，赶着来回三个多小时的地铁，每天挤得像狗一样累的半死，不为别的，只因为我知道，我不努力没人替我努力，而且还有那么好的媳妇在等着我去给她幸福呢。</p>
<p>所以我还是那句话，人生的竞赛没有公平可言，但是只要起步了，就只顾风雨兼程。在不忘记享受沿途风景的时候，大家也要记得赶路哦。</p>
<p>最后把我本次更改主题参考的文章放在末尾，有需要的自行点击，不谢。</p>
<h4 id="NexT-Mist主题相关"><a href="#NexT-Mist主题相关" class="headerlink" title="NexT.Mist主题相关"></a>NexT.Mist主题相关</h4><p>本次更改主题主要参考如下内容</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/">NexT官方指南</a></p>
</li>
<li><p>在博文标题下面添加文章热度方法参考<a target="_blank" rel="noopener" href="http://prozhuchen.github.io/2015/10/01/Hexo%E5%8D%9A%E5%AE%A2%E7%AC%AC%E4%B8%89%E7%AB%99/">这里</a></p>
</li>
<li><p>在站点概览中添加友链参考<a target="_blank" rel="noopener" href="http://prozhuchen.github.io/2015/10/04/Hexo%E5%8D%9A%E5%AE%A2%E7%AC%AC%E4%B9%9D%E5%8F%88%E5%9B%9B%E5%88%86%E4%B9%8B%E4%B8%89%E7%AB%99/">这里</a></p>
</li>
<li><p>设置社交链接，参考<a target="_blank" rel="noopener" href="http://isnow.space/2016/01/29/Next%E4%B8%BB%E9%A2%98%E5%92%8CHexo%E6%9B%B4%E6%90%AD%E9%85%8D%E5%93%A6/">这里</a></p>
</li>
<li><p>需要添加<strong>音乐播放器</strong>和<strong>High一下</strong>小玩意参考<a target="_blank" rel="noopener" href="http://jijiaxin89.com/2015/08/21/%E7%8E%A9%E8%BD%AChexo%E5%8D%9A%E5%AE%A2%E4%B9%8Bnext/">这里</a></p>
</li>
<li><p>有关<strong>Hexo</strong>更详细的配置参考<a target="_blank" rel="noopener" href="http://www.zerounix.com/install-hexo-for-blog/">这里</a></p>
</li>
<li><p><strong>Hexo</strong>更改默认<strong>Google</strong>字体库，参考<a target="_blank" rel="noopener" href="http://rainnie.me/2016/03/11/Hexo-%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4Google-%E5%AD%97%E4%BD%93%E5%BA%93/">这里</a></p>
</li>
<li><p>利用<strong>Git</strong>解决<strong>Hexo</strong>博客多<strong>PC</strong>间同步问题，参考<a target="_blank" rel="noopener" href="http://rainnie.me/2016/03/13/%E5%88%A9%E7%94%A8git-%E8%A7%A3%E5%86%B3hexo%E5%8D%9A%E5%AE%A2%E5%A4%9APC-%E9%97%B4%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98/">这里</a></p>
</li>
<li><p>关于多说评论框的美化以及评论用户的操作系统和浏览器型号，参考<a target="_blank" rel="noopener" href="http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/">这里</a></p>
</li>
<li><p>使用多说给博客添加最近访客功能，参考<a target="_blank" rel="noopener" href="http://www.arao.me/2015/hexo-next-theme-optimize-duoshuo/">这里</a></p>
</li>
<li><p>给博客创建留言页面，参考<a target="_blank" rel="noopener" href="http://www.arao.me/2015/hexo-next-theme-optimize-base/">这里</a></p>
</li>
<li><p>开启打赏功能，参考<a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/theme-settings.html#reward">这里</a></p>
</li>
<li><p>多说评论显示<strong>UA</strong>，即用户操作系统和浏览器版本参考<a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/theme-settings.html#duoshuo-ua">这里</a></p>
</li>
<li><p><strong>Favicon</strong>设置后没有生效？将你的<code>favicon</code>放置到<strong>站点</strong>的<code>source</code>目录下，如我的站点<code>D:\hexo\themes\next\source\favicon.ico</code>，并在<code>D:\hexo\themes\next\_config.yml</code>中启用<code>favicon: /favicon.ico</code>即可</p>
</li>
<li><p>如何添加非默认菜单的<strong>Menu icon</strong>呢？例如我的菜单中加入了简历和友链，但是并不知道这两者对应的图标是什么，很简单，点击<a target="_blank" rel="noopener" href="http://fortawesome.github.io/Font-Awesome/3.2.1/icons/">Awesome Icons</a> 去挑选你自己喜爱的图标即可，然后去掉图标名称前面的<code>icon-</code>，只利用后面的名字即可，例如我的配置：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">menu_icons:</span><br><span class="line">  enable: true</span><br><span class="line">  # Icon Mapping.</span><br><span class="line">  home: home</span><br><span class="line">  about: user</span><br><span class="line">  categories: th</span><br><span class="line">  tags: tags</span><br><span class="line">  archives: archive</span><br><span class="line">  commonweal: heartbeat</span><br><span class="line">  links: link</span><br><span class="line">  resume: book</span><br></pre></td></tr></table></figure></li>
<li><p>修改侧边栏头像下面的字体及颜色参考<a target="_blank" rel="noopener" href="http://fancyluo.com/2015/09/18/2015-09-18-hexo-next-update/">这里</a>，修改的文件具体位置是在<code>D:\hexo\themes\next\source\css\_common\components\sidebar\sidebar-author.styl</code>中的<strong>font-size</strong>，将其调大即可。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-description</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: $site-author-name-color;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  font-size: $site-description-font-size;</span></span><br><span class="line"><span class="comment">  color: $site-description-color;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>修改代码块中字体大小，主题默认的代码块字体偏小，找到<code>D:\hexo\themes\next\source\css\_common\components\highlight\highlight.styl</code>，修改<strong>font-size</strong>属性即可</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$<span class="selector-tag">code</span>-block</span><br><span class="line">  <span class="attribute">background</span>: highlight-background</span><br><span class="line">  margin: <span class="number">20px</span> <span class="number">0</span></span><br><span class="line">  padding: <span class="number">15px</span></span><br><span class="line">  overflow: auto</span><br><span class="line">  font-size <span class="number">15px</span></span><br><span class="line">  color: highlight-foreground</span><br><span class="line">  line-height:  $line-height-code-block</span><br></pre></td></tr></table></figure></li>
<li><p>为博客添加搜索框，进入<a target="_blank" rel="noopener" href="https://swiftype.com/">swiftype</a>，点击自己的<strong>Engine</strong>-&gt;<strong>Install Search</strong>-&gt;<strong>Search Field</strong>后的<strong>edit</strong>，选择<strong>Element ID</strong>，填**#st-search-input<strong>之后选</strong>Save<strong>，继续跳转后点</strong>Activate Swiftype<strong>按钮即可完成</strong>swiftype<strong>的所有配置了。拷贝你的</strong>Engine<strong>的</strong>Install Search**中得到的代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">w,d,t,u,n,s,e</span>)&#123;w[<span class="string">&#x27;SwiftypeObject&#x27;</span>]=n;w[n]=w[n]||<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">(w[n].<span class="property">q</span>=w[n].<span class="property">q</span>||[]).<span class="title function_">push</span>(<span class="variable language_">arguments</span>);&#125;;s=d.<span class="title function_">createElement</span>(t);</span><br><span class="line">e=d.<span class="title function_">getElementsByTagName</span>(t)[<span class="number">0</span>];s.<span class="property">async</span>=<span class="number">1</span>;s.<span class="property">src</span>=u;e.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(s,e);</span><br><span class="line">&#125;)(<span class="variable language_">window</span>,<span class="variable language_">document</span>,<span class="string">&#x27;script&#x27;</span>,<span class="string">&#x27;//s.swiftypecdn.com/install/v2/st.js&#x27;</span>,<span class="string">&#x27;_st&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">_st</span>(<span class="string">&#x27;install&#x27;</span>,<span class="string">&#x27;这里是KEY&#x27;</span>,<span class="string">&#x27;2.0.0&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>然后在<strong>Next.Mist</strong>主题下的<code>_config.xml</code>中启用即可如下：<code>swiftype_key: 这里是KEY</code></p>
</li>
<li><p>把侧边栏头像变成圆形，并且鼠标停留在上面发生旋转效果，参考<a target="_blank" rel="noopener" href="http://fancyluo.com/2015/09/18/2015-09-18-hexo-next-update/">这里</a>，具体修改文件的位置是<code>D:\hexo\themes\next\source\css\_common\components\sidebar\sidebar-author.styl</code>中的内容如下</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">96px</span>;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* start*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span></span><br><span class="line">  webkit-transition: <span class="number">1.4s</span> all;</span><br><span class="line">  moz-<span class="attribute">transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  ms-<span class="attribute">transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="comment">/* end */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* start */</span></span><br><span class="line"><span class="selector-class">.site-author-image</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#55DAE1</span>;</span><br><span class="line">  webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  moz-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* end */</span></span><br></pre></td></tr></table></figure></li>
<li><p>添加右上角<strong>Fork me on GitHub</strong>，将如下代码添加到<code>D:\hexo\themes\next\layout\_layout.swig</code>底部的<strong>body</strong>标签之内即可，注意修改href为你自己的链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/shijiebei2009&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 0; right: 0; border: 0;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">alt</span>=<span class="string">&quot;Fork me on GitHub&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">data-canonical-src</span>=<span class="string">&quot;https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>mathjax</strong>数学公式后面有竖线的问题（在chrome中显示有竖线，在猎豹、Firefox中显示正常）<br>这个问题已经发了<a target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next/issues/752">Issue</a>，可以参考官方提供的解决方案。首先，编辑next的主题配置文件_config.yml，在里面找到mathjax的部分，替换为以下内容：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mathjax:</span><br><span class="line">  enable: true</span><br><span class="line">  cdn: //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span><br></pre></td></tr></table></figure>
<p>打开<code>\themes\next\layout\_scripts\third-party\mathjax.swig</code>，将其内容替换为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">mathjax</span>.<span class="property">enable</span> %&#125;</span><br><span class="line">  &lt;script type=<span class="string">&quot;text/x-mathjax-config&quot;</span>&gt;</span><br><span class="line">    <span class="title class_">MathJax</span>.<span class="property">Hub</span>.<span class="title class_">Config</span>(&#123;</span><br><span class="line">      <span class="attr">tex2jax</span>: &#123;</span><br><span class="line">        <span class="attr">inlineMath</span>: [ [<span class="string">&#x27;$&#x27;</span>,<span class="string">&#x27;$&#x27;</span>], [<span class="string">&quot;\\(&quot;</span>,<span class="string">&quot;\\)&quot;</span>]  ],</span><br><span class="line">        <span class="attr">processEscapes</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">skipTags</span>: [<span class="string">&#x27;script&#x27;</span>, <span class="string">&#x27;noscript&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;textarea&#x27;</span>, <span class="string">&#x27;pre&#x27;</span>, <span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/x-mathjax-config&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MathJax</span>.<span class="property">Hub</span>.<span class="title class_">Queue</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> all = <span class="title class_">MathJax</span>.<span class="property">Hub</span>.<span class="title function_">getAllJax</span>(), i;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">for</span> (i=<span class="number">0</span>; i &lt; all.<span class="property">length</span>; i += <span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        all[i].<span class="title class_">SourceElement</span>().<span class="property">parentNode</span>.<span class="property">className</span> += <span class="string">&#x27; has-jax&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; theme.mathjax.cdn &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>之后清理，重新发布即可去除数学公式后面的竖线。</p>
</li>
<li><p><strong>为Next主题添加版权信息</strong><br>对于<code>Hexo Next</code>主题而言先找到<code>/themes/next/layout/_macro/post.swig</code>，再找到其中的打赏部分代码，如下所示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% if ! is_index %&#125;</span><br><span class="line">    &#123;% include &#x27;reward.swig&#x27; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后直接在其上面添加如下代码段：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;copyright&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">b</span>&gt;</span>本文地址：<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&#123;&#123; page.title &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; page.permalink &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>转载请注明出处，谢谢！<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>为Next博客添加广告位</strong><br>如果你的博客访问量比较大的话，添加一个广告位也未尝不可，若有收入则可以用来抵扣域名续费或者服务器的费用，首先找到<code>D:/hexo/themes/next/layout/_macro</code>下的<code>post.swig</code>文件，在该文件中找到你认为合适放广告的位置添加如下代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加广告位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if ! is_index %&#125;</span><br><span class="line">      &#123;% include &#x27;advertisement.swig&#x27; %&#125;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>该段代码会引入存有广告代码的文件，新建<code>advertisement.swig</code>文件，将你的广告代码置于其中即可。</p>
</li>
<li><p><strong>为Next博客添加访客统计</strong><br>使用不蒜子网页计数器，统计代码非常简单，参考<a target="_blank" rel="noopener" href="http://busuanzi.ibruce.info/">这里</a></p>
</li>
<li><p><strong>为Next博客添加Font Awesome图标</strong><br>不知道你有没有注意到我的网站底部的那个小人和眼睛呢？其实这是Font Awesome图标，只需要结合不蒜子网页计数器即可实现，非常简单，直接贴出代码，这段代码在<code>D:/hexo/themes/next/layout/_partials/footer.swig</code>中，只需要将你需要的部分添加到你的模板对应文件中即可，如下所示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;theme-info&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; __(&#x27;footer.theme&#x27;) &#125;&#125; -</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;theme-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/iissnan/hexo-theme-next&quot;</span>&gt;</span></span><br><span class="line">    NexT.&#123;&#123; theme.scheme &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>|<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_container_site_pv&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-user&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>|<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_container_site_uv&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-eye&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_uv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>修改首页、归档页、分类页、Tag页显示文章数量</strong><br>默认地首页归档页仅显示10篇文章，然后要不断向后翻页，用起来非常不爽，经本人测试，设置数量在20篇比较合适，这个可以由hexo的<code>D:/hexo/_config.yml</code>来控制，修改如下</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">per_page:</span> <span class="number">20</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>修改文章底部的前一篇、下一篇为两端对齐</strong><br>在Next主题的<code>5.0.0</code>版本中，下一篇默认为靠右对齐，看起来非常丑陋，因为前一篇已经设置为靠右对齐了，对称地，这时候，下一篇应该设置为靠左对齐才对。修改<code>D:/hexo/themes/next/source/css/_common/components/post/post-nav.styl</code>文件，拉到末尾，设置如下：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">.post-nav-next</span> &#123; <span class="attr">text-align:</span> <span class="string">left;</span> &#125;</span><br><span class="line"><span class="string">.post-nav-prev</span> &#123; <span class="attr">text-align:</span> <span class="string">right;</span> &#125;</span><br></pre></td></tr></table></figure>
<p>这样看起来就非常对称啦。</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/javaScript%20%E9%80%86%E5%90%91%E9%80%92%E5%BD%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/javaScript%20%E9%80%86%E5%90%91%E9%80%92%E5%BD%92/" class="post-title-link" itemprop="url">javaScript 逆向递归</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-19 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-19T00:00:00+00:00">2016-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:20" itemprop="dateModified" datetime="2024-01-26T12:42:20+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/javaScript/" itemprop="url" rel="index"><span itemprop="name">javaScript</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="处理前数据"><a href="#处理前数据" class="headerlink" title="处理前数据"></a>处理前数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;id&quot;: 56,</span><br><span class="line">        &quot;lever&quot;: 0,</span><br><span class="line">        &quot;name&quot;: &quot;九年级上（科学）&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#1&quot;,</span><br><span class="line">        &quot;id&quot;: 58,</span><br><span class="line">        &quot;lever&quot;: 1,</span><br><span class="line">        &quot;name&quot;: &quot;生物&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#1#1&quot;,</span><br><span class="line">        &quot;id&quot;: 58,</span><br><span class="line">        &quot;lever&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;生物-子集&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#1#1#1&quot;,</span><br><span class="line">        &quot;id&quot;: 58,</span><br><span class="line">        &quot;lever&quot;: 3,</span><br><span class="line">        &quot;name&quot;: &quot;生物-子集-子集&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#1#2&quot;,</span><br><span class="line">        &quot;id&quot;: 58,</span><br><span class="line">        &quot;lever&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;生物-子集2&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#2&quot;,</span><br><span class="line">        &quot;id&quot;: 59,</span><br><span class="line">        &quot;lever&quot;: 1,</span><br><span class="line">        &quot;name&quot;: &quot;化学&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#3&quot;,</span><br><span class="line">        &quot;id&quot;: 61,</span><br><span class="line">        &quot;lever&quot;: 1,</span><br><span class="line">        &quot;name&quot;: &quot;物理&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 56</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#3#1&quot;,</span><br><span class="line">        &quot;id&quot;: 62,</span><br><span class="line">        &quot;lever&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;相对运动学&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 61</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1#2#1&quot;,</span><br><span class="line">        &quot;id&quot;: 63,</span><br><span class="line">        &quot;lever&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;碳元素&quot;,</span><br><span class="line">        &quot;parent_id&quot;: 59</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h1 id="处理后数据"><a href="#处理后数据" class="headerlink" title="处理后数据"></a>处理后数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;bookId&quot;: 12,</span><br><span class="line">        &quot;code&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;id&quot;: 56,</span><br><span class="line">        &quot;lever&quot;: 0,</span><br><span class="line">        &quot;name&quot;: &quot;九年级上（科学）&quot;,</span><br><span class="line">        &quot;subset&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;bookId&quot;: 12,</span><br><span class="line">                &quot;code&quot;: &quot;1#1&quot;,</span><br><span class="line">                &quot;id&quot;: 58,</span><br><span class="line">                &quot;lever&quot;: 1,</span><br><span class="line">                &quot;name&quot;: &quot;生物&quot;,</span><br><span class="line">                &quot;parent_id&quot;: 56,</span><br><span class="line">                &quot;subset&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;bookId&quot;: 12,</span><br><span class="line">                        &quot;code&quot;: &quot;1#1#1&quot;,</span><br><span class="line">                        &quot;id&quot;: 58,</span><br><span class="line">                        &quot;lever&quot;: 2,</span><br><span class="line">                        &quot;name&quot;: &quot;生物-子集&quot;,</span><br><span class="line">                        &quot;parent_id&quot;: 56,</span><br><span class="line">                        &quot;subset&quot;: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                &quot;bookId&quot;: 12,</span><br><span class="line">                                &quot;code&quot;: &quot;1#1#1#1&quot;,</span><br><span class="line">                                &quot;id&quot;: 58,</span><br><span class="line">                                &quot;lever&quot;: 3,</span><br><span class="line">                                &quot;name&quot;: &quot;生物-子集-子集&quot;,</span><br><span class="line">                                &quot;parent_id&quot;: 56</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;bookId&quot;: 12,</span><br><span class="line">                        &quot;code&quot;: &quot;1#1#2&quot;,</span><br><span class="line">                        &quot;id&quot;: 58,</span><br><span class="line">                        &quot;lever&quot;: 2,</span><br><span class="line">                        &quot;name&quot;: &quot;生物-子集2&quot;,</span><br><span class="line">                        &quot;parent_id&quot;: 56</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;bookId&quot;: 12,</span><br><span class="line">                &quot;code&quot;: &quot;1#2&quot;,</span><br><span class="line">                &quot;id&quot;: 59,</span><br><span class="line">                &quot;lever&quot;: 1,</span><br><span class="line">                &quot;name&quot;: &quot;化学&quot;,</span><br><span class="line">                &quot;parent_id&quot;: 56,</span><br><span class="line">                &quot;subset&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;bookId&quot;: 12,</span><br><span class="line">                        &quot;code&quot;: &quot;1#2#1&quot;,</span><br><span class="line">                        &quot;id&quot;: 63,</span><br><span class="line">                        &quot;lever&quot;: 2,</span><br><span class="line">                        &quot;name&quot;: &quot;碳元素&quot;,</span><br><span class="line">                        &quot;parent_id&quot;: 59</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;bookId&quot;: 12,</span><br><span class="line">                &quot;code&quot;: &quot;1#3&quot;,</span><br><span class="line">                &quot;id&quot;: 61,</span><br><span class="line">                &quot;lever&quot;: 1,</span><br><span class="line">                &quot;name&quot;: &quot;物理&quot;,</span><br><span class="line">                &quot;parent_id&quot;: 56,</span><br><span class="line">                &quot;subset&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;bookId&quot;: 12,</span><br><span class="line">                        &quot;code&quot;: &quot;1#3#1&quot;,</span><br><span class="line">                        &quot;id&quot;: 62,</span><br><span class="line">                        &quot;lever&quot;: 2,</span><br><span class="line">                        &quot;name&quot;: &quot;相对运动学&quot;,</span><br><span class="line">                        &quot;parent_id&quot;: 61</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<p><strong>格式化工具</strong>  <a target="_blank" rel="noopener" href="http://tool.oschina.net/codeformat/json">http://tool.oschina.net/codeformat/json</a></p>
<h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码 &#96;&#96;&#96;"></a>示例代码 &#96;&#96;&#96;</h1><p>&#x2F;**</p>
<ul>
<li><p>Created by Administrator on 2016&#x2F;1&#x2F;8.<br>*&#x2F;<br>(function () {<br>‘use strict’;</p>
<p>{<br>  dataFormatTest();&#x2F;&#x2F; 启动入口<br>}</p>
<p>function dataFormatTest(){<br>  var tempData &#x3D; [{ “bookId”: 12, “code”: “1”, “id”: 56, “lever”: 0, “name”: “九年级上（科学）”}, {“bookId”: 12, “code”: “1#1”, “id”: 58, “lever”: 1, “name”: “生物”, “parent_id”: 56}, {“bookId”: 12, “code”: “1#1#1”, “id”: 58, “lever”: 2, “name”: “生物-子集”, “parent_id”: 56}, {“bookId”: 12, “code”: “1#1#1#1”, “id”: 58, “lever”: 3, “name”: “生物-子集-子集”, “parent_id”: 56}, {“bookId”: 12, “code”: “1#1#2”, “id”: 58, “lever”: 2, “name”: “生物-子集2”, “parent_id”: 56}, { “bookId”: 12, “code”: “1#2”, “id”: 59, “lever”: 1, “name”: “化学”, “parent_id”: 56}, {“bookId”: 12, “code”: “1#3”, “id”: 61, “lever”: 1, “name”: “物理”, “parent_id”: 56}, { “bookId”: 12, “code”: “1#3#1”, “id”: 62, “lever”: 2, “name”: “相对运动学”, “parent_id”: 61}, {“bookId”: 12, “code”: “1#2#1”, “id”: 63, “lever”: 2, “name”: “碳元素”, “parent_id”: 59}];<br>  var result &#x3D; dataFormat(tempData);<br>  console.log(JSON.stringify(result));<br>}</p>
<p>function dataFormat(json) {<br>  console.log(“json:”+JSON.stringify(json));<br>  var upCode;<br>  var jsonNew &#x3D; [];<br>  for (var i &#x3D; 0; i &lt; json.length; i++) {<br>console.log(‘json[i].lever):’+json[i].lever);<br>console.log(‘json[0].lever:’+(json[0].lever));<br>if(json[i].lever !&#x3D; json[0].lever)<br>{<br>  console.log(‘continue’);<br>  continue;<br>}<br><br>&#x2F;&#x2F; 将当前层数据直接添加<br>console.log(‘push:’+JSON.stringify(json[i]));<br>jsonNew.push(json[i]);<br><br>&#x2F;&#x2F; 检查子集是否存在<br>var jsonSnippets &#x3D; snippets(json, i, json[i].code);<br>if(jsonSnippets.length&gt;0){<br>  &#x2F;&#x2F; [递归]获取下一层子集数据<br>  var jsonresult &#x3D; dataFormat(jsonSnippets);<br><br>  console.log(“subset:” + JSON.stringify(jsonresult));<br>  jsonNew[jsonNew.length - 1][‘subset’] &#x3D; jsonresult;<br><br>  &#x2F;&#x2F;if (jsonNew[jsonNew.length - 1][‘subset’] instanceof Array) {<br>  &#x2F;&#x2F;  console.log(“1:” + JSON.stringify(jsonresult));<br>  &#x2F;&#x2F;  jsonNew[jsonNew.length - 1][‘subset’].push(jsonresult)<br>  &#x2F;&#x2F;} else {<br>  &#x2F;&#x2F;  console.log(“2:” + JSON.stringify(jsonresult));<br>  &#x2F;&#x2F;  jsonNew[jsonNew.length - 1][‘subset’] &#x3D; jsonresult;<br>  &#x2F;&#x2F;}<br>}<br>upCode &#x3D; json[i].code;<br>  }<br>  return jsonNew;<br>}</p>
<p>function snippets(json,beginIndex,code){<br>  var jsonSnippets&#x3D;[];<br>  for (var i &#x3D; beginIndex; i &lt; json.length; i++) {<br>if(json[i].code.startsWith(code+”#”)){<br>  jsonSnippets.push(json[i]);<br>}<br>  }<br>  console.log(“sn:”+JSON.stringify(jsonSnippets));<br>  return jsonSnippets;<br>}</p>
</li>
</ul>
<p>})();</p>
<pre><code>

&lt;!-- more --&gt;

</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Safari%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95(inspect)%E7%A7%BB%E5%8A%A8%E7%AB%AFwebview,%E6%89%BE%E4%B8%8D%E5%88%B0%E5%BE%85%E8%B0%83%E8%AF%95%E9%A1%B5%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Safari%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95(inspect)%E7%A7%BB%E5%8A%A8%E7%AB%AFwebview,%E6%89%BE%E4%B8%8D%E5%88%B0%E5%BE%85%E8%B0%83%E8%AF%95%E9%A1%B5%E9%9D%A2/" class="post-title-link" itemprop="url">Safari远程调试(inspect)移动端webview,找不到待调试页面</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-14 00:00:02" itemprop="dateCreated datePublished" datetime="2016-03-14T00:00:02+00:00">2016-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:19" itemprop="dateModified" datetime="2024-01-26T12:42:19+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/inspect/" itemprop="url" rel="index"><span itemprop="name">inspect</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Safari-远程调试移动端webview-找不到-待调试-页面"><a href="#Safari-远程调试移动端webview-找不到-待调试-页面" class="headerlink" title="Safari 远程调试移动端webview, 找不到 待调试 页面"></a>Safari 远程调试移动端webview, 找不到 待调试 页面</h1><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p> ios设备升级到9.0,默认的开发者权限是关闭的</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>需要设置开发者权限<br>设置-开发者- instruments -Logging-Energy[打开]<br>设置-开发者-ui Automation- Enable UI Automation[打开]</p>
<h2 id="原因二"><a href="#原因二" class="headerlink" title="原因二"></a>原因二</h2><ul>
<li><p>Build Settings 中Provisioning Profile中设置了<code>xxx_dis</code>发布版</p>
</li>
<li><p>解决办法：修改为<code>xxx_dev</code>或者<code>automatic</code>,重新安装到程序包，就能正常在Safari中正常调试了</p>
</li>
</ul>
<hr>
<h1 id="常规Safari远程调试"><a href="#常规Safari远程调试" class="headerlink" title="常规Safari远程调试"></a>常规Safari远程调试</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">设置</span><br><span class="line">   | Safari</span><br><span class="line">   |        | 高级</span><br><span class="line">   |        |      |Web检查器</span><br></pre></td></tr></table></figure>
<p><code>Mac下ionic调试 - java_speed的个人页面 - 开源中国社区</code><br><a target="_blank" rel="noopener" href="https://my.oschina.net/twinkling/blog/504824?p=">https://my.oschina.net/twinkling/blog/504824?p=</a></p>
<hr>
<h1 id="更多调试工具"><a href="#更多调试工具" class="headerlink" title="更多调试工具"></a>更多调试工具</h1><p>使用weinre调试</p>
<p>使用chrome的inspect调试</p>
<p>GapDebug</p>
<p>PhoneGap Developer App</p>
<p>Ionic View</p>
<p><code>ionic调试方法总结 - ioniconline的博客 - 博客频道 - CSDN.NET</code><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/ioniconline/article/details/50162685">http://blog.csdn.net/ioniconline/article/details/50162685</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Safari%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95(inspect)%E7%A7%BB%E5%8A%A8%E7%AB%AFwebview,%E6%89%BE%E4%B8%8D%E5%88%B0%E5%BE%85%E8%B0%83%E8%AF%95%E9%A1%B5%E9%9D%A2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/hexo%E6%8F%90%E4%BA%A4github%E5%87%BA%E9%94%99(ssh)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/hexo%E6%8F%90%E4%BA%A4github%E5%87%BA%E9%94%99(ssh)/" class="post-title-link" itemprop="url">hexo提交github出错(ssh)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-14 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-14T00:00:00+00:00">2016-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:19" itemprop="dateModified" datetime="2024-01-26T12:42:19+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="hexo-d-提交github出错-ssh"><a href="#hexo-d-提交github出错-ssh" class="headerlink" title="hexo d 提交github出错(ssh)"></a><code>hexo d</code> 提交github出错(ssh)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br><span class="line">Warning: Permanently added the RSA host key for IP address &#x27;192.30.252.128&#x27; to the list of known hosts.</span><br><span class="line">ERROR: Permission to liuxiang/liuxiang.github.io.git denied to lushanlai.</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Warning: Permanently added the RSA host key for IP address &#x27;192.30.252.128&#x27; to the list of known hosts.</span><br><span class="line">ERROR: Permission to liuxiang/liuxiang.github.io.git denied to lushanlai.</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (F:\Tool\node\hexo\blog\node_modules\hexo-deployer-git\node_modules\hexo-util\lib\spawn.js:42:17)</span><br><span class="line">    at emitTwo (events.js:87:13)</span><br><span class="line">    at ChildProcess.emit (events.js:172:7)</span><br><span class="line">    at maybeClose (internal/child_process.js:817:16)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nothing to commit, working directory clean</span><br><span class="line">fatal: Could not read from remote repository.</span><br></pre></td></tr></table></figure>


<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><ul>
<li><p>重新本地生成ssh-key</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;邮件地址@youremail.com&quot;</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):&lt;回车就好&gt;</span><br><span class="line">Enter passphrase (empty for no passphrase):&lt;输入加密串&gt;  (不建议输入密码,hexo提交默认是无密码)</span><br><span class="line">Enter same passphrase again:&lt;再次输入加密串&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>更新,github  <code> https://github.com/settings/ssh</code></p>
</li>
<li><p>测试连接 <code>ssh -T git@github.com</code></p>
</li>
<li><p>hexo重新提交 <code>hexo d</code></p>
</li>
</ul>
<hr>
<h1 id="上传操作-hexo-d-报错spawn-git-ENOENT"><a href="#上传操作-hexo-d-报错spawn-git-ENOENT" class="headerlink" title="上传操作  hexo d  报错spawn git ENOENT"></a>上传操作  hexo d  报错spawn git ENOENT</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Error: spawn git ENOENT</span><br><span class="line">    at exports._errnoException (util.js:746:11)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (child_process.js:1053:32)</span><br><span class="line">    at child_process.js:1144:20)</span><br><span class="line">    at process._tickCallback (node.js:355:11)</span><br></pre></td></tr></table></figure>
<p>未添加Git环境变量引起，添加Git与git管理库的环境变量即可；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Git\bin;D:\Git\libexec\git-core</span><br></pre></td></tr></table></figure>
<p><code>hexo 部署至Git遇到的坑 - 简书</code><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/67c57c70f275">http://www.jianshu.com/p/67c57c70f275</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo%E6%8F%90%E4%BA%A4github%E5%87%BA%E9%94%99(ssh)/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/travisci-hexo-deploy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/travisci-hexo-deploy/" class="post-title-link" itemprop="url">使用travis-ci自动部署hexo博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-13 16:51:37" itemprop="dateCreated datePublished" datetime="2016-03-13T16:51:37+00:00">2016-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:20" itemprop="dateModified" datetime="2024-01-26T12:42:20+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/technology/" itemprop="url" rel="index"><span itemprop="name">technology</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>travis-ci是一个持续集成工具，目前已经支持大部分主流语言了，如：node.js、objective-c、android、php、c、java、python、ruby、go等等。travis ci与github集成非常紧密，官方的集成测试托管只支持github项目，而且它对于公有的github仓库免费。在这篇文章中，我将介绍如何通过travis-ci自动化部署hexo博客。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/travisci-hexo-deploy/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%90%ADblog%20&%20github%20pages,hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%90%ADblog%20&%20github%20pages,hexo/" class="post-title-link" itemprop="url">手把手搭blog & github pages,hexo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-13 00:00:00" itemprop="dateCreated datePublished" datetime="2016-03-13T00:00:00+00:00">2016-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:19" itemprop="dateModified" datetime="2024-01-26T12:42:19+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>基于github pages支持 &amp; hexo  静态博客 生成器</p>
</blockquote>
<h1 id="收益"><a href="#收益" class="headerlink" title="收益"></a>收益</h1><ul>
<li><p>学习留存率<br><a target="_blank" rel="noopener" href="http://liuxiang.github.io/2015/12/18/%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9%E5%B9%B3%E5%9D%87%E7%95%99%E5%AD%98%E7%8E%87/">http://liuxiang.github.io/2015/12/18/%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9%E5%B9%B3%E5%9D%87%E7%95%99%E5%AD%98%E7%8E%87/</a></p>
</li>
<li><p>从事行业留下点东西</p>
</li>
<li><p>github好装逼,找工作待遇好</p>
</li>
<li><p>分类:留自己看,给别人看</p>
</li>
<li><p>被动总结,结构化知识</p>
</li>
<li><p>方便分享</p>
</li>
</ul>
<h1 id="一-pages-github"><a href="#一-pages-github" class="headerlink" title="一.pages.github"></a>一.pages.github</h1><p>1.注册github账号<br>2.新建 [username].github.io  项目</p>
<p><strong>参考</strong><br><a target="_blank" rel="noopener" href="https://pages.github.com/">https://pages.github.com/</a></p>
<h1 id="二-hexo-博客生成器"><a href="#二-hexo-博客生成器" class="headerlink" title="二.hexo 博客生成器"></a>二.hexo 博客生成器</h1><p>windows：安装 nodejs,hexo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g #npm安装hexo-cli</span><br><span class="line">$ hexo init blog #hexo初始化,命名blog</span><br><span class="line">$ cd blog #进入目录</span><br><span class="line">$ npm install #安装依赖模块</span><br><span class="line">$ hexo server #开启预览(http://localhost:4000,Press Ctrl+C to stop)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ hexo generate #生成静态页面</span><br><span class="line">$ hexo server #开启预览(http://localhost:4000,Press Ctrl+C to stop)</span><br></pre></td></tr></table></figure>


<h1 id="三-配置hexo提交github路径"><a href="#三-配置hexo提交github路径" class="headerlink" title="三.配置hexo提交github路径"></a>三.配置hexo提交github路径</h1><p><code>blog/_config.yml</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  #repository: https://github.com/liuxiang/liuxiang.github.io.git</span><br><span class="line">  repository: git@github.com:liuxiang/liuxiang.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>


<h1 id="四-配置github代码提交-ssh信任（作用：免账号提交代码，集成hexo）"><a href="#四-配置github代码提交-ssh信任（作用：免账号提交代码，集成hexo）" class="headerlink" title="四.配置github代码提交 ssh信任（作用：免账号提交代码，集成hexo）"></a>四.配置github代码提交 ssh信任（作用：免账号提交代码，集成hexo）</h1><p><code>配置SSH keys</code><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/05289a4bc8b2">http://www.jianshu.com/p/05289a4bc8b2</a></p>
<blockquote>
<p>安装Git - 打开Git Bash Here窗口<br>设置用户名邮箱<br>git config –global user.name “liuxiang”<br>git config –global user.email “<a href="mailto:&#108;&#105;&#x75;&#120;&#105;&#x61;&#110;&#103;&#x2e;&#49;&#x32;&#x32;&#55;&#x40;&#x71;&#x71;&#46;&#x63;&#x6f;&#x6d;&#x2e;&#x63;&#111;&#x6d;">&#108;&#105;&#x75;&#120;&#105;&#x61;&#110;&#103;&#x2e;&#49;&#x32;&#x32;&#55;&#x40;&#x71;&#x71;&#46;&#x63;&#x6f;&#x6d;&#x2e;&#x63;&#111;&#x6d;</a>“</p>
</blockquote>
<p>SSH keys</p>
<ul>
<li><p>介绍</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;邮件地址@youremail.com&quot;</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):&lt;回车就好&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Enter passphrase (empty for no passphrase):&lt;输入加密串&gt;  (不建议输入密码,hexo提交默认是无密码)</span><br><span class="line">Enter same passphrase again:&lt;再次输入加密串&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;liuxiang.1227@qq.com&quot;</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa):</span><br><span class="line">/c/Users/Administrator/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /c/Users/Administrator/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /c/Users/Administrator/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:GDZ/8mEe4W9vL+re3ZI0S16zSgWgAB23/lvQVi+BEi4 liuxiang.1227@qq.com</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|     .oo....     |</span><br><span class="line">|       .o.o...   |</span><br><span class="line">|      + Eo+ .... |</span><br><span class="line">|     . =.o o. o..|</span><br><span class="line">|      . S.*. o...|</span><br><span class="line">|         *.+o =o.|</span><br><span class="line">|          o.o* =o|</span><br><span class="line">|           .+oBo.|</span><br><span class="line">|           ++++++|</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure></li>
</ul>
<p>-添加SSH Key到GitHub<br>在本机设置SSH Key之后，需要添加到GitHub上，以完成SSH链接的设置。</p>
<blockquote>
<p>1、打开本地C:\Documents and Settings\Administrator.ssh\id_rsa.pub文件。此文件里面内容为刚才生成人密钥。如果看不到这个文件，你需要设置显示隐藏文件。准确的复制这个文件的内容，才能保证设置的成功。</p>
</blockquote>
<blockquote>
<p>2、登陆github系统。点击右上角的 Account Settings—&gt;SSH Public keys —&gt; add another public keys</p>
</blockquote>
<blockquote>
<p>3、把你本地生成的密钥复制到里面（key文本框中）， 点击 add key 就ok了</p>
</blockquote>
<blockquote>
<p>测试</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br><span class="line">Hi liuxiang! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure>

<h2 id="五-hexo提交发布内容-public"><a href="#五-hexo提交发布内容-public" class="headerlink" title="五.hexo提交发布内容(public)"></a>五.hexo提交发布内容(public)</h2><p><code> hexo deploy</code> #发布github(依赖_config.yml中deploy-github配置)</p>
<p>** 错误**<br><code>hexo deploy命令显示ERROR Deployer not found : github</code><br><strong>解决办法</strong><br><code>npm install hexo-deployer-git --save</code></p>
<p><strong>重试</strong><br><code> hexo deploy</code> #发布github(依赖_config.yml中deploy-github配置)</p>
<h2 id="测试访问-github-io"><a href="#测试访问-github-io" class="headerlink" title="测试访问 ****.github.io"></a>测试访问 <code>****.github.io</code></h2><hr>
<h1 id="六-更新hexo主题模板"><a href="#六-更新hexo主题模板" class="headerlink" title="六.更新hexo主题模板"></a>六.更新<code>hexo</code>主题模板</h1><p>github搜：hexo-theme<br><a target="_blank" rel="noopener" href="https://github.com/search?o=desc&q=hexo-theme&s=stars&type=Repositories&utf8=%E2%9C%93">https://github.com/search?o=desc&amp;q=hexo-theme&amp;s=stars&amp;type=Repositories&amp;utf8=%E2%9C%93</a><br>如：<code>hexo-theme-yilia</code></p>
<ul>
<li><code>下载&amp;位置</code>: <code>blog/themes</code></li>
<li><code>更新主题模板应用</code> 修改hexo根目录下的 _config.yml ： theme: yilia</li>
<li><code>重新编译&amp;本地服务</code> <code>hexo g &amp; hexo s</code></li>
</ul>
<p><strong>出错</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR Process failed: layout/.DS_Store</span><br><span class="line">TypeError: Cannot read property &#x27;compile&#x27; of undefined</span><br></pre></td></tr></table></figure>
<p><strong>解决办法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 进到你使用的theme对应的目录，再进到layout/和layout/_partial/下.</span><br><span class="line">分别执行rm .DS_Store</span><br></pre></td></tr></table></figure>
<p><strong>参考</strong>  <a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000004533667">https://segmentfault.com/q/1010000004533667</a></p>
<ul>
<li>重试&gt;重新编译&amp;本地服务 <code>hexo g &amp; hexo s</code></li>
</ul>
<h1 id="提交blog更新"><a href="#提交blog更新" class="headerlink" title="提交blog更新"></a>提交blog更新</h1><p><code> hexo deploy</code> #发布github(依赖_config.yml中deploy-github配置)</p>
<hr>
<h1 id="保留hexo工程代码，提交至github"><a href="#保留hexo工程代码，提交至github" class="headerlink" title="保留hexo工程代码，提交至github"></a>保留hexo工程代码，提交至github</h1><ul>
<li>github 新建工程<code>blog.hexo</code></li>
<li>将本地blog工程提交<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;# blog.hexo&quot; &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin https://github.com/liuxiang/blog.hexo.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="hexo使用"><a href="#hexo使用" class="headerlink" title="hexo使用"></a>hexo使用</h1><ul>
<li><p>指定文章<code>标题</code>&amp;<code>日期</code>&amp;<code>分类</code>&amp;<code>标签</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: 文章名</span><br><span class="line">date: 2016-03-13 00:00:01</span><br><span class="line">categories:分类</span><br><span class="line">tags: [标签1, 标签2]</span><br></pre></td></tr></table></figure>

</li>
<li><p>增加更多<br><code>&lt;!-- more --&gt;</code>  之前内容会显示在首页预览，之后内容只能在点击文章标题进入后才可看到</p>
</li>
<li><p>插件<br><code>统计访问:不蒜子</code> <a target="_blank" rel="noopener" href="http://service.ibruce.info/">http://service.ibruce.info/</a></p>
</li>
</ul>
<p><code>更多</code> <a target="_blank" rel="noopener" href="https://hexo.io/plugins/">https://hexo.io/plugins/</a><br><code>搜索插件</code> Hexo 中有用户基础的 Swiftype 和 Hexo 官网使用的 Algolia</p>
<h2 id="markdown格式，编写指导"><a href="#markdown格式，编写指导" class="headerlink" title="markdown格式，编写指导"></a>markdown格式，编写指导</h2><p><code>马克飞象</code> <a target="_blank" rel="noopener" href="https://maxiang.io/">https://maxiang.io/</a><br><code>作业部落</code> <a target="_blank" rel="noopener" href="https://www.zybuluo.com/mdeditor">https://www.zybuluo.com/mdeditor</a><br><code>七牛图床</code>  <a target="_blank" rel="noopener" href="http://yotuku.cn/">http://yotuku.cn/</a></p>
<hr>
<p><strong>参考</strong><br><code>hexo你的博客</code><br><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/AfQnQjy/">http://www.tuicool.com/articles/AfQnQjy/</a></p>
<p><code>如何搭建一个独立博客——简明Github Pages与Hexo教程</code><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/05289a4bc8b2">http://www.jianshu.com/p/05289a4bc8b2</a></p>
<p><code>Hexo搭建Github静态博客 - 金石开 - 博客园</code><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/zhcncn/p/4097881.html">http://www.cnblogs.com/zhcncn/p/4097881.html</a></p>
<p><code>史上最详细“截图”搭建Hexo博客并部署到Github_百度经验</code><br><a target="_blank" rel="noopener" href="http://jingyan.baidu.com/article/d8072ac47aca0fec95cefd2d.html">http://jingyan.baidu.com/article/d8072ac47aca0fec95cefd2d.html</a></p>
<p><code>hexo | 逝去的记忆 </code><br><a target="_blank" rel="noopener" href="http://www.coolpython.cn/category/hexo/">http://www.coolpython.cn/category/hexo/</a></p>
<p><code>使用Hexo搭建博客</code><br><a target="_blank" rel="noopener" href="https://blog.lmintlcx.com/post/blog-with-hexo.html">https://blog.lmintlcx.com/post/blog-with-hexo.html</a></p>
<p><code>hexo主题推荐 </code></p>
<p><a target="_blank" rel="noopener" href="http://www.zhihu.com/question/24422335">http://www.zhihu.com/question/24422335</a></p>
<p><code>StaticGen开源静态网站 - StaticGen</code><br><a target="_blank" rel="noopener" href="http://www.staticgen.com/">http://www.staticgen.com/</a></p>
<p><code>手把手教你用github pages搭建博客</code><br><a target="_blank" rel="noopener" href="http://www.woaitqs.cc/blog/2016/06/08/blog-seo-baidu.html">http://www.woaitqs.cc/blog/2016/06/08/blog-seo-baidu.html</a></p>
<hr>
<p><code>hexo YAML [分类 &amp; 标签]编译问题</code></p>
<p><a target="_blank" rel="noopener" href="http://liuxiang.github.io/2015/11/30/hexo%20YAML%20[%E5%88%86%E7%B1%BB%20&%20%E6%A0%87%E7%AD%BE]%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98/">http://liuxiang.github.io/2015/11/30/hexo%20YAML%20[%E5%88%86%E7%B1%BB%20&amp;%20%E6%A0%87%E7%AD%BE]%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98/</a></p>
<p><code>markdown 图片注释</code><br><a target="_blank" rel="noopener" href="http://liuxiang.github.io/2016/02/23/markdown%20%E5%9B%BE%E7%89%87%E6%B3%A8%E9%87%8A/">http://liuxiang.github.io/2016/02/23/markdown%20%E5%9B%BE%E7%89%87%E6%B3%A8%E9%87%8A/</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%90%ADblog%20&%20github%20pages,hexo/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/%E5%89%8D%E7%AB%AF%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%8F%91%E5%B1%95%E5%8F%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%89%8D%E7%AB%AF%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%8F%91%E5%B1%95%E5%8F%B2/" class="post-title-link" itemprop="url">前端异步编程发展史</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-03-10 00:00:02" itemprop="dateCreated datePublished" datetime="2016-03-10T00:00:02+00:00">2016-03-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-26 12:42:17" itemprop="dateModified" datetime="2024-01-26T12:42:17+00:00">2024-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前端异步编程发展史-callBack-Promise-Generator-async-await-md"><a href="#前端异步编程发展史-callBack-Promise-Generator-async-await-md" class="headerlink" title="前端异步编程发展史(callBack,Promise,Generator,async-await).md"></a>前端异步编程发展史(callBack,Promise,Generator,async-await).md</h1><h1 id="github搜索window-Promise-document-write"><a href="#github搜索window-Promise-document-write" class="headerlink" title="github搜索&lt;script&gt;window.Promise || document.write"></a>github搜索<code>&lt;script&gt;window.Promise || document.write</code></h1><p><a target="_blank" rel="noopener" href="https://github.com/search?q=%3Cscript%3Ewindow.Promise+%7C%7C+document.write&type=Code&utf8=%E2%9C%93">https://github.com/search?q=%3Cscript%3Ewindow.Promise+%7C%7C+document.write&amp;type=Code&amp;utf8=%E2%9C%93</a></p>
<p><code>ES6-Promise (subset of rsvp.js)</code><br><a target="_blank" rel="noopener" href="https://github.com/stefanpenner/es6-promise">https://github.com/stefanpenner/es6-promise</a></p>
<hr>
<h1 id="一，callback"><a href="#一，callback" class="headerlink" title="一，callback"></a>一，callback</h1><h1 id="二，ES6中的Promise"><a href="#二，ES6中的Promise" class="headerlink" title="二，ES6中的Promise"></a>二，ES6中的<code>Promise</code></h1><p><code>谈谈 ES6 的 Promise 对象</code><br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000002928371">https://segmentfault.com/a/1190000002928371</a></p>
<p><code>JavaScript Promise迷你书（中文版)</code><br><a target="_blank" rel="noopener" href="http://liubin.org/promises-book/">http://liubin.org/promises-book/</a></p>
<p><code>Promise的前世今生和妙用技巧</code></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/whitewolf/archive/2015/10/22/4902570.html">http://www.cnblogs.com/whitewolf/archive/2015/10/22/4902570.html</a></p>
<p><code>谈谈使用promise时候的一些反模式</code><br><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/FvyQ3a">http://www.tuicool.com/articles/FvyQ3a</a></p>
<h1 id="三，Generator"><a href="#三，Generator" class="headerlink" title="三，Generator"></a>三，Generator</h1><p><code>异步编程之Generator(1)——领略魅力</code></p>
<p><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/MFn2Uj">http://www.tuicool.com/articles/MFn2Uj</a></p>
<h1 id="四，ES7中的async和await"><a href="#四，ES7中的async和await" class="headerlink" title="四，ES7中的async和await"></a>四，ES7中的async和await</h1><h1 id="异步-API"><a href="#异步-API" class="headerlink" title="异步 API"></a>异步 API</h1><ul>
<li>fetch</li>
<li>service worker</li>
<li>web worker<br>这几个是JavaScript异步编程的API</li>
</ul>
<hr>
<h1 id="如何做到兼容："><a href="#如何做到兼容：" class="headerlink" title="如何做到兼容："></a>如何做到兼容：</h1><h2 id="方法一：通过Polyfill-类库"><a href="#方法一：通过Polyfill-类库" class="headerlink" title="方法一：通过Polyfill 类库"></a>方法一：通过Polyfill 类库</h2><p><code>jakearchibald/es6-promise</code>:一个兼容 ES6 Promises 的Polyfill类库。 它基于 RSVP.js 这个兼容 Promises&#x2F;A+ 的类库， 它只是 RSVP.js 的一个子集，只实现了Promises 规定的 API。<br><code>yahoo/ypromise</code>: 这是一个独立版本的 YUI 的 Promise Polyfill，具有和 ES6 Promises 的兼容性。<br><code>getify/native-promise-only</code>: 以作为ES6 Promises的polyfill为目的的类库 它严格按照ES6 Promises的规范设计，没有添加在规范中没有定义的功能。 如果运行环境有原生的Promise支持的话，则优先使用原生的Promise支持。</p>
<h2 id="方法二：通过扩展类库"><a href="#方法二：通过扩展类库" class="headerlink" title="方法二：通过扩展类库"></a>方法二：通过扩展类库</h2><p><code>then/promise</code>: a super set of ES6 Promises designed to have readable, performant code and to provide just the extensions that are absolutely necessary for using promises today.<br><code>petkaantonov/bluebird</code>: 这个类库除了兼容 Promise 规范之外，还扩展了取消promise对象的运行，取得promise的运行进度，以及错误处理的扩展检测等非常丰富的功能，此外它在实现上还在性能问题下了很大的功夫。<br><code>when</code>: 大小很小,node和浏览器环境下都可以使用。<br><code>q</code>: 类库 Q 实现了 Promises 和 Deferreds 等规范。 它自2009年开始开发，还提供了面向Node.js的文件IO API Q-IO 等， 是一个在很多场景下都能用得到的类库。</p>
<p><code>Promise之深度解析 - 简书</code><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/e0bb0083220e">http://www.jianshu.com/p/e0bb0083220e</a></p>
<p><code>Promise实战 | 前端工程师手册</code><br><a target="_blank" rel="noopener" href="https://leohxj.gitbooks.io/front-end-database/content/javascript-asynchronous/use-promise.html">https://leohxj.gitbooks.io/front-end-database/content/javascript-asynchronous/use-promise.html</a></p>
<hr>
<p>支持Promise 我们可以使用 lie</p>
<p><a target="_blank" rel="noopener" href="https://github.com/calvinmetcalf/lie">https://github.com/calvinmetcalf/lie</a></p>
<p><code>ES6 + Webpack + React + Babel 如何在低版本浏览器上愉快的玩耍（下） - 推酷</code><br><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/rYRBbiA">http://www.tuicool.com/articles/rYRBbiA</a></p>
<hr>
<h1 id="Promise-的现行解决方案"><a href="#Promise-的现行解决方案" class="headerlink" title="Promise 的现行解决方案"></a>Promise 的现行解决方案</h1><p>其实已经有一些第三方库实现了 Promise 的功能：</p>
<ul>
<li>Q</li>
<li>when</li>
<li>WinJS</li>
<li>RSVP.js</li>
</ul>
<p>上面这些库和 JavaScript 原生 Promise 都遵守一个通用的、标准化的规范：Promises&#x2F;A+，jQuery 有个类似的方法叫 Deferred，但不兼容 Promises&#x2F;A+ 规范，于是会有点小问题，使用需谨慎。jQuery 还有一个 Promise 类型，它其实是 Deferred 的缩减版，所以也有同样问题。</p>
<p>尽管 Promise 的各路实现遵循同一规范，它们的 API 还是各不相同。JavaScript Promise 的 API 比较接近 RSVP.js，如下创建 Promise：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var promise = new Promise(function(resolve, reject) &#123;</span><br><span class="line">  // do a thing, possibly async, then…</span><br><span class="line"> </span><br><span class="line">  if (/* everything turned out fine */) &#123;</span><br><span class="line">    resolve(&quot;Stuff worked!&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123;</span><br><span class="line">    reject(Error(&quot;It broke&quot;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>JavaScript Promise：去而复返 - 司徒正美 - 博客园</code><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/rubylouvre/p/3495286.html">http://www.cnblogs.com/rubylouvre/p/3495286.html</a></p>
<p><code>JavaScript Promises 初体验 - 王铁手的博客 - SegmentFault</code><br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000002507303">https://segmentfault.com/a/1190000002507303</a></p>
<hr>
<p><strong>参考</strong><br><code>Javascript异步编程的发展</code></p>
<p><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/rmeYBjV">http://www.tuicool.com/articles/rmeYBjV</a></p>
<p><code>JavaScript异步编程解决方案笔记</code><br><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/yu6jQrI">http://www.tuicool.com/articles/yu6jQrI</a></p>
<p><code>Javascript异步编程模型进化</code></p>
<p><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/IvuA7rb">http://www.tuicool.com/articles/IvuA7rb</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.回忆往昔之callback</span><br><span class="line"></span><br><span class="line">2.活在当下之promise</span><br><span class="line"></span><br><span class="line">3.憧憬未来之generater</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><code>谈谈 ES6 的 Promise 对象 - ac黄博客精选 - SegmentFault</code></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000002928371">https://segmentfault.com/a/1190000002928371</a></p>
<p><code>jQuery的deferred对象详解 - 阮一峰的网络日志</code><br><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html">http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E5%89%8D%E7%AB%AF%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%8F%91%E5%B1%95%E5%8F%B2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/36/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/">36</a><span class="page-number current">37</span><a class="page-number" href="/page/38/">38</a><span class="space">&hellip;</span><a class="page-number" href="/page/56/">56</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/38/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">DJY</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
