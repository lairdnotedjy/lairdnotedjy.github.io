<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2426182848439341"
     crossorigin="anonymous"></script>

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.sovdating.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="JavaScript 是一种客户端脚本语言, Google 的许多开源工程中都有用到它. 这份指南列出了编写 JavaScript 时需要遵守的规则.">
<meta property="og:type" content="article">
<meta property="og:title" content="Google JavaScript 编码风格">
<meta property="og:url" content="https://www.sovdating.com/Google%20JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC/index.html">
<meta property="og:site_name" content="Sovdating Linux">
<meta property="og:description" content="JavaScript 是一种客户端脚本语言, Google 的许多开源工程中都有用到它. 这份指南列出了编写 JavaScript 时需要遵守的规则.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript1.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript2.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript3.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript4.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript5.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript6.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript7.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript8.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript9.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript10.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript11.jpg">
<meta property="og:image" content="http://blog.u.qiniudn.com/uploads/javascript12.jpg">
<meta property="article:published_time" content="2014-03-23T12:57:06.000Z">
<meta property="article:modified_time" content="2024-01-24T02:14:31.684Z">
<meta property="article:author" content="DJY">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.u.qiniudn.com/uploads/javascript1.jpg">


<link rel="canonical" href="https://www.sovdating.com/Google%20JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.sovdating.com/Google%20JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC/","path":"Google JavaScript 编码风格/","title":"Google JavaScript 编码风格"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Google JavaScript 编码风格 | Sovdating Linux</title>
  
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-33RJLY0818","only_pageview":true,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Sovdating Linux</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">some code for program</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">DJY</p>
  <div class="site-description" itemprop="description">Hello dev</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">548</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">93</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">381</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.sovdating.com/Google%20JavaScript%20%E7%BC%96%E7%A0%81%E9%A3%8E%E6%A0%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DJY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sovdating Linux">
      <meta itemprop="description" content="Hello dev">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Google JavaScript 编码风格 | Sovdating Linux">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Google JavaScript 编码风格
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-03-23 20:57:06" itemprop="dateCreated datePublished" datetime="2014-03-23T20:57:06+08:00">2014-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-24 10:14:31" itemprop="dateModified" datetime="2024-01-24T10:14:31+08:00">2024-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/technology/" itemprop="url" rel="index"><span itemprop="name">technology</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>JavaScript 是一种客户端脚本语言, Google 的许多开源工程中都有用到它. 这份指南列出了编写 JavaScript 时需要遵守的规则.</p>
<span id="more"></span>

<p><strong>命名</strong></p>
<p>通常, 使用</p>
<pre><code>functionNamesLikeThis, 
variableNamesLikeThis, 
ClassNamesLikeThis, 
EnumNamesLikeThis,
methodNamesLikeThis, 
SYMBOLIC_CONSTANTS_LIKE_THIS
</code></pre>
<p><em>属性和方法</em></p>
<ul>
<li>文件或类中的 私有 属性, 变量和方法名应该以下划线 “_” 开头.</li>
<li>保护 属性, 变量和方法名不需要下划线开头, 和公共变量名一样.</li>
</ul>
<p><em>方法和函数参数</em></p>
<p>可选参数以 opt_ 开头.</p>
<p>函数的参数个数不固定时, 应该添加最后一个参数 var_args 为参数的个数. 你也可以不设置 var_args而取代使用 arguments.</p>
<p>可选和可变参数应该在 @param 标记中说明清楚. 虽然这两个规定对编译器没有任何影响, 但还是请尽量遵守</p>
<p><em>Getters 和 Setters</em></p>
<p>Getters 和 setters 并不是必要的. 但只要使用它们了, 就请将 getters 命名成 getFoo() 形式, 将 setters 命名成 setFoo(value) 形式. (对于布尔类型的 getters, 使用 isFoo() 也可.)</p>
<p><em>命名空间</em></p>
<p>JavaScript 不支持包和命名空间.</p>
<p>不容易发现和调试全局命名的冲突, 多个系统集成时还可能因为命名冲突导致很严重的问题. 为了提高 JavaScript 代码复用率, 我们遵循下面的约定以避免冲突.</p>
<ul>
<li><p>为全局代码使用命名空间</p>
<p>  在全局作用域上, 使用一个唯一的, 与工程&#x2F;库相关的名字作为前缀标识. 比如, 你的工程是 “Project Sloth”, 那么命名空间前缀可取为 sloth.*.</p>
<pre><code>  var sloth = &#123;&#125;;

  sloth.sleep = function() &#123;
        ...
  &#125;;
</code></pre>
<p>  许多 JavaScript 库, 包括 <a target="_blank" rel="noopener" href="https://developers.google.com/closure/library/?csw=1">the Closure Library </a>and <a target="_blank" rel="noopener" href="http://dojotoolkit.org/">Dojo toolkit</a> 为你提供了声明你自己的命名空间的函数. 比如:</p>
<pre><code>  goog.provide(&#39;sloth&#39;);

  sloth.sleep = function() &#123;
        ...
  &#125;;
</code></pre>
</li>
<li><p>明确命名空间所有权</p>
<p>  当选择了一个子命名空间, 请确保父命名空间的负责人知道你在用哪个子命名空间, 比如说, 你为工程 ‘sloths’ 创建一个 ‘hats’ 子命名空间, 那确保 Sloth 团队人员知道你在使用 sloth.hats.</p>
</li>
<li><p>外部代码和内部代码使用不同的命名空间</p>
<p>  “外部代码” 是指来自于你代码体系的外部, 可以独立编译. 内外部命名应该严格保持独立. 如果你使用了外部库, 他的所有对象都在 foo.hats.* 下, 那么你自己的代码不能在 foo.hats.*下命名, 因为很有可能其他团队也在其中命名.</p>
<pre><code>  foo.require(&#39;foo.hats&#39;);

  /**
   * WRONG -- Do NOT do this.
   * @constructor
   * @extend &#123;foo.hats.RoundHat&#125;
   */
  foo.hats.BowlerHat = function() &#123;
  &#125;;
</code></pre>
<p>  如果你需要在外部命名空间中定义新的 API, 那么你应该直接导出一份外部库, 然后在这份代码中修改. 在你的内部代码中, 应该通过他们的内部名字来调用内部 API , 这样保持一致性可让编译器更好的优化你的代码.</p>
<pre><code>  foo.provide(&#39;googleyhats.BowlerHat&#39;);

  foo.require(&#39;foo.hats&#39;);

  /**
   * @constructor
   * @extend &#123;foo.hats.RoundHat&#125;
   */
  googleyhats.BowlerHat = function() &#123;
        ...
  &#125;;

  goog.exportSymbol(&#39;foo.hats.BowlerHat&#39;, googleyhats.BowlerHat);
</code></pre>
</li>
<li><p>重命名那些名字很长的变量, 提高可读性</p>
<p>  主要是为了提高可读性. 局部空间中的变量别名只需要取原名字的最后部分.</p>
<pre><code>  /**
   * @constructor
   */
  some.long.namespace.MyClass = function() &#123;
  &#125;;

  /**
   * @param &#123;some.long.namespace.MyClass&#125; a
   */
  some.long.namespace.MyClass.staticHelper = function(a) &#123;
        ...
  &#125;;

  myapp.main = function() &#123;
        var MyClass = some.long.namespace.MyClass;
        var staticHelper = some.long.namespace.MyClass.staticHelper;
        staticHelper(new MyClass());
  &#125;;
</code></pre>
<p>  不要对命名空间创建别名.</p>
<pre><code>  myapp.main = function() &#123;
        var namespace = some.long.namespace;
        namespace.MyClass.staticHelper(new namespace.MyClass());
  &#125;;
</code></pre>
<p>  除非是枚举类型, 不然不要访问别名变量的属性.</p>
<pre><code>  //right
  /** @enum &#123;string&#125; */
  some.long.namespace.Fruit = &#123;
        APPLE: &#39;a&#39;,
        BANANA: &#39;b&#39;
  &#125;;

  myapp.main = function() &#123;
        var Fruit = some.long.namespace.Fruit;
        switch (fruit) &#123;
          case Fruit.APPLE:
            ...
          case Fruit.BANANA:
            ...
        &#125;
  &#125;;

  //wrong
  myapp.main = function() &#123;
        var MyClass = some.long.namespace.MyClass;
        MyClass.staticHelper(null);
  &#125;;

  不要在全局范围内创建别名, 而仅在函数块作用域中使用.
  
</code></pre>
</li>
<li><p>文件名</p>
<p>  文件名应该使用小写字符, 以避免在有些系统平台上不识别大小写的命名方式. 文件名以.js结尾, 不要包含除 - 和 _ 外的标点符号(使用 - 优于 _).</p>
</li>
</ul>
<p><strong>自定义 toString() 方法</strong></p>
<p>应该总是成功调用且不要抛异常.</p>
<blockquote>
<p>可自定义 toString() 方法, 但确保你的实现方法满足: (1) 总是成功 (2) 没有其他负面影响. 如果不满足这两个条件, 那么可能会导致严重的问题, 比如, 如果 toString() 调用了包含 assert 的函数, assert 输出导致失败的对象, 这在 toString() 也会被调用.</p>
</blockquote>
<p><strong>延迟初始化</strong></p>
<p>可以</p>
<blockquote>
<p>没必要在每次声明变量时就将其初始化.</p>
</blockquote>
<p><strong>明确作用域</strong></p>
<p>任何时候都需要</p>
<blockquote>
<p>任何时候都要明确作用域 - 提高可移植性和清晰度. 例如, 不要依赖于作用域链中的 window 对象. 可能在其他应用中, 你函数中的 window 不是指之前的那个窗口对象.</p>
</blockquote>
<p><strong>代码格式化</strong></p>
<p>主要依照C++ 格式规范 ( <a target="_blank" rel="noopener" href="http://zh-google-styleguide.readthedocs.org/en/latest/google-cpp-styleguide/">中文版</a> ), 针对 JavaScript, 还有下面一些附加说明.</p>
<p><em>大括号</em></p>
<p>分号会被隐式插入到代码中, 所以你务必在同一行上插入大括号. 例如:</p>
<pre><code>if (something) &#123;
      // ...
&#125; else &#123;
      // ...
&#125;
</code></pre>
<p><em>数组和对象的初始化</em></p>
<p>如果初始值不是很长, 就保持写在单行上:</p>
<pre><code>var arr = [1, 2, 3];  // No space after [ or before ].
var obj = &#123;a: 1, b: 2, c: 3&#125;;  // No space after &#123; or before &#125;.
</code></pre>
<p>初始值占用多行时, 缩进2个空格.</p>
<pre><code>// Object initializer.
var inset = &#123;
    top: 10,
    right: 20,
    bottom: 15,
    left: 12
&#125;;

// Array initializer.
this.rows_ = [
    &#39;&quot;Slartibartfast&quot; &lt;fjordmaster@magrathea.com&gt;&#39;,
    &#39;&quot;Zaphod Beeblebrox&quot; &lt;theprez@universe.gov&gt;&#39;,
    &#39;&quot;Ford Prefect&quot; &lt;ford@theguide.com&gt;&#39;,
    &#39;&quot;Arthur Dent&quot; &lt;has.no.tea@gmail.com&gt;&#39;,
    &#39;&quot;Marvin the Paranoid Android&quot; &lt;marv@googlemail.com&gt;&#39;,
    &#39;the.mice@magrathea.com&#39;
];

// Used in a method call.
goog.dom.createDom(goog.dom.TagName.DIV, &#123;
    id: &#39;foo&#39;,
  className: &#39;some-css-class&#39;,
  style: &#39;display:none&#39;
&#125;, &#39;Hello, world!&#39;);
</code></pre>
<p>比较长的标识符或者数值, 不要为了让代码好看些而手工对齐. 如:</p>
<pre><code>CORRECT_Object.prototype = &#123;
    a: 0,
    b: 1,
    lengthyName: 2
&#125;;
</code></pre>
<p>不要这样做:</p>
<pre><code>WRONG_Object.prototype = &#123;
    a          : 0,
    b          : 1,
    lengthyName: 2
&#125;;
</code></pre>
<p><em>函数参数</em></p>
<p>尽量让函数参数在同一行上. 如果一行超过 80 字符, 每个参数独占一行, 并以4个空格缩进, 或者与括号对齐, 以提高可读性. 尽可能不要让每行超过80个字符. 比如下面这样:</p>
<pre><code>// Four-space, wrap at 80.  Works with very long function names, survives
// renaming without reindenting, low on space.
goog.foo.bar.doThingThatIsVeryDifficultToExplain = function(
    veryDescriptiveArgumentNumberOne,veryDescriptiveArgumentTwo,
    tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) &#123;
          // ...
&#125;;

// Four-space, one argument per line.  Works with long function names,
// survives renaming, and emphasizes each argument.
goog.foo.bar.doThingThatIsVeryDifficultToExplain = function(
    veryDescriptiveArgumentNumberOne,
    veryDescriptiveArgumentTwo,
    tableModelEventHandlerProxy,
    artichokeDescriptorAdapterIterator) &#123;
          // ...
&#125;;

// Parenthesis-aligned indentation, wrap at 80.  Visually groups arguments,
// low on space.
function foo(veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,
         tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) &#123;
      // ...
&#125;

// Parenthesis-aligned, one argument per line.  Visually groups and
// emphasizes each individual argument.
function bar(veryDescriptiveArgumentNumberOne,
         veryDescriptiveArgumentTwo,
         tableModelEventHandlerProxy,
         artichokeDescriptorAdapterIterator) &#123;
      // ...
&#125;
</code></pre>
<p><em>传递匿名函数</em></p>
<p>如果参数中有匿名函数, 函数体从调用该函数的左边开始缩进2个空格, 而不是从 function 这个关键字开始. 这让匿名函数更加易读 (不要增加很多没必要的缩进让函数体显示在屏幕的右侧).</p>
<pre><code>var names = items.map(function(item) &#123;
                    return item.name;
                  &#125;);

prefix.something.reallyLongFunctionName(&#39;whatever&#39;, function(a1, a2) &#123;
      if (a1.equals(a2)) &#123;
        someOtherLongFunctionName(a1);
      &#125; else &#123;
        andNowForSomethingCompletelyDifferent(a2.parrot);
      &#125;
&#125;);
</code></pre>
<p><em>更多的缩进</em></p>
<p>事实上, 除了 初始化数组和对象 , 和传递匿名函数外, 所有被拆开的多行文本要么选择与之前的表达式左对齐, 要么以4个(而不是2个)空格作为一缩进层次.</p>
<pre><code>someWonderfulHtml = &#39;&#39; +
                getEvenMoreHtml(someReallyInterestingValues, moreValues,
                                evenMoreParams, &#39;a duck&#39;, true, 72,
                                slightlyMoreMonkeys(0xfff)) +
                &#39;&#39;;

thisIsAVeryLongVariableName =
hereIsAnEvenLongerOtherFunctionNameThatWillNotFitOnPrevLine();

thisIsAVeryLongVariableName = &#39;expressionPartOne&#39; + someMethodThatIsLong() +
    thisIsAnEvenLongerOtherFunctionNameThatCannotBeIndentedMore();

someValue = this.foo(
    shortArg,
    &#39;Some really long string arg - this is a pretty common case, actually.&#39;,
    shorty2,
    this.bar());

if (searchableCollection(allYourStuff).contains(theStuffYouWant) &amp;&amp;
!ambientNotification.isActive() &amp;&amp; (client.isAmbientSupported() ||
                                    client.alwaysTryAmbientAnyways()) &#123;
      ambientNotification.activate();
&#125;
</code></pre>
<p><em>空行</em></p>
<p>使用空行来划分一组逻辑上相关联的代码片段.</p>
<pre><code>doSomethingTo(x);
doSomethingElseTo(x);
andThen(x);

nowDoSomethingWith(y);

andNowWith(z);
</code></pre>
<p><em>二元和三元操作符</em></p>
<p>操作符始终跟随着前行, 这样就不用顾虑分号的隐式插入问题. 如果一行实在放不下, 还是按照上述的缩进风格来换行.</p>
<pre><code>var x = a ? b : c;  // All on one line if it will fit.

// Indentation +4 is OK.
var y = a ?
    longButSimpleOperandB : longButSimpleOperandC;

// Indenting to the line position of the first operand is also OK.
var z = a ?
        moreComplicatedB :
        moreComplicatedC;
</code></pre>
<p><strong>括号</strong></p>
<p>只在需要的时候使用</p>
<p>不要滥用括号, 只在必要的时候使用它.</p>
<p>对于一元操作符(如delete, typeof 和 void ), 或是在某些关键词(如 return, throw, case, new )之后, 不要使用括号.</p>
<p><strong>字符串</strong></p>
<p>使用 ‘ 优于 “</p>
<p>单引号 (‘) 优于双引号 (“). 当你创建一个包含 HTML 代码的字符串时就知道它的好处了.</p>
<pre><code>var msg = &#39;This is some HTML&#39;;
</code></pre>
<p><strong>可见性 (私有域和保护域)</strong></p>
<p>推荐使用 JSDoc 中的两个标记: @private 和 @protected</p>
<p>JSDoc 的两个标记 @private 和 @protected 用来指明类, 函数, 属性的可见性域.</p>
<p>标记为 @private 的全局变量和函数, 表示它们只能在当前文件中访问.</p>
<p>标记为 @private 的构造器, 表示该类只能在当前文件或是其静态&#x2F;普通成员中实例化; 私有构造器的公共静态属性在当前文件的任何地方都可访问, 通过 instanceof 操作符也可.</p>
<p>永远不要为 全局变量, 函数, 构造器加 @protected 标记.</p>
<pre><code>// File 1.
// AA_PrivateClass_ and AA_init_ are accessible because they are global
// and in the same file.

/**
 * @private
 * @constructor
 */
AA_PrivateClass_ = function() &#123;
&#125;;

/** @private */
function AA_init_() &#123;
      return new AA_PrivateClass_();
&#125;

AA_init_();
</code></pre>
<p>标记为 @private 的属性, 在当前文件中可访问它; 如果是类属性私有, “拥有”该属性的类的所有静态&#x2F;普通成员也可访问, 但它们不能被不同文件中的子类访问或覆盖.</p>
<p>标记为 @protected 的属性, 在当前文件中可访问它, 如果是类属性保护, 那么”拥有”该属性的类及其子类中的所有静态&#x2F;普通成员也可访问.</p>
<blockquote>
<p>注意: 这与 C++, Java 中的私有和保护不同, 它们是在当前文件中, 检查是否具有访问私有&#x2F;保护属性的权限, 有权限即可访问, 而不是只能在同一个类或类层次上. 而 C++ 中的私有属性不能被子类覆盖. (C++&#x2F;Java 中的私有&#x2F;保护是指作用域上的可访问性, 在可访问性上的限制. JS 中是在限制在作用域上. PS: 可见性是与作用域对应)</p>
</blockquote>
<pre><code>// File 1.

/** @constructor */
  AA_PublicClass = function() &#123;
&#125;;

/** @private */
AA_PublicClass.staticPrivateProp_ = 1;

/** @private */
AA_PublicClass.prototype.privateProp_ = 2;

/** @protected */
AA_PublicClass.staticProtectedProp = 31;

/** @protected */
AA_PublicClass.prototype.protectedProp = 4;

// File 2.

/**
 * @return &#123;number&#125; The number of ducks we&#39;ve arranged in a row.
 */
AA_PublicClass.prototype.method = function() &#123;
      // Legal accesses of these two properties.
      return this.privateProp_ + AA_PublicClass.staticPrivateProp_;
&#125;;

// File 3.

/**
 * @constructor
 * @extends &#123;AA_PublicClass&#125;
 */
AA_SubClass = function() &#123;
      // Legal access of a protected static property.
      AA_PublicClass.staticProtectedProp = this.method();
&#125;;
goog.inherits(AA_SubClass, AA_PublicClass);

/**
 * @return &#123;number&#125; The number of ducks we&#39;ve arranged in a row.
 */
AA_SubClass.prototype.method = function() &#123;
      // Legal access of a protected instance property.
      return this.protectedProp;
&#125;;
</code></pre>
<p><strong>JavaScript 类型</strong></p>
<p>强烈建议你去使用编译器.</p>
<p>如果使用 JSDoc, 那么尽量具体地, 准确地根据它的规则来书写类型说明. 目前支持两种 <a target="_blank" rel="noopener" href="http://wiki.ecmascript.org/doku.php?id=spec:spec">JS2</a> 和 JS1.x 类型规范.</p>
<p><em>JavaScript 类型语言</em></p>
<p>JS2 提议中包含了一种描述 JavaScript 类型的规范语法, 这里我们在 JSDoc 中采用其来描述函数参数和返回值的类型.</p>
<p>JSDoc 的类型语言, 按照 JS2 规范, 也进行了适当改变, 但编译器仍然支持旧语法.</p>
<p><img src="http://blog.u.qiniudn.com/uploads/javascript1.jpg" alt="Javascript类型语言"></p>
<p><em>JavaScript中的类型</em></p>
<p><img src="http://blog.u.qiniudn.com/uploads/javascript2.jpg" alt="Javascript中的类型"><br><img src="http://blog.u.qiniudn.com/uploads/javascript3.jpg" alt="Javascript中的类型"></p>
<p><em>可空 vs. 可选 参数和属性</em></p>
<p>JavaScript 是一种弱类型语言, 明白可选, 非空和未定义参数或属性之间的细微差别还是很重要的.</p>
<p>对象类型(引用类型)默认非空. 注意: 函数类型默认不能为空. 除了字符串, 整型, 布尔, undefined 和 null 外, 对象可以是任何类型.</p>
<pre><code>/**
 * Some class, initialized with a value.
 * @param &#123;Object&#125; value Some value.
 * @constructor
 */
function MyClass(value) &#123;
      /**
       * Some value.
       * @type &#123;Object&#125;
       * @private
       */
      this.myValue_ = value;
&#125;
</code></pre>
<p>告诉编译器 myValue_ 属性为一对象或 null. 如果 myValue_ 永远都不会为 null, 就应该如下声明:</p>
<pre><code>/**
 * Some class, initialized with a non-null value.
 * @param &#123;!Object&#125; value Some value.
 * @constructor
 */
function MyClass(value) &#123;
      /**
       * Some value.
       * @type &#123;!Object&#125;
       * @private
       */
  	this.myValue_ = value;
&#125;
</code></pre>
<p>这样, 当编译器在代码中碰到 MyClass 为 null 时, 就会给出警告.</p>
<p>函数的可选参数可能在运行时没有定义, 所以如果他们又被赋给类属性, 需要声明成:</p>
<pre><code>/**
 * Some class, initialized with an optional value.
 * @param &#123;Object=&#125; opt_value Some value (optional).
 * @constructor
 */
function MyClass(opt_value) &#123;
      /**
       * Some value.
       * @type &#123;Object|undefined&#125;
       * @private
       */
      this.myValue_ = opt_value;
&#125;
</code></pre>
<p>这告诉编译器 myValue_ 可能是一个对象, 或 null, 或 undefined.</p>
<blockquote>
<p>注意: 可选参数 opt_value 被声明成 {Object&#x3D;}, 而不是 {Object|undefined}. 这是因为可选参数可能是 undefined. 虽然直接写 undefined 也并无害处, 但鉴于可阅读性还是写成上述的样子.</p>
</blockquote>
<p>最后, 属性的非空和可选并不矛盾, 属性既可是非空, 也可是可选的. 下面的四种声明各不相同:</p>
<pre><code>/**
 * Takes four arguments, two of which are nullable, and two of which are
 * optional.
 * @param &#123;!Object&#125; nonNull Mandatory (must not be undefined), must not be null.
 * @param &#123;Object&#125; mayBeNull Mandatory (must not be undefined), may be null.
 * @param &#123;!Object=&#125; opt_nonNull Optional (may be undefined), but if present,
 *     must not be null!
 * @param &#123;Object=&#125; opt_mayBeNull Optional (may be undefined), may be null.
 */
function strangeButTrue(nonNull, mayBeNull, opt_nonNull, opt_mayBeNull) &#123;
      // ...
&#125;;
</code></pre>
<p><strong>注释</strong></p>
<p>使用 JSDoc</p>
<p>我们使用 JSDoc 中的注释风格. 行内注释使用 &#x2F;&#x2F; 变量 的形式. 另外, 我们也遵循 C++ 代码注释风格 . 这也就是说你需要:</p>
<ul>
<li>版权和著作权的信息,</li>
<li>文件注释中应该写明该文件的基本信息(如, 这段代码的功能摘要, 如何使用, 与哪些东西相关), 来告诉那些不熟悉代码的读者.</li>
<li>类, 函数, 变量和必要的注释,</li>
<li>期望在哪些浏览器中执行,</li>
<li>正确的大小写, 标点和拼写.</li>
</ul>
<p>为了避免出现句子片段, 请以合适的大&#x2F;小写单词开头, 并以合适的标点符号结束这个句子.</p>
<p>现在假设维护这段代码的是一位初学者. 这可能正好是这样的!</p>
<p>目前很多编译器可从 JSDoc 中提取类型信息, 来对代码进行验证, 删除和压缩. 因此, 你很有必要去熟悉正确完整的 JSDoc .</p>
<p><em>JSDoc 标记表</em></p>
<p><img src="http://blog.u.qiniudn.com/uploads/javascript4.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript5.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript6.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript7.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript8.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript9.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript10.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript11.jpg" alt="JSDoc标记表"><br><img src="http://blog.u.qiniudn.com/uploads/javascript12.jpg" alt="JSDoc标记表"></p>
<p>在第三方代码中, 你还会见到其他一些 JSDoc 标记. 这些标记在 JSDoc Toolkit Tag Reference 都有介绍到, 但在 Google 的代码中, 目前不推荐使用. 你可以认为这些是将来会用到的 “保留” 名. 它们包含:</p>
<ul>
<li>@augments</li>
<li>@argument</li>
<li>@borrows</li>
<li>@class</li>
<li>@constant</li>
<li>@constructs</li>
<li>@default</li>
<li>@event</li>
<li>@example</li>
<li>@field</li>
<li>@function</li>
<li>@ignore</li>
<li>@inner</li>
<li>@link</li>
<li>@memberOf</li>
<li>@name</li>
<li>@namespace</li>
<li>@property</li>
<li>@public</li>
<li>@requires</li>
<li>@returns</li>
<li>@since</li>
<li>@static</li>
<li>@version</li>
</ul>
<p><em>JSDoc 中的 HTML</em></p>
<p>类似于 JavaDoc, JSDoc 支持许多 HTML 标签, 如<code>&lt;code&gt;, &lt;pre&gt;, &lt;tt&gt;, &lt;strong&gt;, &lt;ul&gt;, &lt;ol&gt;, &lt;li&gt;, &lt;a&gt;</code>, 等等.</p>
<p>这就是说 JSDoc 不会完全依照纯文本中书写的格式. 所以, 不要在 JSDoc 中, 使用空白字符来做格式化:</p>
<pre><code>/**
 * Computes weight based on three factors:
 *   items sent
 *   items received
 *   last timestamp
 */
</code></pre>
<p>上面的注释, 出来的结果是:</p>
<p>Computes weight based on three factors: items sent items received items received</p>
<p>应该这样写:</p>
<pre><code>/**
 * Computes weight based on three factors:
 * &lt;ul&gt;
 * &lt;li&gt;items sent
 * &lt;li&gt;items received
 * &lt;li&gt;last timestamp
 * &lt;/ul&gt;
 */
</code></pre>
<p>另外, 也不要包含任何 HTML 或类 HTML 标签, 除非你就想让它们解析成 HTML 标签.</p>
<pre><code>/**
 * Changes &lt;b&gt; tags to &lt;span&gt; tags.
 */
</code></pre>
<p>出来的结果是:</p>
<p>Changes tags to tags.</p>
<p>另外, 也应该在源代码文件中让其他人更可读, 所以不要过于使用 HTML 标签:</p>
<pre><code>/**
 * Changes &amp;lt;b&amp;gt; tags to &amp;lt;span&amp;gt; tags.
 */
</code></pre>
<p>上面的代码中, 其他人就很难知道你想干嘛, 直接改成下面的样子就清楚多了:</p>
<pre><code>/**
* Changes &#39;b&#39; tags to &#39;span&#39; tags.
*/
</code></pre>
<p><strong>编译</strong></p>
<p>推荐使用</p>
<p>建议您去使用 JS 编译器, 如 <a target="_blank" rel="noopener" href="https://developers.google.com/closure/compiler/">Closure Compiler</a>.</p>
<p><strong>Tips and Tricks</strong></p>
<p>JavaScript 小技巧</p>
<p><em>True 和 False 布尔表达式</em></p>
<p>下面的布尔表达式都返回 false:</p>
<ul>
<li>null</li>
<li>undefined</li>
<li>‘’ 空字符串</li>
<li>0 数字0</li>
</ul>
<p>但小心下面的, 可都返回 true:</p>
<ul>
<li>‘0’ 字符串0</li>
<li>[] 空数组</li>
<li>{} 空对象</li>
</ul>
<p>下面段比较糟糕的代码:</p>
<pre><code>while (x != null) &#123;
</code></pre>
<p>你可以直接写成下面的形式(只要你希望 x 不是 0 和空字符串, 和 false):</p>
<pre><code>while (x) &#123;
</code></pre>
<p>如果你想检查字符串是否为 null 或空:</p>
<pre><code>if (y != null &amp;&amp; y != &#39;&#39;) &#123;
</code></pre>
<p>但这样会更好:</p>
<pre><code>if (y) &#123;
</code></pre>
<p>注意: 还有很多需要注意的地方, 如:</p>
<ul>
<li>Boolean(‘0’) &#x3D;&#x3D; true</li>
<li>‘0’ !&#x3D; true</li>
<li>0 !&#x3D; null</li>
<li>0 &#x3D;&#x3D; []</li>
<li>0 &#x3D;&#x3D; false</li>
<li>Boolean(null) &#x3D;&#x3D; false</li>
<li>null !&#x3D; true</li>
<li>null !&#x3D; false</li>
<li>Boolean(undefined) &#x3D;&#x3D; false</li>
<li>undefined !&#x3D; true</li>
<li>undefined !&#x3D; false</li>
<li>Boolean([]) &#x3D;&#x3D; true</li>
<li>[] !&#x3D; true</li>
<li>[] &#x3D;&#x3D; false</li>
<li>Boolean({}) &#x3D;&#x3D; true</li>
<li>{} !&#x3D; true</li>
<li>{} !&#x3D; false</li>
</ul>
<p><em>条件(三元)操作符 (?:)</em></p>
<p>三元操作符用于替代下面的代码:</p>
<pre><code>if (val != 0) &#123;
      return foo();
&#125; else &#123;
      return bar();
&#125;
</code></pre>
<p>你可以写成:</p>
<pre><code>return val ? foo() : bar();
</code></pre>
<p>在生成 HTML 代码时也是很有用的:</p>
<pre><code>var html = &#39;&lt;input type=&quot;checkbox&quot;&#39; +
    (isChecked ? &#39; checked&#39; : &#39;&#39;) +
    (isEnabled ? &#39;&#39; : &#39; disabled&#39;) +
    &#39; name=&quot;foo&quot;&gt;&#39;;
</code></pre>
<p><em>&amp;&amp; 和 ||</em></p>
<p>二元布尔操作符是可短路的, 只有在必要时才会计算到最后一项.</p>
<p>“||” 被称作为 ‘default’ 操作符, 因为可以这样:</p>
<pre><code>/** @param &#123;*=&#125; opt_win */
function foo(opt_win) &#123;
      var win;
      if (opt_win) &#123;
        win = opt_win;
      &#125; else &#123;
        win = window;
      &#125;
      // ...
&#125;
</code></pre>
<p>你可以使用它来简化上面的代码:</p>
<pre><code>/** @param &#123;*=&#125; opt_win */
function foo(opt_win) &#123;
      var win = opt_win || window;
      // ...
&#125;
</code></pre>
<p>“&amp;&amp;” 也可简短代码.比如:</p>
<pre><code>if (node) &#123;
      if (node.kids) &#123;
        if (node.kids[index]) &#123;
              foo(node.kids[index]);
        &#125;
      &#125;
&#125;
</code></pre>
<p>你可以像这样来使用:</p>
<pre><code>var kid = node &amp;&amp; node.kids &amp;&amp; node.kids[index];
if (kid) &#123;
      foo(kid);
&#125;
</code></pre>
<p>不过这样就有点儿过头了:</p>
<pre><code>node &amp;&amp; node.kids &amp;&amp; node.kids[index] &amp;&amp; foo(node.kids[index]);
</code></pre>
<p><em>使用 join() 来创建字符串</em></p>
<p>通常是这样使用的:</p>
<pre><code>function listHtml(items) &#123;
      var html = &#39;&lt;div class=&quot;foo&quot;&gt;&#39;;
      for (var i = 0; i &lt; items.length; ++i) &#123;
        if (i &gt; 0) &#123;
              html += &#39;, &#39;;
        &#125;
        html += itemHtml(items[i]);
      &#125;
      html += &#39;&lt;/div&gt;&#39;;
      return html;
&#125;
</code></pre>
<p>但这样在 IE 下非常慢, 可以用下面的方式:</p>
<pre><code>function listHtml(items) &#123;
      var html = [];
      for (var i = 0; i &lt; items.length; ++i) &#123;
        html[i] = itemHtml(items[i]);
      &#125;
      return &#39;&lt;div class=&quot;foo&quot;&gt;&#39; + html.join(&#39;, &#39;) + &#39;&lt;/div&gt;&#39;;
&#125;
</code></pre>
<p>你也可以是用数组作为字符串构造器, 然后通过 myArray.join(‘’) 转换成字符串. 不过由于赋值操作快于数组的 push(), 所以尽量使用赋值操作.</p>
<p><em>遍历 Node List</em></p>
<p>Node lists 是通过给节点迭代器加一个过滤器来实现的. 这表示获取他的属性, 如 length 的时间复杂度为 O(n), 通过 length 来遍历整个列表需要 O(n^2).</p>
<pre><code>var paragraphs = document.getElementsByTagName(&#39;p&#39;);
for (var i = 0; i &lt; paragraphs.length; i++) &#123;
      doSomething(paragraphs[i]);
&#125;
</code></pre>
<p>这样做会更好:</p>
<pre><code>var paragraphs = document.getElementsByTagName(&#39;p&#39;);
for (var i = 0, paragraph; paragraph = paragraphs[i]; i++) &#123;
      doSomething(paragraph);
&#125;
</code></pre>
<p>这种方法对所有的 collections 和数组(只要数组不包含 falsy 值) 都适用.</p>
<p>在上面的例子中, 也可以通过 firstChild 和 nextSibling 来遍历孩子节点.</p>
<pre><code>var parentNode = document.getElementById(&#39;foo&#39;);
for (var child = parentNode.firstChild; child; child = child.nextSibling) &#123;
      doSomething(child);
&#125;
</code></pre>
<p><strong>Parting Words</strong></p>
<p>保持一致性.</p>
<p>当你在编辑代码之前, 先花一些时间查看一下现有代码的风格. 如果他们给算术运算符添加了空格, 你也应该添加. 如果他们的注释使用一个个星号盒子, 那么也请你使用这种方式.</p>
<p>代码风格中一个关键点是整理一份常用词汇表, 开发者认同它并且遵循, 这样在代码中就能统一表述. 我们在这提出了一些全局上的风格规则, 但也要考虑自身情况形成自己的代码风格. 但如果你添加的代码和现有的代码有很大的区别, 这就让阅读者感到很不和谐. 所以, 避免这种情况的发生.</p>
<p>修订版 2.9</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/javascript/" rel="tag"># javascript</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Google%20JavaScript%20%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/" rel="prev" title="Google JavaScript 语言规范">
                  <i class="fa fa-angle-left"></i> Google JavaScript 语言规范
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8js%E6%8D%95%E8%8E%B7css3%E5%8A%A8%E7%94%BB/" rel="next" title="如何使用js捕获css3动画">
                  如何使用js捕获css3动画 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">DJY</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
